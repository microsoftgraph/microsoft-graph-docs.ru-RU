---
title: Использование API REST API ленты действий
description: 'API ленты действий можно использовать в Microsoft Graph для возобновления действий пользователя на устройствах и платформах. Запросы API каналов активности выполняются от имени пользователя с помощью делегирования разрешений и разрешений на действия пользователей, которые можно использовать в личных или работах и учетных записях школы. '
ms.localizationpriority: medium
ms.prod: project-rome
author: ailae
doc_type: conceptualPageType
ms.openlocfilehash: 37b4a7113d0f52155d6fa8a96167600cf9a33a86
ms.sourcegitcommit: 6c04234af08efce558e9bf926062b4686a84f1b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2021
ms.locfileid: "59056118"
---
# <a name="use-the-activity-feed-rest-api"></a>Использование API REST API ленты действий

Пространство имен: microsoft.graph

API ленты действий можно использовать в Microsoft Graph для возобновления действий пользователя на устройствах и платформах. Запросы API каналов активности выполняются от [](/graph/permissions-reference#delegated-permissions-application-permissions-and-effective-permissions) имени пользователя с помощью делегирования разрешений и разрешений на действия [пользователей,](/graph/permissions-reference)которые можно использовать в личных или работах и учетных записях школы.

Действия пользователей представлены ресурсом действий и организованы в ленте на основе времени, представленной коллекцией me/activities. [](/graph/api/resources/projectrome-activity)
<!-- Add missing content.
Each activity represents a unique...
-->
## <a name="what-makes-a-great-user-activity"></a>Что делает большую активность пользователя?

Действия пользователей не только запускают приложения, но и являются глубокими ссылками на определенный контент в вашем приложении. Действия пользователя, которые вы создаете, могут не только использоваться в собственном приложении, но и отображаться в Кортана и Windows Timeline , что упрощает процесс повторного использования приложения и упрощает использование приложения на нескольких устройствах.

### <a name="what-should-become-an-activity"></a>Что должно стать действием?

Поскольку каждое приложение отличается, каждый разработчик приложения должен понимать оптимальный способ составить карту действий в приложении с действиями пользователей. Например, игры могут создавать действия для каждой кампании, приложения для создания документов могут создавать действия для каждого уникального документа, а бизнес-приложения — для каждого рабочего процесса.

При определении действий в приложении примените следующие рекомендации:

**DO:** Запись одного действия для группы связанных действий пользователя.
Если приложение используется для последовательности связанного контента, вероятно, имеет смысл записать одно действие для всего сеанса взаимодействия.

*Сценарии плейлиста:* Это особенно актуально для музыкальных плейлистов или телевизионных шоу — для демонстрации прогресса можно обновить одно действие пользователя. В этом случае у вас будет одно [](/graph/api/resources/projectrome-historyitem) действие пользователя с несколькими элементами истории, представляющими периоды взаимодействия в течение нескольких дней или недель.

**DO:** Хранение пользовательских данных в облаке.
Если вы хотите поддерживать действия на разных устройствах, необходимо убедиться, что содержимое, необходимое для повторной работы, хранится в облачном расположении. Например, если вы публикуете действие каждый раз, когда пользователь редактирует документ, он должен храниться в облаке, а не локально на устройстве пользователя, чтобы включить переключение между устройствами.

**НЕ НУЖНО:** Создание пользовательской активности для действий, которые пользователям не нужно возобновлять в будущем.
Если ваше приложение используется для выполнения простых одновоенных операций, которые не сохраняют статус для отслеживания в будущем, вам, вероятно, не нужно писать действия пользователя.

Чтобы было понятно, несмотря на то, что действия пользователей отображаются в Windows Timeline, это не предназначено как средство версии — при выборе действия на основе документов всегда должна отображаться последняя версия этого документа (включая изменения, внесенные другим пользователем).)

**НЕ НУЖНО:** Создание действия пользователя для действий, завершенных *другими пользователями.*
Если кто-то отправляет пользователю сообщение или @mentions пользователя в приложении, не следует писать новое действие. Эти взаимодействия лучше всего обслуживаются уведомлениями о наплавках.

*Сценарии совместной работы:* Если несколько пользователей работают над одним и тем же действием (например, с документом Word), будут случаи, когда другой пользователь внося изменения в документ после последнего его редактирования. В этом случае разработчикам приложений может потребоваться обновить визуальные элементы в действии, чтобы отразить изменения, внесенные в документ. Для этого приложение может обновить существующее действие без создания нового элемента истории.

>**Примечание:** Если вы публикуете действия для веб-приложения, важно включить как an, так и `activationURL` a для каждой из ваших `fallbackURL` действий. Действия будут запускать пользователя обратно в ваше приложение, как и ожидалось из microsoft experiences like Windows Timeline.

## <a name="app-interaction-patterns-and-user-activities"></a>Шаблоны взаимодействия приложений и действия пользователей
Действия пользователя, которые вы создаете, будут отличаться в зависимости от шаблона взаимодействия приложения. Несмотря на то, что каждое приложение отличается, большинство из них попадают в один из следующих шаблонов взаимодействия:

* **Приложения на основе документов** — создайте одно действие для каждого документа с одной или более записей истории, отражающих периоды использования. Важно обновить карточку действий по мере внесения изменений в документ.
* **Приложения воспроизведения мультимедиа** — создайте одно действие на логическую группу контента, например плейлист, программу или автономный контент.
* **Игры** — создайте по одному действию для каждой сохраненной игры или мира. Если ваша игра поддерживает только одну последовательность уровней, вы можете написать одно и то же действие со временем, хотя вы можете обновить карту, чтобы показать свои последние достижения или достижения.
* **Полезные приложения** . Если в вашем приложении нет ничего, что пользователи хотели бы возобновить, не следует публиковать действия. Хорошим примером является простое однонарочное приложение, например калькулятор.
* **Приложения line-of-business —** существует множество приложений для управления простыми задачами или рабочего процессами. Создайте по одному действию для каждого отдельного рабочего процесса, доступ к нему через приложение. Например, каждый отчет о расходах будет отдельным действием, так как может потребоваться щелкнуть это действие, чтобы узнать, утверждено ли оно.

*Некоторые сложные приложения включают несколько шаблонов взаимодействия. Может потребоваться следовать различным шаблонам создания пользовательских действий для различных сценариев, обрабатываемого вашим приложением.*

<!-- Add content or remove H2.
## Common use cases
-->

## <a name="next-steps"></a>Дальнейшие действия

- См. [ресурс действий](/graph/api/resources/projectrome-activity) и определите действия приложения, чтобы помочь пользователям возобновить важные задачи.
- Ознакомьтесь [с примерами адаптивной карты](https://adaptivecards.io/samples/) для идей, чтобы сделать вашу деятельность поп . 
- Опробуйте API в [песочнице Graph](https://developer.microsoft.com/graph/graph-explorer).

**Ищете больше идей?**

- Узнайте, [как в microsoft experiences используют действия.](https://channel9.msdn.com/events/Build/2017/B8108)
- Узнайте об [API-канале активности и выберите, где я отключил.](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011)
