---
title: Использование REST API веб-канала активности
description: 'Вы можете использовать API веб-канала активности в Microsoft Graph, чтобы возобновить действия пользователя на различных устройствах и платформах. Запросы API веб-канала активности выполняются от имени пользователя с делегированными разрешениями и разрешением действий пользователя, которые можно использовать с личными или рабочими и учебными учетными записями. '
localization_priority: Normal
ms.prod: project-rome
author: ailae
doc_type: conceptualPageType
ms.openlocfilehash: 2bf4e679fa6220bdc6e9fd381d908ea409af5ca0
ms.sourcegitcommit: 9f88b7e41a4a4a4d5f52bd995ce07c6f702bd5d6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2020
ms.locfileid: "49522064"
---
# <a name="use-the-activity-feed-rest-api"></a>Использование REST API веб-канала активности

Пространство имен: microsoft.graph

Вы можете использовать API веб-канала активности в Microsoft Graph, чтобы возобновить действия пользователя на различных устройствах и платформах. Запросы API веб-канала активности выполняются от имени пользователя с [делегированными разрешениями](/graph/permissions-reference#delegated-permissions-application-permissions-and-effective-permissions) и [разрешением действий пользователя](/graph/permissions-reference), которые можно использовать с личными или рабочими и учебными учетными записями.

Действия пользователей представлены ресурсом [активности](/graph/api/resources/projectrome-activity) и организованы в канал на основе времени, представленный мной и действиями коллекции.
<!-- Add missing content.
Each activity represents a unique...
-->
## <a name="what-makes-a-great-user-activity"></a>Что делает очень широкие действия пользователя?

Действия пользователей не просто запускают приложения — они являются глубокими ссылками на конкретные материалы в вашем приложении. Созданные вами действия пользователя можно использовать не только в вашем приложении, но и в Кортане и на временной шкале Windows — что позволяет пользователям быстрее использовать приложение на нескольких устройствах.

### <a name="what-should-become-an-activity"></a>Что должно стать действием?

Так как каждое приложение различается, каждый разработчик приложений может ознакомиться с наилучшим способом сопоставления действий в приложении с действиями пользователя. Например, в играх могут создаваться действия для каждой кампании, приложения для создания документов могут создавать действия для каждого уникального документа, а бизнес-приложения могут создавать действия для каждого рабочего процесса.

При определении действий в приложении следуйте приведенным ниже рекомендациям.

**Выполните указанные ниже действия.** Запишите одно действие для группы связанных действий пользователя.
Если приложение используется для последовательности связанных контента, то, возможно, имеет смысл записать одно действие для всего сеанса задействования.

*Сценарии воспроизведения:* Это особенно важно для списков воспроизведения музыки и ТЕЛЕВИЗИОНных передач, что позволяет выполнить одно действие пользователя, чтобы показать ход выполнения. В этом случае у вас будет одно действие пользователя с несколькими [элементами журнала](/graph/api/resources/projectrome-historyitem) , представляющими периоды задействований в течение нескольких дней или недель.

**Выполните указанные ниже действия.** Хранение пользовательских данных в облаке.
Если требуется поддержка действий между устройствами, необходимо убедиться, что содержимое, необходимое для повторного использования этого действия, хранится в облачном расположении. Например, если вы публикуете действие каждый раз, когда пользователь редактирует документ, он должен храниться в облаке, а не локально на устройстве пользователя, чтобы обеспечить возможность повторного задействования устройств.

**не следует:** Создайте действия пользователя для действий, которые пользователи не нуждаются в возобновлении в будущем.
Если приложение используется для выполнения простых, одноразовых операций, которые не сохраняют состояние для отслеживания в будущем, вам, скорее всего, не нужно писать действия пользователя.

Чтобы быть ясным, несмотря на то, что действия пользователей отображаются на временной шкале Windows, это средство не является средством управления версиями — при выборе действия на основе документа всегда должна отображаться последняя версия этого документа (включая изменения, внесенные другим пользователем).

**не следует:** Создайте действия пользователя для действий, выполненных *другими пользователями*.
Если кто-либо отправляет сообщение пользователю или @mentions пользователя в вашем приложении, не записываете новое действие. Эти взаимодействия лучше обслуживать с помощью уведомлений отображение.

*Сценарии совместной работы:* Если несколько пользователей работают над одним действием (например, документом Word), возможны случаи, когда другой пользователь внес изменения в документ после его последнего изменения. В этом случае разработчикам приложений может потребоваться обновить визуальные элементы в действии, чтобы отразить изменения, внесенные в документ. Для этого приложение может обновить существующее действие, не создавая новый элемент журнала.

>**Примечание:** Если вы публикуете действия для веб-приложения, важно включить как a, так `activationURL` и a `fallbackURL` для каждого действия. Эти действия запустят пользователя в приложении, как ожидалось в Microsoft, например на временной шкале Windows.

## <a name="app-interaction-patterns-and-user-activities"></a>Шаблоны взаимодействия с приложениями и действия пользователей
Создаваемые пользователем действия будут зависеть от шаблона взаимодействия приложения. Несмотря на то, что каждое приложение отличается, большинство из них попадают в один из следующих шаблонов взаимодействия:

* **Приложения на основе документов** — создание одного действия на документ с одной или несколькими записями журнала, отражающими периоды использования. Важно обновить карточку активности по мере внесения изменений в документ.
* **Приложения для воспроизведения мультимедиа** — создайте одно действие для каждого логического группирования контента, например списка воспроизведения, программы или отдельного контента.
* **Игры** — создание одного действия для каждой сохраненной игры или мира. Если ваша игра поддерживает только одну последовательность уровней, вы можете записать одно и то же действие с течением времени, несмотря на то, что вы можете обновить карточку, чтобы показать последние сведения о ходе выполнения или достижениях.
* **Служебные приложения** — если в вашем приложении нет приложений, которые будут возобновлены пользователями, не следует публиковать действия. Хорошим примером является простое приложение с одним назначением, например калькулятор.
* **Бизнес-приложения** — существует множество приложений для управления простыми задачами или рабочими процессами. Создайте одно действие для каждого отдельного рабочего процесса, доступ к которому осуществляется через ваше приложение. Например, каждый отчет по расходам будет отдельным действием, так как может потребоваться щелкнуть эту операцию, чтобы проверить, утверждена ли она.

*Некоторые сложные приложения включают несколько шаблонов взаимодействия. Вы можете использовать различные шаблоны создания действий пользователя для разных сценариев, обрабатываемых вашим приложением.*

<!-- Add content or remove H2.
## Common use cases
-->

## <a name="next-steps"></a>Дальнейшие действия

- Просмотрите [ресурс действия](/graph/api/resources/projectrome-activity) и определите действия приложения, чтобы помочь пользователям возобновить важные задачи.
- В этом разделе приведены примеры использования [адаптивных карточек](https://adaptivecards.io/samples/) для создания новых **действий.**
- Опробуйте API в [песочнице Explorer](https://developer.microsoft.com/graph/graph-explorer).

**Ищете дополнительные идеи?**

- Узнайте [, как Microsoft Office использует действия](https://channel9.msdn.com/events/Build/2017/B8108).
- Сведения об [API веб-канала активности и возможностях, когда я остановились](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).
