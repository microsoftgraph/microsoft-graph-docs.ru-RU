---
title: Использование REST API веб-канала активности
description: 'Вы можете использовать API веб-канала активности в Microsoft Graph, чтобы возобновить действия пользователя на различных устройствах и платформах. Запросы API веб-канала активности выполняются от имени пользователя с делегированными разрешениями и разрешением действий пользователя, которые можно использовать с личными или рабочими и учебными учетными записями. '
localization_priority: Normal
ms.prod: project-rome
doc_type: conceptualPageType
author: ''
ms.openlocfilehash: 3fc73232345f663abb3d2e91e618145374c8990b
ms.sourcegitcommit: 272996d2772b51105ec25f1cf7482ecda3b74ebe
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2020
ms.locfileid: "42508445"
---
# <a name="use-the-activity-feed-rest-api"></a><span data-ttu-id="e022f-104">Использование REST API веб-канала активности</span><span class="sxs-lookup"><span data-stu-id="e022f-104">Use the activity feed REST API</span></span>

<span data-ttu-id="e022f-105">Пространство имен: microsoft.graph</span><span class="sxs-lookup"><span data-stu-id="e022f-105">Namespace: microsoft.graph</span></span>

[!INCLUDE [beta-disclaimer](../../includes/beta-disclaimer.md)]


<span data-ttu-id="e022f-106">Вы можете использовать API веб-канала активности в Microsoft Graph, чтобы возобновить действия пользователя на различных устройствах и платформах.</span><span class="sxs-lookup"><span data-stu-id="e022f-106">You can use the activity feed API in Microsoft Graph to resume a user's activity across devices and platforms.</span></span> <span data-ttu-id="e022f-107">Запросы API веб-канала активности выполняются от имени пользователя с [делегированными разрешениями](/graph/permissions-reference#delegated-permissions-application-permissions-and-effective-permissions) и [разрешением действий пользователя](/graph/permissions-reference), которые можно использовать с личными или рабочими и учебными учетными записями.</span><span class="sxs-lookup"><span data-stu-id="e022f-107">Activity feed API requests are performed on behalf of a user via [delegated permissions](/graph/permissions-reference#delegated-permissions-application-permissions-and-effective-permissions) and the [user activity permission](/graph/permissions-reference), which can be used with either personal or work and school accounts.</span></span> 

<span data-ttu-id="e022f-108">Действия пользователей представлены ресурсом [активности](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_activity) и организованы в канал на основе времени, представленный мной и действиями коллекции.</span><span class="sxs-lookup"><span data-stu-id="e022f-108">User activities are represented by the [activity](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_activity) resource and are organized in a time-based feed represented by the collection me/activities.</span></span> 
<!-- Add missing content.
Each activity represents a unique... 
-->
## <a name="what-makes-a-great-user-activity"></a><span data-ttu-id="e022f-109">Что делает очень широкие действия пользователя?</span><span class="sxs-lookup"><span data-stu-id="e022f-109">What makes a great user activity?</span></span>

<span data-ttu-id="e022f-110">Действия пользователей не просто запускают приложения — они являются глубокими ссылками на конкретные материалы в вашем приложении.</span><span class="sxs-lookup"><span data-stu-id="e022f-110">User activities don’t just launch apps — they are deep links into specific content within your app.</span></span> <span data-ttu-id="e022f-111">Созданные вами действия пользователя можно использовать не только в вашем приложении, но и в Кортане и на временной шкале Windows — что позволяет пользователям быстрее использовать приложение на нескольких устройствах.</span><span class="sxs-lookup"><span data-stu-id="e022f-111">The user activities you create can not only be used in your own app, but will also appear in Cortana and Windows Timeline — driving more app reengagement and making it easier for your users to continue using your app across multiple devices.</span></span>  

### <a name="what-should-become-an-activity"></a><span data-ttu-id="e022f-112">Что должно стать действием?</span><span class="sxs-lookup"><span data-stu-id="e022f-112">What should become an activity?</span></span> 

<span data-ttu-id="e022f-113">Так как каждое приложение различается, каждый разработчик приложений может ознакомиться с наилучшим способом сопоставления действий в приложении с действиями пользователя.</span><span class="sxs-lookup"><span data-stu-id="e022f-113">Because every app is different, it's up to each app developer to understand the best way to map actions within your application to user activities.</span></span> <span data-ttu-id="e022f-114">Например, в играх могут создаваться действия для каждой кампании, приложения для создания документов могут создавать действия для каждого уникального документа, а бизнес-приложения могут создавать действия для каждого рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="e022f-114">For example, games might create an activity for each campaign, document authoring apps might create an activity for each unique document, and line-of-business apps might create an activity for each workflow.</span></span> 

<span data-ttu-id="e022f-115">При определении активититес в приложении следуйте приведенным ниже рекомендациям.</span><span class="sxs-lookup"><span data-stu-id="e022f-115">Apply the following guidlines as you define activitites in your app:</span></span>

<span data-ttu-id="e022f-116">**Выполните указанные ниже действия.** Запишите одно действие для группы связанных действий пользователя.</span><span class="sxs-lookup"><span data-stu-id="e022f-116">**DO:** Record a single activity for a group of related user actions.</span></span> <span data-ttu-id="e022f-117">Если приложение используется для последовательности связанных контента, то, возможно, имеет смысл записать одно действие для всего сеанса задействования.</span><span class="sxs-lookup"><span data-stu-id="e022f-117">If your application is used for a sequence of related content, it probably makes sense to record a single activity for the entire engagement session.</span></span>  

<span data-ttu-id="e022f-118">*Сценарии воспроизведения:* Это особенно важно для списков воспроизведения музыки и ТЕЛЕВИЗИОНных передач, что позволяет выполнить одно действие пользователя, чтобы показать ход выполнения.</span><span class="sxs-lookup"><span data-stu-id="e022f-118">*Playlist scenarios:* This is especially relevant for music playlists or TV shows — a single user activity can be updated to show your progress.</span></span> <span data-ttu-id="e022f-119">В этом случае у вас будет одно действие пользователя с несколькими [элементами журнала](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_historyitem) , представляющими периоды задействований в течение нескольких дней или недель.</span><span class="sxs-lookup"><span data-stu-id="e022f-119">In this case, you will have a single user activity with multiple [history items](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_historyitem) representing periods of engagement across multiple days or weeks.</span></span>  

<span data-ttu-id="e022f-120">**Выполните указанные ниже действия.** Хранение пользовательских данных в облаке.</span><span class="sxs-lookup"><span data-stu-id="e022f-120">**DO:** Store user data to the cloud.</span></span> <span data-ttu-id="e022f-121">Если требуется поддержка действий между устройствами, необходимо убедиться, что содержимое, необходимое для повторного использования этого действия, хранится в облачном расположении.</span><span class="sxs-lookup"><span data-stu-id="e022f-121">If you want to support cross-device activities, you need to make sure the content required to reengage this activity is stored to a cloud location.</span></span> <span data-ttu-id="e022f-122">Например, если вы публикуете действие каждый раз, когда пользователь редактирует документ, он должен храниться в облаке, а не локально на устройстве пользователя, чтобы обеспечить возможность повторного задействования устройств.</span><span class="sxs-lookup"><span data-stu-id="e022f-122">For example, if you publish an activity each time a user edits a document, the document should be stored in the cloud as opposed to locally on the user's device in order to enable cross-device reengagement.</span></span>  

<span data-ttu-id="e022f-123">**не следует:** Создайте действия пользователя для действий, которые пользователи не нуждаются в возобновлении в будущем.</span><span class="sxs-lookup"><span data-stu-id="e022f-123">**DO NOT:** Create a user activity for actions that users do not need to resume in the future.</span></span> <span data-ttu-id="e022f-124">Если приложение используется для выполнения простых, одноразовых операций, которые не сохраняют состояние для отслеживания в будущем, вам, скорее всего, не нужно писать действия пользователя.</span><span class="sxs-lookup"><span data-stu-id="e022f-124">If your application is used to complete simple, one-time operations that do not persist status for you to track in the future, you probably do not need to write a user activity.</span></span> 

<span data-ttu-id="e022f-125">Чтобы быть ясным, несмотря на то, что действия пользователей отображаются на временной шкале Windows, это средство не является средством управления версиями — при выборе действия на основе документа всегда должна отображаться последняя версия этого документа (включая изменения, внесенные другим пользователем).</span><span class="sxs-lookup"><span data-stu-id="e022f-125">To be clear, even though user activities appear in Windows Timeline, this is not designed as a versioning tool — choosing a document-based activity should always show the latest version of that document (including changes that were made by another user.)</span></span>

<span data-ttu-id="e022f-126">**не следует:** Создайте действия пользователя для действий, выполненных *другими пользователями*.</span><span class="sxs-lookup"><span data-stu-id="e022f-126">**DO NOT:** Create a user activity for actions completed by *other users*.</span></span> <span data-ttu-id="e022f-127">Если кто-либо отправляет сообщение пользователю или @mentions пользователя в вашем приложении, не записываете новое действие.</span><span class="sxs-lookup"><span data-stu-id="e022f-127">If someone sends the user a message, or @mentions the user within your app, you should not write a new activity.</span></span> <span data-ttu-id="e022f-128">Эти взаимодействия лучше обслуживать с помощью уведомлений отображение.</span><span class="sxs-lookup"><span data-stu-id="e022f-128">These interactions are better served by surfacing notifications.</span></span>  

<span data-ttu-id="e022f-129">*Сценарии совместной работы:* Если несколько пользователей работают над одним действием (например, документом Word), возможны случаи, когда другой пользователь внес изменения в документ после его последнего изменения.</span><span class="sxs-lookup"><span data-stu-id="e022f-129">*Collaboration scenarios:* If multiple people are working on the same activity (such as a Word document), there will be cases when another user has made changes to the document after you last edited it.</span></span> <span data-ttu-id="e022f-130">В этом случае разработчикам приложений может потребоваться обновить визуальные элементы в действии, чтобы отразить изменения, внесенные в документ.</span><span class="sxs-lookup"><span data-stu-id="e022f-130">In this case, app developers might want to update the visual elements in the activity to reflect changes made to the document.</span></span> <span data-ttu-id="e022f-131">Для этого приложение может обновить существующее действие, не создавая новый элемент журнала.</span><span class="sxs-lookup"><span data-stu-id="e022f-131">To do this, the app might update the existing activity without creating a new history item.</span></span> 

><span data-ttu-id="e022f-132">**Примечание:** Если вы публикуете действия для веб-приложения, важно включить как a, так `activationURL` и a `fallbackURL` для каждого действия.</span><span class="sxs-lookup"><span data-stu-id="e022f-132">**Note:** If you're publishing activities for a web application, it's important to include both an `activationURL` and a `fallbackURL` for each of your activities.</span></span> <span data-ttu-id="e022f-133">Эти действия запустят пользователя в приложении, как ожидалось в Microsoft, например на временной шкале Windows.</span><span class="sxs-lookup"><span data-stu-id="e022f-133">The activities will launch the user back into your app as expected from Microsoft experiences like Windows Timeline.</span></span> 

## <a name="app-interaction-patterns-and-user-activities"></a><span data-ttu-id="e022f-134">Шаблоны взаимодействия с приложениями и действия пользователей</span><span class="sxs-lookup"><span data-stu-id="e022f-134">App interaction patterns and user activities</span></span> 
<span data-ttu-id="e022f-135">Создаваемые пользователем действия будут зависеть от шаблона взаимодействия приложения.</span><span class="sxs-lookup"><span data-stu-id="e022f-135">The user activities that you create will vary based on the interaction pattern of your app.</span></span> <span data-ttu-id="e022f-136">Несмотря на то, что каждое приложение отличается, большинство из них попадают в один из следующих шаблонов взаимодействия:</span><span class="sxs-lookup"><span data-stu-id="e022f-136">While every app is different, most will fall into one of the following interaction patterns:</span></span> 

* <span data-ttu-id="e022f-137">**Приложения на основе документов** — создание одного действия на документ с одной или несколькими записями журнала, отражающими периоды использования.</span><span class="sxs-lookup"><span data-stu-id="e022f-137">**Document-based apps** — Create one activity per document with one or more history records reflecting periods of use.</span></span> <span data-ttu-id="e022f-138">Важно обновить карточку активности по мере внесения изменений в документ.</span><span class="sxs-lookup"><span data-stu-id="e022f-138">It is important to update your activity card as changes are made to the document.</span></span> 
* <span data-ttu-id="e022f-139">**Приложения для воспроизведения мультимедиа** — создайте одно действие для каждого логического группирования контента, например списка воспроизведения, программы или отдельного контента.</span><span class="sxs-lookup"><span data-stu-id="e022f-139">**Media playback apps** — Create one activity per logical grouping of content such as a playlist, program, or standalone content.</span></span> 
* <span data-ttu-id="e022f-140">**Игры** — создание одного действия для каждой сохраненной игры или мира.</span><span class="sxs-lookup"><span data-stu-id="e022f-140">**Games** — Create one activity for each saved game or world.</span></span> <span data-ttu-id="e022f-141">Если ваша игра поддерживает только одну последовательность уровней, вы можете записать одно и то же действие с течением времени, несмотря на то, что вы можете обновить карточку, чтобы показать последние сведения о ходе выполнения или достижениях.</span><span class="sxs-lookup"><span data-stu-id="e022f-141">If your game supports only a single sequence of levels, you can write the same activity over time, although you might want to update your card to show your latest progress or achievements.</span></span> 
* <span data-ttu-id="e022f-142">**Служебные приложения** — если в вашем приложении нет приложений, которые будут возобновлены пользователями, не следует публиковать действия.</span><span class="sxs-lookup"><span data-stu-id="e022f-142">**Utility apps** — If there is nothing within your app that users would want to resume, you should not publish activities.</span></span> <span data-ttu-id="e022f-143">Хорошим примером является простое приложение с одним назначением, например калькулятор.</span><span class="sxs-lookup"><span data-stu-id="e022f-143">A good example is a simple single-purpose app like calculator.</span></span> 
* <span data-ttu-id="e022f-144">**Бизнес-приложения** — существует множество приложений для управления простыми задачами или рабочими процессами.</span><span class="sxs-lookup"><span data-stu-id="e022f-144">**Line-of-business apps** — Many apps exist for managing simple tasks or workflows.</span></span> <span data-ttu-id="e022f-145">Создайте одно действие для каждого отдельного рабочего процесса, доступ к которому осуществляется через ваше приложение.</span><span class="sxs-lookup"><span data-stu-id="e022f-145">Create one activity for each separate workflow accessed through your app.</span></span> <span data-ttu-id="e022f-146">Например, каждый отчет по расходам будет отдельным действием, так как может потребоваться щелкнуть эту операцию, чтобы проверить, утверждена ли она.</span><span class="sxs-lookup"><span data-stu-id="e022f-146">For example, each expense report would be a separate activity, because you might want to click that activity to see if it was approved.</span></span>

<span data-ttu-id="e022f-147">*Некоторые сложные приложения включают несколько шаблонов взаимодействия. Вы можете использовать различные шаблоны создания действий пользователя для разных сценариев, обрабатываемых вашим приложением.*</span><span class="sxs-lookup"><span data-stu-id="e022f-147">*Some complex apps include multiple interaction patterns. You might want to follow different user activity creation patterns for different scenarios handled by your app.*</span></span>

<!-- Add content or remove H2.
## Common use cases 
-->

## <a name="next-steps"></a><span data-ttu-id="e022f-148">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="e022f-148">Next steps</span></span>

- <span data-ttu-id="e022f-149">Просмотрите [ресурс действия](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_activity) и определите действия приложения, чтобы помочь пользователям возобновить важные задачи.</span><span class="sxs-lookup"><span data-stu-id="e022f-149">See the [activity resource](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_activity) and define your app's activities to help users resume important tasks.</span></span>
- <span data-ttu-id="e022f-150">В этом разделе приведены примеры использования [адаптивных карточек](https://adaptivecards.io/samples/) для создания новых **действий.**</span><span class="sxs-lookup"><span data-stu-id="e022f-150">Explore the [adaptive card samples](https://adaptivecards.io/samples/) samples for ideas to make your activities **pop**.</span></span>  
- <span data-ttu-id="e022f-151">Опробуйте API в [песочнице Graph](https://developer.microsoft.com/graph/graph-explorer).</span><span class="sxs-lookup"><span data-stu-id="e022f-151">Try the API in the [Graph Explorer](https://developer.microsoft.com/graph/graph-explorer).</span></span>

<span data-ttu-id="e022f-152">**Ищете дополнительные идеи?**</span><span class="sxs-lookup"><span data-stu-id="e022f-152">**Looking for more ideas?**</span></span> 

- <span data-ttu-id="e022f-153">Узнайте [, как Microsoft Office использует действия](https://channel9.msdn.com/events/Build/2017/B8108).</span><span class="sxs-lookup"><span data-stu-id="e022f-153">See [how Microsoft experiences are using activities](https://channel9.msdn.com/events/Build/2017/B8108).</span></span>
- <span data-ttu-id="e022f-154">Сведения об [API веб-канала активности и возможностях, когда я остановились](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).</span><span class="sxs-lookup"><span data-stu-id="e022f-154">Learn about [the activity feed API and pick up where I left off](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).</span></span>
