---
title: Использование API Поиска (Майкрософт) для запросов данных
description: С помощью API поиска приложения могут искать данные Microsoft 365 в контексте пользователя, прошедшего проверку подлинности.
localization_priority: Priority
author: nmoreau
ms.prod: search
doc_type: resourcePageType
ms.openlocfilehash: 6b937c93e431501da3ad578135577d942c5d4b37
ms.sourcegitcommit: 8b23038be1141d7f22eb61de6aafdb16d4f9c826
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/13/2021
ms.locfileid: "53401354"
---
# <a name="use-the-microsoft-search-api-to-query-data"></a><span data-ttu-id="f9e1d-103">Использование API Поиска (Майкрософт) для запросов данных</span><span class="sxs-lookup"><span data-stu-id="f9e1d-103">Use the Microsoft Search API to query data</span></span>

[!INCLUDE [beta-disclaimer](../../includes/beta-disclaimer.md)]

<span data-ttu-id="f9e1d-104">Вы можете использовать API Поиска (Майкрософт) для запроса данных Microsoft 365 в своих приложениях.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-104">You can use the Microsoft Search API to query Microsoft 365 data in your apps.</span></span>

<span data-ttu-id="f9e1d-105">Поисковые запросы выполняются в контексте вошедшего пользователя, указанного [маркером доступа с делегированными разрешениями](/graph/auth-v2-user).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-105">Search requests run in the context of the signed-in user, identified using an [access token with delegated permissions](/graph/auth-v2-user).</span></span>

[!INCLUDE [search-api-deprecation](../../includes/search-api-deprecation.md)]

## <a name="common-use-cases"></a><span data-ttu-id="f9e1d-106">Основные варианты использования</span><span class="sxs-lookup"><span data-stu-id="f9e1d-106">Common use cases</span></span>

<span data-ttu-id="f9e1d-107">API Microsoft Search предоставляет метод [query](../api/search-query.md) для поиска по данным в Microsoft Search; в этот метод передается [searchRequest](searchRequest.md) в теле запроса, определяя характер поиска.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-107">The Microsoft Search API provides a [query](../api/search-query.md) method to search across your data in Microsoft Search, where you pass a [searchRequest](searchRequest.md) in the request body, defining the specifics of your search.</span></span>

<span data-ttu-id="f9e1d-108">В этом разделе перечислены распространенные варианты использования метода **query** с применением свойств и параметров, заданных в тексте запроса **query** [searchRequest](searchRequest.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-108">This section lists the common use cases of the **query** method, based on the properties and parameters you set in the **query** [searchRequest](searchRequest.md) body.</span></span>

<span data-ttu-id="f9e1d-109">Поисковые запросы выполняются от имени пользователя.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-109">Search requests run on behalf of the user.</span></span> <span data-ttu-id="f9e1d-110">Результаты поиска ограничиваются для применения правил контроля доступа к элементам.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-110">Search results are scoped to enforce any access control applied to the items.</span></span>  <span data-ttu-id="f9e1d-111">Например, в контексте файлов разрешения для них оцениваются в составе поискового запроса.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-111">For example, in the context of files, permissions on the files are evaluated as part of the search request.</span></span> <span data-ttu-id="f9e1d-112">Пользователь не может обратиться в результатах поиска к большему количеству элементов, чем он мог бы получить из соответствующей операции GET с теми же разрешениями и управлением доступом.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-112">Users cannot access more items in a search than they can otherwise obtain from a corresponding GET operation with the same permissions and access control.</span></span>

| <span data-ttu-id="f9e1d-113">Варианты использования</span><span class="sxs-lookup"><span data-stu-id="f9e1d-113">Use cases</span></span> | <span data-ttu-id="f9e1d-114">Свойства, определяемые в тексте запроса query</span><span class="sxs-lookup"><span data-stu-id="f9e1d-114">Properties to define in the query request body</span></span> |
|:------------------|:---------|
|[<span data-ttu-id="f9e1d-115">Результаты поиска в области по типам объектов</span><span class="sxs-lookup"><span data-stu-id="f9e1d-115">Scope search results based on entity types</span></span>](#scope-search-based-on-entity-types)| <span data-ttu-id="f9e1d-116">**entityTypes**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-116">**entityTypes**</span></span> |
|[<span data-ttu-id="f9e1d-117">Результаты со страницы</span><span class="sxs-lookup"><span data-stu-id="f9e1d-117">Page results</span></span>](#page-search-results) | <span data-ttu-id="f9e1d-118">**from** и **size**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-118">**from** and **size**</span></span> |
|[<span data-ttu-id="f9e1d-119">Получение наиболее релевантных электронных писем</span><span class="sxs-lookup"><span data-stu-id="f9e1d-119">Get the most relevant emails</span></span>](#get-the-most-relevant-emails) | <span data-ttu-id="f9e1d-120">**enableTopResults**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-120">**enableTopResults**</span></span> |
|[<span data-ttu-id="f9e1d-121">Получение выбранных свойств</span><span class="sxs-lookup"><span data-stu-id="f9e1d-121">Get selected properties</span></span>](#get-selected-properties) | <span data-ttu-id="f9e1d-122">**fields**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-122">**fields**</span></span> |
|[<span data-ttu-id="f9e1d-123">Использование KQL в терминах запросов</span><span class="sxs-lookup"><span data-stu-id="f9e1d-123">Use KQL in query terms</span></span>](#keyword-query-language-kql-support) | <span data-ttu-id="f9e1d-124">**query**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-124">**query**</span></span> |
|[<span data-ttu-id="f9e1d-125">Сортировка результатов поиска</span><span class="sxs-lookup"><span data-stu-id="f9e1d-125">Sort search results</span></span>](#sort-search-results)| <span data-ttu-id="f9e1d-126">**sort**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-126">**sort**</span></span> |
|[<span data-ttu-id="f9e1d-127">Уточнение результатов с помощью агрегатов</span><span class="sxs-lookup"><span data-stu-id="f9e1d-127">Refine results using aggregations</span></span>](#refine-results-using-aggregations)| <span data-ttu-id="f9e1d-128">**aggregations**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-128">**aggregations**</span></span> |
|[<span data-ttu-id="f9e1d-129">Поиск пользовательских типов, импортированных с помощью соединителей</span><span class="sxs-lookup"><span data-stu-id="f9e1d-129">Search custom types imported using connectors</span></span>](/graph/search-concept-custom-types)| <span data-ttu-id="f9e1d-130">**contentSources**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-130">**contentSources**</span></span> |
|[<span data-ttu-id="f9e1d-131">Исправление орфографии в запросе</span><span class="sxs-lookup"><span data-stu-id="f9e1d-131">Request spelling correction</span></span>](#request-spelling-correction)| <span data-ttu-id="f9e1d-132">**queryAlterationOptions**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-132">**queryAlterationOptions**</span></span> |
|<span data-ttu-id="f9e1d-133">[Макет отображения при поиске](#search-display-layout) (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="f9e1d-133">[Search display layout](#search-display-layout) (preview)</span></span>| <span data-ttu-id="f9e1d-134">**resultTemplateOptions**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-134">**resultTemplateOptions**</span></span>

## <a name="scope-search-based-on-entity-types"></a><span data-ttu-id="f9e1d-135">Поиск в области по типам объектов</span><span class="sxs-lookup"><span data-stu-id="f9e1d-135">Scope search based on entity types</span></span>

<span data-ttu-id="f9e1d-136">Область действия поискового запроса определяется с помощью свойства **entityTypes** полезных данных запроса **query**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-136">Define the scope of the search request using the **entityTypes** property in the **query** request payload.</span></span>
<span data-ttu-id="f9e1d-137">В следующей таблице описаны доступные типы запросов и поддерживаемые разрешения на доступ к данным.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-137">The following table describes the types available to query and the supported permissions to access the data.</span></span>

| <span data-ttu-id="f9e1d-138">EntityType</span><span class="sxs-lookup"><span data-stu-id="f9e1d-138">EntityType</span></span> | <span data-ttu-id="f9e1d-139">Область разрешений, необходимая для доступа к элементам</span><span class="sxs-lookup"><span data-stu-id="f9e1d-139">Permission scope required to access the items</span></span>| <span data-ttu-id="f9e1d-140">Источник</span><span class="sxs-lookup"><span data-stu-id="f9e1d-140">Source</span></span>| <span data-ttu-id="f9e1d-141">Примечание</span><span class="sxs-lookup"><span data-stu-id="f9e1d-141">Comment</span></span>|
|:------------------|:---------|:---------|:---------|
|[<span data-ttu-id="f9e1d-142">message</span><span class="sxs-lookup"><span data-stu-id="f9e1d-142">message</span></span>](message.md)|<span data-ttu-id="f9e1d-143">Mail.Read, Mail.ReadWrite</span><span class="sxs-lookup"><span data-stu-id="f9e1d-143">Mail.Read, Mail.ReadWrite</span></span>| <span data-ttu-id="f9e1d-144">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="f9e1d-144">Exchange Online</span></span>| <span data-ttu-id="f9e1d-145">Сообщения электронной почты.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-145">Email messages.</span></span>|
|[<span data-ttu-id="f9e1d-146">event</span><span class="sxs-lookup"><span data-stu-id="f9e1d-146">event</span></span>](event.md) |<span data-ttu-id="f9e1d-147">Calendars.Read, Calendars.ReadWrite</span><span class="sxs-lookup"><span data-stu-id="f9e1d-147">Calendars.Read, Calendars.ReadWrite</span></span>| <span data-ttu-id="f9e1d-148">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="f9e1d-148">Exchange Online</span></span>|<span data-ttu-id="f9e1d-149">События календаря.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-149">Calendar events.</span></span> |
|[<span data-ttu-id="f9e1d-150">drive</span><span class="sxs-lookup"><span data-stu-id="f9e1d-150">drive</span></span>](drive.md)|<span data-ttu-id="f9e1d-151">Files.Read.All, Files.ReadWrite.All, Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="f9e1d-151">Files.Read.All, Files.ReadWrite.All, Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="f9e1d-152">SharePoint</span><span class="sxs-lookup"><span data-stu-id="f9e1d-152">SharePoint</span></span> | <span data-ttu-id="f9e1d-153">Библиотеки документов.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-153">Document libraries.</span></span>|
|[<span data-ttu-id="f9e1d-154">driveItem</span><span class="sxs-lookup"><span data-stu-id="f9e1d-154">driveItem</span></span>](driveitem.md)|<span data-ttu-id="f9e1d-155">Files.Read.All, Files.ReadWrite.All, Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="f9e1d-155">Files.Read.All, Files.ReadWrite.All, Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="f9e1d-156">SharePoint и OneDrive</span><span class="sxs-lookup"><span data-stu-id="f9e1d-156">SharePoint and OneDrive</span></span> | <span data-ttu-id="f9e1d-157">Файлы, папки, страницы и новости.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-157">Files, folders, pages, and news.</span></span> |
|[<span data-ttu-id="f9e1d-158">list</span><span class="sxs-lookup"><span data-stu-id="f9e1d-158">list</span></span>](list.md)|<span data-ttu-id="f9e1d-159">Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="f9e1d-159">Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="f9e1d-160">SharePoint и OneDrive</span><span class="sxs-lookup"><span data-stu-id="f9e1d-160">SharePoint and OneDrive</span></span> | <span data-ttu-id="f9e1d-161">Списки</span><span class="sxs-lookup"><span data-stu-id="f9e1d-161">Lists.</span></span> <span data-ttu-id="f9e1d-162">Учтите, что библиотеки документов также возвращаются как списки.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-162">Note that document libraries are also returned as lists.</span></span> |
|[<span data-ttu-id="f9e1d-163">listItem</span><span class="sxs-lookup"><span data-stu-id="f9e1d-163">listItem</span></span>](listitem.md)|<span data-ttu-id="f9e1d-164">Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="f9e1d-164">Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="f9e1d-165">SharePoint и OneDrive</span><span class="sxs-lookup"><span data-stu-id="f9e1d-165">SharePoint and OneDrive</span></span> | <span data-ttu-id="f9e1d-166">Элементы списка.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-166">List items.</span></span> <span data-ttu-id="f9e1d-167">Учтите, что файлы и папки также возвращаются как элементы списка; **listItem** — это суперкласс **driveItem**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-167">Note that files and folders are also returned as list items; **listItem** is the super class of **driveItem**.</span></span> |
|[<span data-ttu-id="f9e1d-168">site</span><span class="sxs-lookup"><span data-stu-id="f9e1d-168">site</span></span>](site.md)|<span data-ttu-id="f9e1d-169">Sites.Read.All, Sites.ReadWrite.All</span><span class="sxs-lookup"><span data-stu-id="f9e1d-169">Sites.Read.All, Sites.ReadWrite.All</span></span>| <span data-ttu-id="f9e1d-170">SharePoint</span><span class="sxs-lookup"><span data-stu-id="f9e1d-170">SharePoint</span></span> | <span data-ttu-id="f9e1d-171">Сайты в SharePoint.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-171">Sites in SharePoint.</span></span>|
|[<span data-ttu-id="f9e1d-172">externalItem</span><span class="sxs-lookup"><span data-stu-id="f9e1d-172">externalItem</span></span>](externalitem.md)|<span data-ttu-id="f9e1d-173">ExternalItem.Read.All</span><span class="sxs-lookup"><span data-stu-id="f9e1d-173">ExternalItem.Read.All</span></span>| <span data-ttu-id="f9e1d-174">Соединители Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="f9e1d-174">Microsoft Graph connectors</span></span>| <span data-ttu-id="f9e1d-175">Все содержимое, размещаемое с помощью API соединителей Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-175">All content ingested with the Microsoft Graph connectors API.</span></span>|
|[<span data-ttu-id="f9e1d-176">person</span><span class="sxs-lookup"><span data-stu-id="f9e1d-176">person</span></span>](person.md)|<span data-ttu-id="f9e1d-177">People.Read</span><span class="sxs-lookup"><span data-stu-id="f9e1d-177">People.Read</span></span>|<span data-ttu-id="f9e1d-178">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="f9e1d-178">Exchange Online</span></span>|<span data-ttu-id="f9e1d-179">Личные контакты и контакты или адресуемые объекты в организации.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-179">Personal contacts and contacts or addressable objects in your organization.</span></span>|

## <a name="page-search-results"></a><span data-ttu-id="f9e1d-180">Результаты поиска на странице</span><span class="sxs-lookup"><span data-stu-id="f9e1d-180">Page search results</span></span>

<span data-ttu-id="f9e1d-181">Управляйте разбивкой результатов поиска на страницы, указав описанные ниже два свойства в тексте запроса **query**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-181">Control pagination of the search results by specifying the following two properties in the **query** request body:</span></span>

- <span data-ttu-id="f9e1d-182">**from** — целое значение, указывающее начальную точку (начиная с 0) для перечисления результатов поиска на странице.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-182">**from** - An integer that indicates the 0-based starting point to list search results on the page.</span></span> <span data-ttu-id="f9e1d-183">Значение по умолчанию равно 0.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-183">The default value is 0.</span></span>

- <span data-ttu-id="f9e1d-184">**size** — целое число, обозначающее количество результатов, возвращаемых для страницы.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-184">**size** - An integer that indicates the number of results to be returned for a page.</span></span> <span data-ttu-id="f9e1d-185">Значение по умолчанию: 25.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-185">The default value is 25.</span></span>

<span data-ttu-id="f9e1d-186">При поиске объекта **event** или **message** учитывайте указанные ниже ограничения.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-186">Note the following limits if you're searching the **event** or **message** entity:</span></span>

- <span data-ttu-id="f9e1d-187">Значение **from** должно начинаться с нуля для запроса первой страницы. В противном случае запрос возвращает ошибку HTTP 400 `Bad request`.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-187">**from** must start at zero in the first page request; otherwise, the request results in an HTTP 400 `Bad request`.</span></span>
- <span data-ttu-id="f9e1d-188">Максимальное количество результатов на странице (**size**) составляет 25 для **message** и **event**..</span><span class="sxs-lookup"><span data-stu-id="f9e1d-188">The maximum results per page (**size**) is 25 for **message** and **event**.</span></span> 

<span data-ttu-id="f9e1d-189">Для SharePoint и OneDrive ограничений нет.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-189">There is no upper limit for SharePoint or OneDrive items.</span></span> <span data-ttu-id="f9e1d-190">Рекомендуемый размер страницы — 200.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-190">A reasonable page size is 200.</span></span> <span data-ttu-id="f9e1d-191">Чем больше размер страницы, тем, как правило, больше задержка.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-191">A larger page size generally incurs higher latency.</span></span>

<span data-ttu-id="f9e1d-192">Рекомендации:</span><span class="sxs-lookup"><span data-stu-id="f9e1d-192">Best practices:</span></span>

- <span data-ttu-id="f9e1d-193">В исходном запросе задайте меньший размер первой страницы.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-193">Specify a smaller first page in the initial request.</span></span> <span data-ttu-id="f9e1d-194">Например, задайте для свойства **from** значение 0, а для свойства **size** — 25.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-194">For example, specify **from** as 0, **size** as 25.</span></span>
- <span data-ttu-id="f9e1d-195">Для получения последующих страниц обновите свойства **from** и **size**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-195">Paginate subsequent pages by updating the **from** and **size** properties.</span></span> <span data-ttu-id="f9e1d-196">Вы можете увеличивать размер страницы в каждом последующем запросе.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-196">You can increase the page size in each subsequent request.</span></span> <span data-ttu-id="f9e1d-197">В приведенной ниже таблице показан пример.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-197">The following table shows an example.</span></span>

    | <span data-ttu-id="f9e1d-198">Страница</span><span class="sxs-lookup"><span data-stu-id="f9e1d-198">Page</span></span> | <span data-ttu-id="f9e1d-199">from</span><span class="sxs-lookup"><span data-stu-id="f9e1d-199">from</span></span> | <span data-ttu-id="f9e1d-200">size</span><span class="sxs-lookup"><span data-stu-id="f9e1d-200">size</span></span> |
    |:-----|:-----|:-----|
    | <span data-ttu-id="f9e1d-201">1</span><span class="sxs-lookup"><span data-stu-id="f9e1d-201">1</span></span>    | <span data-ttu-id="f9e1d-202">0</span><span class="sxs-lookup"><span data-stu-id="f9e1d-202">0</span></span> | <span data-ttu-id="f9e1d-203">25</span><span class="sxs-lookup"><span data-stu-id="f9e1d-203">25</span></span> |
    | <span data-ttu-id="f9e1d-204">2</span><span class="sxs-lookup"><span data-stu-id="f9e1d-204">2</span></span>    | <span data-ttu-id="f9e1d-205">25</span><span class="sxs-lookup"><span data-stu-id="f9e1d-205">25</span></span> | <span data-ttu-id="f9e1d-206">50</span><span class="sxs-lookup"><span data-stu-id="f9e1d-206">50</span></span> |
    | <span data-ttu-id="f9e1d-207">3</span><span class="sxs-lookup"><span data-stu-id="f9e1d-207">3</span></span>    | <span data-ttu-id="f9e1d-208">75</span><span class="sxs-lookup"><span data-stu-id="f9e1d-208">75</span></span> | <span data-ttu-id="f9e1d-209">75</span><span class="sxs-lookup"><span data-stu-id="f9e1d-209">75</span></span> |
    | <span data-ttu-id="f9e1d-210">4</span><span class="sxs-lookup"><span data-stu-id="f9e1d-210">4</span></span>    | <span data-ttu-id="f9e1d-211">150</span><span class="sxs-lookup"><span data-stu-id="f9e1d-211">150</span></span> | <span data-ttu-id="f9e1d-212">100</span><span class="sxs-lookup"><span data-stu-id="f9e1d-212">100</span></span> |

## <a name="get-the-most-relevant-emails"></a><span data-ttu-id="f9e1d-213">Получение наиболее релевантных электронных писем</span><span class="sxs-lookup"><span data-stu-id="f9e1d-213">Get the most relevant emails</span></span>

<span data-ttu-id="f9e1d-214">Если при поиске объекта **message** задать для свойства **enableTopResults** значение `true`, возвращается гибридный список сообщений: первые три сообщения в отклике сортируются по релевантности, а остальные — по дате/времени.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-214">When searching the **message** entity, specifying **enableTopResults** as `true` returns a hybrid list of messages: the first three messages in the response are sorted by relevance; the remaining messages are sorted by date/time.</span></span>

## <a name="get-selected-properties"></a><span data-ttu-id="f9e1d-215">Получение выбранных свойств</span><span class="sxs-lookup"><span data-stu-id="f9e1d-215">Get selected properties</span></span>

<span data-ttu-id="f9e1d-216">При поиске по типу сущности, например **message**, **event**, **drive**, **driveItem**, **list**, **listItem**, **site**, **externalItem** или **person**, можно включить в свойство **fields** определенные свойства сущности, которые следует возвратить в результатах поиска.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-216">When searching an entity type, such as **message**, **event**, **drive**, **driveItem**, **list**, **listItem**, **site**, **externalItem**, or **person**, you can include in the **fields** property specific entity properties to return in the search results.</span></span> <span data-ttu-id="f9e1d-217">Аналогично используется [параметр $select системного запроса OData](/graph/query-parameters#select-parameter) в запросах REST.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-217">This is similar to using the [OData system query option, $select](/graph/query-parameters#select-parameter) in REST requests.</span></span> <span data-ttu-id="f9e1d-218">API поиска не поддерживает эти параметры запроса, так как их действие подавляется в теле запроса POST.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-218">The search API does not technically support these query options because the behavior is expressed in the POST body.</span></span>

<span data-ttu-id="f9e1d-219">Для всех этих типов сущностей указание свойства **fields** сокращает количество свойств, возвращаемых в отклике, что оптимизирует нагрузку на линию.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-219">For all these entity types, specifying the **fields** property reduces the number of properties returned in the response, optimizing the payload over the wire.</span></span>

<span data-ttu-id="f9e1d-220">**listItem** и **externalItem** — единственные поддерживаемые сущности, которые позволяют настройку расширенных извлекаемых полей в схеме.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-220">The **listItem** and **externalItem** entities are the only supported entities that allow getting extended retrievable fields configured in the schema.</span></span> <span data-ttu-id="f9e1d-221">Из всех других сущностей расширенные свойства невозможно извлечь путем применения API поиска.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-221">You cannot retrieve extended properties from all the other entities by using the search API.</span></span> <span data-ttu-id="f9e1d-222">Например, если вы создали извлекаемое поле для **externalItem** в схеме поиска или у вас есть извлекаемый пользовательский столбец в **listItem**, вы можете извлечь эти свойства из результатов поиска.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-222">For example, if you created a retrievable field for **externalItem** in the search schema, or if you have a retrievable custom column on a **listItem**, you can retrieve these properties from search.</span></span> <span data-ttu-id="f9e1d-223">Чтобы извлечь расширенное свойство файла, укажите в запросе тип **listItem**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-223">To retrieve an extended property on a file, specify the **listItem** type in the request.</span></span>

<span data-ttu-id="f9e1d-224">Если **поля**, указанные в запросе, отсутствуют в схеме или не помечены как извлекаемые, они не будут возвращены в отклике.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-224">If the **fields** specified in the request are either not present in the schema, or not marked as retrievable, they will not be returned in the response.</span></span> <span data-ttu-id="f9e1d-225">Недопустимые поля в запросе игнорируются без уведомления.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-225">Invalid fields in the request are silently ignored.</span></span>

<span data-ttu-id="f9e1d-226">Если в запросе отсутствуют поля, указанные в свойстве **fields**, вы получите набор свойств для всех типов по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-226">If you do not specify any **fields** in the request,  you will get the default set of properties for all types.</span></span> <span data-ttu-id="f9e1d-227">При использовании расширенных свойств **listItem** и **externalItem** ведут себя иначе, если поля, указанные в свойстве **fields**, не переданы в запрос.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-227">For extended properties, **listItem** and **externalItem** behave differently when no **fields** are passed in the request:</span></span>

- <span data-ttu-id="f9e1d-228">**listItem** не возвращает никаких настраиваемых полей.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-228">**listItem** will not return any custom field.</span></span>
- <span data-ttu-id="f9e1d-229">**externalItem** возвращает все поля с атрибутом **retrievable** в схеме соединителя Microsoft Graph для этого конкретного подключения.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-229">**externalItem** will return all the fields marked with the **retrievable** attribute in the Microsoft Graph connector schema for that particular connection.</span></span>

## <a name="keyword-query-language-kql-support"></a><span data-ttu-id="f9e1d-230">Поддержка языка KQL</span><span class="sxs-lookup"><span data-stu-id="f9e1d-230">Keyword Query Language (KQL) support</span></span>

<span data-ttu-id="f9e1d-231">Вы можете указать произвольный текст ключевых слов (например, `AND` и `OR`) и ограничения свойств в синтаксисе KQL в фактической строке поискового запроса (свойства **query** в тексте запроса **query**).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-231">Specify free text keywords, operators (such as `AND`, `OR`), and property restrictions in KQL syntax in the actual search query string (**query** property of the **query** request body).</span></span> <span data-ttu-id="f9e1d-232">Синтаксис и команда зависят от типов объектов (в свойстве **entityTypes**), указанных в тексте того же запроса **query**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-232">The syntax and command depend on the entity types (in the **entityTypes** property) you target in the same **query** request body.</span></span>

<span data-ttu-id="f9e1d-233">Свойства, доступные для поиска, зависят от типа объекта.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-233">Depending on the entity type, the searchable properties vary.</span></span> <span data-ttu-id="f9e1d-234">Дополнительные сведения см. в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="f9e1d-234">For details, see:</span></span>

- [<span data-ttu-id="f9e1d-235">Свойства электронной почты</span><span class="sxs-lookup"><span data-stu-id="f9e1d-235">Email properties</span></span>](/microsoft-365/compliance/keyword-queries-and-search-conditions#searchable-email-properties)
- [<span data-ttu-id="f9e1d-236">Свойства сайта</span><span class="sxs-lookup"><span data-stu-id="f9e1d-236">Site properties</span></span>](/microsoft-365/compliance/keyword-queries-and-search-conditions#searchable-site-properties)

## <a name="sort-search-results"></a><span data-ttu-id="f9e1d-237">Сортировка результатов поиска</span><span class="sxs-lookup"><span data-stu-id="f9e1d-237">Sort search results</span></span>

<span data-ttu-id="f9e1d-238">Результаты поиска в отклике отсортированы в следующем стандартном порядке:</span><span class="sxs-lookup"><span data-stu-id="f9e1d-238">Search results in the response are sorted in the following default sort order:</span></span>

- <span data-ttu-id="f9e1d-239">**message** и **event** сортируются по дате.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-239">**message** and **event** are sorted by date.</span></span>
- <span data-ttu-id="f9e1d-240">Все типы SharePoint, OneDrive, пользователей и соединителей сортируются по релевантности.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-240">All SharePoint, OneDrive, person and connector types are sorted by relevance.</span></span>

<span data-ttu-id="f9e1d-241">Метод [query](../api/search-query.md) позволяет задать порядок поиска, указав **sortProperties** в параметре `requests`, который представляет собой набор объектов [searchRequest](./searchrequest.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-241">The [query](../api/search-query.md) method lets you customize the search order by specifying the **sortProperties** on the `requests` parameter, which is a collection of [searchRequest](./searchrequest.md) objects.</span></span> <span data-ttu-id="f9e1d-242">Это дает возможность указать список из одного или нескольких сортируемых средств и порядок сортировки.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-242">This allows you to specify a list of one or more sortable properties and the sort order.</span></span>

<span data-ttu-id="f9e1d-243">Учтите, что сортировка результатов в настоящее время поддерживается только для следующих типов SharePoint и OneDrive: [driveItem](driveitem.md), [listItem](listitem.md), [list](list.md), [site](site.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-243">Note that sorting results is currently only supported on the following SharePoint and OneDrive types: [driveItem](driveitem.md), [listItem](listitem.md), [list](list.md), [site](site.md).</span></span>

<span data-ttu-id="f9e1d-244">Свойства, к которым применяется предложение sort, должны быть сортируемыми в [схеме поиска](/sharepoint/manage-search-schema) SharePoint.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-244">The properties on which the sort clause are applied need to be sortable in the SharePoint [search schema](/sharepoint/manage-search-schema).</span></span> <span data-ttu-id="f9e1d-245">Если свойство, указанное в запросе, не является сортируемым или не существует, в отклике будет возвращена ошибка `HTTP 400 Bad Request`.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-245">If the property specified in the request is not sortable or does not exist, the response will return an error, `HTTP 400 Bad Request`.</span></span> <span data-ttu-id="f9e1d-246">Обратите внимание, что нельзя задать сортировку документов по релевантности с использованием [sortProperty](sortproperty.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-246">Note that you cannot specify to sort documents by relevance using [sortProperty](sortproperty.md).</span></span>

<span data-ttu-id="f9e1d-247">При указании параметра **name** объекта [sortProperty](sortproperty.md) можно использовать имя свойства из типа Microsoft Graph (например, в [driveItem](driveitem.md)) или имя управляемого свойств в индексе поиска.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-247">When specifying the **name** of a [sortProperty](sortproperty.md) object, you can either use the property name from the Microsoft Graph type (for example, in [driveItem](driveitem.md)), or the name of the managed property in the search index.</span></span>

<span data-ttu-id="f9e1d-248">Примеры сортировки результатов см. в разделе [Сортировка результатов поиска](/graph/search-concept-sort).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-248">See [sort search results](/graph/search-concept-sort) for examples that show how to sort results.</span></span>

## <a name="refine-results-using-aggregations"></a><span data-ttu-id="f9e1d-249">Уточнение результатов с помощью агрегатов</span><span class="sxs-lookup"><span data-stu-id="f9e1d-249">Refine results using aggregations</span></span>

<span data-ttu-id="f9e1d-250">Агрегаты (также называемые уточнениями в SharePoint) — это очень популярное средство, которое позволяет расширить возможности поиска.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-250">Aggregations (also known as refiners in SharePoint) are a very popular way to enhance a search experience.</span></span> <span data-ttu-id="f9e1d-251">В дополнение к результатам они предоставляют некоторые обобщенные сведения о наборе данных, из которого получены результатов поиска.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-251">In addition to the results, they provide some level of aggregate information on the matching set of search results.</span></span> <span data-ttu-id="f9e1d-252">Например, можно представить сведения о наиболее заметных авторах документов, которые удовлетворяют запросу, или о самых распространенных типах файлов и т. д.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-252">For example, you can provide information on the most represented authors of the documents matching the query, or the most represented file types, etc.</span></span>

<span data-ttu-id="f9e1d-253">В [searchRequest](./searchrequest.md) укажите агрегаты, которые надо получить в дополнение к результатам поиска.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-253">In the [searchRequest](./searchrequest.md), specify the aggregations that should be returned in addition to the search results.</span></span> <span data-ttu-id="f9e1d-254">Описание каждого агрегата приведено в [aggregationOption](./aggregationoption.md), где указывается свойство, на основе которого будет рассчитываться агрегат, и количество объектов [searchBucket](searchBucket.md), возвращаемое в отклике.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-254">The description of each aggregation is defined in the [aggregationOption](./aggregationoption.md), which specifies the property on which the aggregation should be computed, and the number of [searchBucket](searchBucket.md) to be returned in the response.</span></span>

<span data-ttu-id="f9e1d-255">Свойства, по которым запрашивается агрегат, должны быть уточняемыми в [схеме поиска](/sharepoint/manage-search-schema) SharePoint.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-255">The properties on which the aggregation is requested need to be refinable in the SharePoint [search schema](/sharepoint/manage-search-schema).</span></span> <span data-ttu-id="f9e1d-256">Если указанное свойство не является уточняемым или не существует, отклик возвращает`HTTP 400 Bad Request`.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-256">If the property specified is not refinable or does not exist, the response returns `HTTP 400 Bad Request`.</span></span>

<span data-ttu-id="f9e1d-257">Когда будет получен отклик, содержащий набор объектов [searchBucket](searchBucket.md), можно уточнить поисковый запрос, ограничив его только совпадающими элементами из одного объекта [searchBucket](searchBucket.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-257">Once the response is returned containing the collection of [searchBucket](searchBucket.md) objects, it is possible to refine the search request to only the matching elements contained in one [searchBucket](searchBucket.md).</span></span> <span data-ttu-id="f9e1d-258">Это достигается путем передачи значения **aggregationsFilterToken** в свойстве **aggregationFilters** последующего [searchRequest](./searchrequest.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-258">This is achieved by passing back the  **aggregationsFilterToken** value in the **aggregationFilters** property of the subsequent [searchRequest](./searchrequest.md).</span></span>

<span data-ttu-id="f9e1d-259">В настоящий момент агрегаты поддерживаются для любого свойства с возможностью уточнения в следующих типах SharePoint и OneDrive: [driveItem](driveitem.md), [listItem](listitem.md), [list](list.md), [site](site.md) и в соединителях Microsoft Graph [externalItem](externalItem.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-259">Aggregations are currently supported for any refinable property on the following SharePoint and OneDrive types: [driveItem](driveitem.md), [listItem](listitem.md), [list](list.md), [site](site.md), and on Microsoft Graph connectors [externalItem](externalItem.md).</span></span>

<span data-ttu-id="f9e1d-260">Примеры использования агрегатов для улучшения и снижения объема результатов поиска см. в разделе [Уточнение результатов поиска](/graph/search-concept-aggregation).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-260">See [refine search results](/graph/search-concept-aggregation) for examples that show using aggregation to enhance and narrow down search results.</span></span>

## <a name="request-spelling-correction"></a><span data-ttu-id="f9e1d-261">Исправление орфографии в запросе</span><span class="sxs-lookup"><span data-stu-id="f9e1d-261">Request spelling correction</span></span>

<span data-ttu-id="f9e1d-262">Исправление орфографии — популярный способ обработки несоответствий между опечатками в запросе пользователя и правильными словами в содержимом.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-262">Spelling correction is a popular way to handle mismatches between typos in a user query and the correct words in matched contents.</span></span> <span data-ttu-id="f9e1d-263">При обнаружении опечаток в исходном пользовательском запросе вы можете получить результат поиска для исходного запроса пользователя или исправленной версии запроса.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-263">When typos are detected in the original user query, you can get the search result either for the original user query or the corrected alternate query.</span></span> <span data-ttu-id="f9e1d-264">Вы также можете получить сведения об исправлении опечаток в свойстве **queryAlterationResponse** объекта [searchresponse](searchresponse.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-264">You can also get the spelling correction information for typos in the **queryAlterationResponse** property of the [searchresponse](searchresponse.md).</span></span> 

<span data-ttu-id="f9e1d-265">В теле метода [запроса](/graph/api/search-query?view=graph-rest-beta&preserve-view=true) укажите **queryAlterationOptions** для применения с целью исправления орфографии в запросе.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-265">In the request body of the [query](/graph/api/search-query?view=graph-rest-beta&preserve-view=true) method, specify the **queryAlterationOptions** that should be applied to the query for spelling corrections.</span></span> <span data-ttu-id="f9e1d-266">Описание **queryAlterationOptions** определяется в [searchAlterationOptions](./searchalterationoptions.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-266">The description of **queryAlterationOptions** is defined in the [searchAlterationOptions](./searchalterationoptions.md).</span></span>

<span data-ttu-id="f9e1d-267">Примеры использования исправлений орфографии см. в разделе [Исправление орфографии в запросе](/graph/search-concept-speller).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-267">For examples that show how to use spelling corrections, see [Request spelling correction](/graph/search-concept-speller).</span></span>

## <a name="search-display-layout"></a><span data-ttu-id="f9e1d-268">Макет отображения при поиске</span><span class="sxs-lookup"><span data-stu-id="f9e1d-268">Search display layout</span></span>

<span data-ttu-id="f9e1d-269">API поиска позволяет отображать результаты поиска из [соединителей](/microsoftsearch/connectors-overview) при помощи макета отображения или шаблона результатов, настроенного ИТ-администратором для каждого соединителя.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-269">The search API allows you to render search results from [connectors](/microsoftsearch/connectors-overview), by using the display layout or result template configured by the IT admin for each connector.</span></span> <span data-ttu-id="f9e1d-270">Шаблоны результатов — это [адаптивные карточки](https://adaptivecards.io/), которые являются семантически значимым сочетанием макета и данных.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-270">The result templates are [Adaptive Cards](https://adaptivecards.io/), which are a semantically meaningful combination of layout and data.</span></span>

<span data-ttu-id="f9e1d-271">Чтобы получить шаблон результатов в [searchresponse](searchresponse.md), необходимо установить свойство **true** для **enableResultTemplate**, которое определяется в [resultTemplateOptions](./resulttemplateoption.md) и в [searchRequest](./searchrequest.md).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-271">To get the result template in the [searchresponse](searchresponse.md), you have to set **true** the **enableResultTemplate** property, defined in the [resultTemplateOptions](./resulttemplateoption.md), in the [searchRequest](./searchrequest.md).</span></span> <span data-ttu-id="f9e1d-272">Ответ включает **resultTemplateId** для каждого [ввода при поиске](./searchhit.md), который сопоставляется с одним из макетов отображения, включенных в словарь **resultTemplates**, который включается в ответ.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-272">The response includes a **resultTemplateId** for every [search hit](./searchhit.md), which maps to one of the display layouts included in the **resultTemplates** dictionary that is included in the response.</span></span>

<span data-ttu-id="f9e1d-273">См. примеры в статье [Использование макета отображения при поиске](/graph/search-concept-display-layout).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-273">See [Use search display layout](/graph/search-concept-display-layout) for examples.</span></span> 

## <a name="error-handling"></a><span data-ttu-id="f9e1d-274">Обработка ошибок</span><span class="sxs-lookup"><span data-stu-id="f9e1d-274">Error handling</span></span>

<span data-ttu-id="f9e1d-275">API поиска возвращает отклики с ошибками, описанные в [определении объектов ошибок OData](http://docs.oasis-open.org/odata/odata-json-format/v4.01/cs01/odata-json-format-v4.01-cs01.html#sec_ErrorResponse), каждый из которых представляет собой объект JSON, содержащий код и сообщение.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-275">The search API returns error responses as defined by [OData error object definition](http://docs.oasis-open.org/odata/odata-json-format/v4.01/cs01/odata-json-format-v4.01-cs01.html#sec_ErrorResponse), each of which is a JSON object containing a code and a message.</span></span>

<!---TODOSEARCHAPI Describe the know errors: bad requests.--->

## <a name="known-limitations"></a><span data-ttu-id="f9e1d-276">Известные ограничения</span><span class="sxs-lookup"><span data-stu-id="f9e1d-276">Known limitations</span></span>

<span data-ttu-id="f9e1d-277">На API поиска распространяются описанные ниже ограничения.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-277">The search API has the following limitations:</span></span>

- <span data-ttu-id="f9e1d-278">Метод **query** определяется, чтобы разрешить передачу коллекции из одного или нескольких экземпляров **searchRequest**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-278">The **query** method is defined to allow passing a collection of one or more **searchRequest** instances at once.</span></span> <span data-ttu-id="f9e1d-279">Однако в настоящее время служба может обрабатывать только по одному экземпляру [searchRequest](./searchrequest.md) за раз.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-279">However, the service currently supports only a single [searchRequest](./searchrequest.md) at a time.</span></span>

- <span data-ttu-id="f9e1d-280">Ресурс [searchRequest](./searchrequest.md) поддерживает одновременную передачу объектов нескольких типов.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-280">The [searchRequest](./searchrequest.md) resource supports passing multiple types of entities at a time.</span></span> <span data-ttu-id="f9e1d-281">Однако в настоящее время поддерживается только следующее сочетание для типов объектов SharePoint и OneDrive: **driveItem**, **drive**, **site**, **list**, **listItem**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-281">However, currently the only supported combination is for SharePoint and OneDrive entityTypes: **driveItem**, **drive**, **site**, **list**, **listItem**.</span></span>
<span data-ttu-id="f9e1d-282">Любые сочетания, включающие **message**, **event**, **person**, типы SharePoint и OneDrive или **externalItem**, пока не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-282">Any combinations involving **message**, **event**, **person**, SharePoint and OneDrive types, or **externalItem** are currently not supported.</span></span>  

- <span data-ttu-id="f9e1d-283">Свойство **contentSource**, определяющее используемое соединение, применимо только при присвоении свойству **entityType** значения `externalItem`.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-283">The **contentSource** property, which defines the connection to use, is only applicable when **entityType** is specified as `externalItem`.</span></span>

- <span data-ttu-id="f9e1d-284">API поиска не поддерживает настраиваемую сортировку для **message**, **event**, **person** или **externalItem**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-284">The search API does not support custom sort for **message**, **event**, **person**, or **externalItem**.</span></span>

- <span data-ttu-id="f9e1d-285">API поиска не поддерживает агрегаты для **message**, **event**, **site**, **person** или **drive**.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-285">The search API does not support aggregations for **message**, **event**, **site**, **person**, or **drive**.</span></span>

- <span data-ttu-id="f9e1d-286">Пользовательские настройки поиска SharePoint, например пользовательская схема поиска или источники поиска, могут влиять на работу API Поиска (Майкрософт).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-286">Customizations in SharePoint search, such as a custom search schema or result sources, can interfere with the operation of the Microsoft Search API.</span></span>

## <a name="schema-change-deprecation-warning"></a><span data-ttu-id="f9e1d-287">Предупреждение об устаревании изменений схемы</span><span class="sxs-lookup"><span data-stu-id="f9e1d-287">Schema change deprecation warning</span></span>

<span data-ttu-id="f9e1d-288">**В бета-версии** свойства, используемые в поисковом запросе и отклике, были переименованы или удалены.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-288">**In the beta version**, properties used in a search request and response have been renamed or removed.</span></span> <span data-ttu-id="f9e1d-289">В большинстве случаев первоначальные свойства устаревают и заменяются текущими свойствами, как указано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-289">In most cases, the original properties are being deprecated and replaced by the current properties, as listed in the following table.</span></span>

<span data-ttu-id="f9e1d-290">Обновите существующие приложения так, чтобы в них использовались текущие имена свойств и типов, а отклик содержал имена текущих свойств.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-290">Start updating any existing apps to use current property and type names, and to get current property names in the response.</span></span>
<span data-ttu-id="f9e1d-291">Для обеспечения обратной совместимости первоначальные свойства и типы доступны и могут использоваться до **31 декабря 2020 г.**, после этого они будут удалены.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-291">For backward compatibility, the original properties and types are accessible and functional until **December 31, 2020**, after which they will be removed.</span></span>

| <span data-ttu-id="f9e1d-292">Ресурс</span><span class="sxs-lookup"><span data-stu-id="f9e1d-292">Resource</span></span>                           | <span data-ttu-id="f9e1d-293">Тип изменения</span><span class="sxs-lookup"><span data-stu-id="f9e1d-293">Change type</span></span>   | <span data-ttu-id="f9e1d-294">Первоначальное свойство</span><span class="sxs-lookup"><span data-stu-id="f9e1d-294">Original property</span></span> | <span data-ttu-id="f9e1d-295">Текущее свойство</span><span class="sxs-lookup"><span data-stu-id="f9e1d-295">Current property</span></span>|
|:-----------------------------------|:--------------|:------------------|:----------------|
| [<span data-ttu-id="f9e1d-296">searchRequest</span><span class="sxs-lookup"><span data-stu-id="f9e1d-296">searchRequest</span></span>](./searchrequest.md)| <span data-ttu-id="f9e1d-297">Переименованное свойство</span><span class="sxs-lookup"><span data-stu-id="f9e1d-297">Rename property</span></span> | <span data-ttu-id="f9e1d-298">**stored_fields**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-298">**stored_fields**</span></span> | <span data-ttu-id="f9e1d-299">**fields**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-299">**fields**</span></span>      |
| [<span data-ttu-id="f9e1d-300">searchQuery</span><span class="sxs-lookup"><span data-stu-id="f9e1d-300">searchQuery</span></span>](./searchquery.md)    | <span data-ttu-id="f9e1d-301">Переименованное свойство</span><span class="sxs-lookup"><span data-stu-id="f9e1d-301">Rename property</span></span> | <span data-ttu-id="f9e1d-302">**query_string**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-302">**query_string**</span></span> | <span data-ttu-id="f9e1d-303">**queryString**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-303">**queryString**</span></span> |
| [<span data-ttu-id="f9e1d-304">searchQueryString</span><span class="sxs-lookup"><span data-stu-id="f9e1d-304">searchQueryString</span></span>](./searchquerystring.md) | <span data-ttu-id="f9e1d-305">Устаревший ресурс</span><span class="sxs-lookup"><span data-stu-id="f9e1d-305">Deprecate resource</span></span> | <span data-ttu-id="f9e1d-306">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="f9e1d-306">Not applicable</span></span> | <span data-ttu-id="f9e1d-307">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="f9e1d-307">Not applicable</span></span> |
| [<span data-ttu-id="f9e1d-308">searchHit</span><span class="sxs-lookup"><span data-stu-id="f9e1d-308">searchHit</span></span>](./searchhit.md)        | <span data-ttu-id="f9e1d-309">Переименованное свойство</span><span class="sxs-lookup"><span data-stu-id="f9e1d-309">Rename property</span></span> | <span data-ttu-id="f9e1d-310">**_id**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-310">**_id**</span></span> | <span data-ttu-id="f9e1d-311">**hitId**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-311">**hitId**</span></span> |
| [<span data-ttu-id="f9e1d-312">searchHit</span><span class="sxs-lookup"><span data-stu-id="f9e1d-312">searchHit</span></span>](./searchhit.md)        | <span data-ttu-id="f9e1d-313">Переименованное свойство</span><span class="sxs-lookup"><span data-stu-id="f9e1d-313">Rename property</span></span> | <span data-ttu-id="f9e1d-314">**_score**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-314">**_score**</span></span> | <span data-ttu-id="f9e1d-315">**rank**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-315">**rank**</span></span> |
| [<span data-ttu-id="f9e1d-316">searchHit</span><span class="sxs-lookup"><span data-stu-id="f9e1d-316">searchHit</span></span>](./searchhit.md)        | <span data-ttu-id="f9e1d-317">Удаленное свойство</span><span class="sxs-lookup"><span data-stu-id="f9e1d-317">Remove property</span></span> | <span data-ttu-id="f9e1d-318">**_sortField**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-318">**_sortField**</span></span> | <span data-ttu-id="f9e1d-319">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="f9e1d-319">Not applicable</span></span> |
| [<span data-ttu-id="f9e1d-320">searchHit</span><span class="sxs-lookup"><span data-stu-id="f9e1d-320">searchHit</span></span>](./searchhit.md)        | <span data-ttu-id="f9e1d-321">Переименованное свойство</span><span class="sxs-lookup"><span data-stu-id="f9e1d-321">Rename property</span></span> | <span data-ttu-id="f9e1d-322">**_source**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-322">**_source**</span></span> | <span data-ttu-id="f9e1d-323">**resource**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-323">**resource**</span></span> |
| [<span data-ttu-id="f9e1d-324">searchHit</span><span class="sxs-lookup"><span data-stu-id="f9e1d-324">searchHit</span></span>](./searchhit.md)        | <span data-ttu-id="f9e1d-325">Переименованное свойство</span><span class="sxs-lookup"><span data-stu-id="f9e1d-325">Rename property</span></span> | <span data-ttu-id="f9e1d-326">**_summary**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-326">**_summary**</span></span>  | <span data-ttu-id="f9e1d-327">**summary**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-327">**summary**</span></span>  |
| [<span data-ttu-id="f9e1d-328">entityTypes</span><span class="sxs-lookup"><span data-stu-id="f9e1d-328">entityTypes</span></span>](./enums.md)          | <span data-ttu-id="f9e1d-329">Переименование значения перечисления</span><span class="sxs-lookup"><span data-stu-id="f9e1d-329">Rename enum value</span></span> | <span data-ttu-id="f9e1d-330">**unknownfuturevalue**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-330">**unknownfuturevalue**</span></span>  | <span data-ttu-id="f9e1d-331">**unknownFutureValue**</span><span class="sxs-lookup"><span data-stu-id="f9e1d-331">**unknownFutureValue**</span></span>  |

## <a name="see-also"></a><span data-ttu-id="f9e1d-332">См. также</span><span class="sxs-lookup"><span data-stu-id="f9e1d-332">See also</span></span>

- <span data-ttu-id="f9e1d-333">Подробнее о некоторых основных вариантах использования:</span><span class="sxs-lookup"><span data-stu-id="f9e1d-333">Learn more about a few key use cases:</span></span>
  - [<span data-ttu-id="f9e1d-334">Поиск сообщений Outlook</span><span class="sxs-lookup"><span data-stu-id="f9e1d-334">Search Outlook messages</span></span>](/graph/search-concept-messages)
  - [<span data-ttu-id="f9e1d-335">Поиск событий календаря</span><span class="sxs-lookup"><span data-stu-id="f9e1d-335">Search calendar events</span></span>](/graph/search-concept-events)
  - [<span data-ttu-id="f9e1d-336">Поиск человека</span><span class="sxs-lookup"><span data-stu-id="f9e1d-336">Search person</span></span>](/graph/search-concept-person)  
  - [<span data-ttu-id="f9e1d-337">Поиск содержимого в OneDrive и SharePoint</span><span class="sxs-lookup"><span data-stu-id="f9e1d-337">Search content in Sharepoint and OneDrive</span></span>](/graph/search-concept-files)
  - [<span data-ttu-id="f9e1d-338">Поиск пользовательских типов, импортированных с помощью соединителей</span><span class="sxs-lookup"><span data-stu-id="f9e1d-338">Search custom types imported using connectors</span></span>](/graph/search-concept-custom-types)
  - [<span data-ttu-id="f9e1d-339">Сортировка результатов поиска</span><span class="sxs-lookup"><span data-stu-id="f9e1d-339">Sort search results</span></span>](/graph/search-concept-sort)
  - [<span data-ttu-id="f9e1d-340">Уточнение результатов поиска</span><span class="sxs-lookup"><span data-stu-id="f9e1d-340">Refine search results</span></span>](/graph/search-concept-aggregation)
  - [<span data-ttu-id="f9e1d-341">Исправление орфографии в запросе</span><span class="sxs-lookup"><span data-stu-id="f9e1d-341">Request spelling correction</span></span>](/graph/search-concept-speller)
  - [<span data-ttu-id="f9e1d-342">Использование макета отображения при поиске</span><span class="sxs-lookup"><span data-stu-id="f9e1d-342">Use search display layout</span></span>](/graph/search-concept-display-layout)

- <span data-ttu-id="f9e1d-343">Узнайте больше об API поиска в [песочнице Graph](https://developer.microsoft.com/graph/graph-explorer).</span><span class="sxs-lookup"><span data-stu-id="f9e1d-343">Explore the search APIs in [Graph Explorer](https://developer.microsoft.com/graph/graph-explorer).</span></span>

## <a name="whats-new"></a><span data-ttu-id="f9e1d-344">Новые возможности</span><span class="sxs-lookup"><span data-stu-id="f9e1d-344">What's new</span></span>

<span data-ttu-id="f9e1d-345">Узнайте о [новых функциях и обновлениях](/graph/whats-new-overview) для этого набора API.</span><span class="sxs-lookup"><span data-stu-id="f9e1d-345">Find out about the [latest new features and updates](/graph/whats-new-overview) for this API set.</span></span>
