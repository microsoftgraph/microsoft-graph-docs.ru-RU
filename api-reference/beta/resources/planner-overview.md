---
title: Использование REST API Планировщика
description: API Планировщика в Microsoft Graph можно использовать для создания задач и назначения их пользователям в группе Microsoft 365.
author: TarkanSevilmis
localization_priority: Priority
ms.prod: planner
doc_type: conceptualPageType
ms.openlocfilehash: 8b2001915b5c63817c6826c0a0b175b0bb70ff82
ms.sourcegitcommit: 1d2adc4062c8e83d23768682cf66a731bccd313c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/16/2021
ms.locfileid: "49882775"
---
# <a name="use-the-planner-rest-api"></a><span data-ttu-id="8e617-103">Использование REST API Планировщика</span><span class="sxs-lookup"><span data-stu-id="8e617-103">Use the Planner REST API</span></span>

[!INCLUDE [beta-disclaimer](../../includes/beta-disclaimer.md)]

<span data-ttu-id="8e617-104">API Планировщика в Microsoft Graph можно использовать для создания задач и назначения их пользователям в группе Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="8e617-104">You can use the Planner API in Microsoft Graph to create tasks and assign them to users in a group in Microsoft 365.</span></span>

<span data-ttu-id="8e617-105">Перед началом работы с API Планировщика изучите, как основные объекты связаны друг с другом и группами Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="8e617-105">Before you get started with the Planner API, it will be helpful to understand how the main objects relate to each other as well as to Microsoft 365 groups.</span></span>

## <a name="plan-containers"></a><span data-ttu-id="8e617-106">Контейнеры плана</span><span class="sxs-lookup"><span data-stu-id="8e617-106">Plan containers</span></span>
<span data-ttu-id="8e617-107">В Планировщике планы всегда содержатся в другом ресурсе.</span><span class="sxs-lookup"><span data-stu-id="8e617-107">In Planner, plans are always contained by another resource.</span></span> <span data-ttu-id="8e617-108">Содержащий их ресурс определяет правила авторизации плана и все задачи в нем, а также жизненный цикл плана.</span><span class="sxs-lookup"><span data-stu-id="8e617-108">The containing resource determines the authoization rules of the plan and all the tasks in it, as well as the lifecycle of the plan.</span></span> <span data-ttu-id="8e617-109">Например, для планов, содержащихся в группах Microsoft 365, участники группы смогут создавать, изменять, разрешать и удалять задачи в плане, а также изменять некоторые свойства на уровне плана, такие как имя плана и названия меток.</span><span class="sxs-lookup"><span data-stu-id="8e617-109">For example, for plans contained by Microsoft 365 groups, group members will be able to create, edit, resolve, and delete tasks in the plan, as well as changing some plan-level properties, such as the name of the plan or label names.</span></span> <span data-ttu-id="8e617-110">Кроме того, при удалении группы автоматически удаляются все планы из нее, а если группа восстанавливается, все планы будут автоматически восстановлены.</span><span class="sxs-lookup"><span data-stu-id="8e617-110">Additionally, when the group is deleted, all the plans in the group are automatically deleted, or if a group is restored, all the plans will be automatically restored.</span></span>

<span data-ttu-id="8e617-111">Самый распространенный тип контейнера — группа Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="8e617-111">The most common type of container is a Microsoft 365 group.</span></span>

### <a name="container-type-microsoft-365-groups"></a><span data-ttu-id="8e617-112">Тип контейнера: группы Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="8e617-112">Container type: Microsoft 365 groups</span></span>

<span data-ttu-id="8e617-113">Планы обычно содержатся в группах Microsoft 365 в API Планировщика.</span><span class="sxs-lookup"><span data-stu-id="8e617-113">Plans are commonly contained in Microsoft 365 groups in the Planner API.</span></span>
<span data-ttu-id="8e617-114">Чтобы [получить планы, принадлежащие группе](../api/plannergroup-list-plans.md), выполните HTTP-запрос, описанный ниже.</span><span class="sxs-lookup"><span data-stu-id="8e617-114">To [get the plans owned by a group](../api/plannergroup-list-plans.md), make the following HTTP request.</span></span>

``` http
GET /groups/{group-id}/planner/plans
```

<span data-ttu-id="8e617-115">При [создании плана](../api/planner-post-plans.md) сделайте группу его контейнером. Для этого установите свойство `container` для объекта плана.</span><span class="sxs-lookup"><span data-stu-id="8e617-115">When [creating a new plan](../api/planner-post-plans.md), make a group its container by setting the `container` property on a plan object.</span></span> <span data-ttu-id="8e617-116">Планы должны содержаться в поддерживаемом ресурсе.</span><span class="sxs-lookup"><span data-stu-id="8e617-116">Plans must be contained by a supported resource.</span></span>

><span data-ttu-id="8e617-117">**Примечание.** Пользователь, создающий план, должен быть участником группы, в которой будет содержаться план.</span><span class="sxs-lookup"><span data-stu-id="8e617-117">**Note:** The user who is creating the plan must be a member of the group that will contain the plan.</span></span> <span data-ttu-id="8e617-118">При создании группы с помощью средства [создания группы](../api/group-post-groups.md) вы не становитесь ее участником.</span><span class="sxs-lookup"><span data-stu-id="8e617-118">When you create a new group by using [Create group](../api/group-post-groups.md), you are not added to the group as a member.</span></span> <span data-ttu-id="8e617-119">После создания группы добавьте себя в качестве участника с помощью операции [добавления участников группы](../api/group-post-members.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-119">After the group is created, add yourself as a member by using [group post members](../api/group-post-members.md).</span></span>

## <a name="plans"></a><span data-ttu-id="8e617-120">Планы</span><span class="sxs-lookup"><span data-stu-id="8e617-120">Plans</span></span>

<span data-ttu-id="8e617-121">[Планы](plannerplan.md) представляют собой контейнеры [задач](plannertask.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-121">[Plans](plannerplan.md) are the containers of [tasks](plannertask.md).</span></span>
<span data-ttu-id="8e617-122">Чтобы [создать задачу в плане](../api/planner-post-tasks.md), при ее создании укажите в качестве свойства `planId` объекта задачи идентификатор плана.</span><span class="sxs-lookup"><span data-stu-id="8e617-122">To [create a task in a plan](../api/planner-post-tasks.md), set the `planId` property on the task object to the ID of the plan while creating the task.</span></span>
<span data-ttu-id="8e617-123">В настоящее время невозможно создавать задачи без планов.</span><span class="sxs-lookup"><span data-stu-id="8e617-123">Tasks currently cannot be created without plans.</span></span>
<span data-ttu-id="8e617-124">Чтобы [получить задачи в плане](../api/plannerplan-list-tasks.md), выполните HTTP-запрос, описанный ниже.</span><span class="sxs-lookup"><span data-stu-id="8e617-124">To [retrieve the tasks in a plan](../api/plannerplan-list-tasks.md), make the following HTTP request.</span></span>

``` http
GET /planner/plans/{plan-id}/tasks
```

## <a name="tasks"></a><span data-ttu-id="8e617-125">Задачи</span><span class="sxs-lookup"><span data-stu-id="8e617-125">Tasks</span></span>

<span data-ttu-id="8e617-p106">Задачу можно назначить пользователю, добавив [назначение](plannerassignment.md) в свойстве [assignments](plannerassignments.md) объекта задачи. Идентификатор исполнителя задачи — это имя открытого свойства `assignments`, необходимо также указать свойство `orderHint` назначения.</span><span class="sxs-lookup"><span data-stu-id="8e617-p106">Each task can be assigned to a user by adding an [assignment](plannerassignment.md) in the [assignments](plannerassignments.md) property on the task object. The ID of the user to assign the task is the name of the open property on `assignments`, and the `orderHint` property on the assignment must be specified.</span></span>

## <a name="task-and-plan-details"></a><span data-ttu-id="8e617-128">Данные задач и плана</span><span class="sxs-lookup"><span data-stu-id="8e617-128">Task and plan details</span></span>

<span data-ttu-id="8e617-p107">Ресурсы Планировщика делятся на базовые объекты и объекты сведений. Базовые объекты предоставляют доступ к основным свойствам ресурсов, подходящим для списков, а объекты сведений обеспечивают доступ к большим свойствам ресурсов, которые подходят для развернутых представлений.</span><span class="sxs-lookup"><span data-stu-id="8e617-p107">Planner resources are arranged into basic objects and detail objects. Basic objects provide access to common properties of the resources, suitable for list views, while the detail objects provide access to large properties of the resources suitable for drill down views.</span></span>

## <a name="visualization"></a><span data-ttu-id="8e617-131">Визуализация</span><span class="sxs-lookup"><span data-stu-id="8e617-131">Visualization</span></span>

<span data-ttu-id="8e617-132">Помимо данных задач и плана, API Планировщика предоставляет ресурсы для создания общей визуализации данных по клиентам.</span><span class="sxs-lookup"><span data-stu-id="8e617-132">Aside from task and plan data, the Planner API also provides resources for creating a common visualization of data across clients.</span></span> <span data-ttu-id="8e617-133">Для задач доступны несколько типов визуализации данных, как представлено в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="8e617-133">Several types of visualization data are available for tasks, as listed in the following table.</span></span>

| <span data-ttu-id="8e617-134">Способ представления задач</span><span class="sxs-lookup"><span data-stu-id="8e617-134">Tasks are shown as</span></span>                                                                        | <span data-ttu-id="8e617-135">Источник информации для упорядочивания задач</span><span class="sxs-lookup"><span data-stu-id="8e617-135">Tasks are ordered with information from</span></span>                                         |
| :---------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------ |
| <span data-ttu-id="8e617-136">Простой список (задачи в плане)</span><span class="sxs-lookup"><span data-stu-id="8e617-136">Flat list (tasks in a plan)</span></span>                                                               | <span data-ttu-id="8e617-137">Свойство `orderHint` задач</span><span class="sxs-lookup"><span data-stu-id="8e617-137">`orderHint` property on tasks</span></span>                                                   |
| <span data-ttu-id="8e617-138">Простой список (задачи, назначенные пользователю)</span><span class="sxs-lookup"><span data-stu-id="8e617-138">Flat list (tasks assigned to a user)</span></span>                                                      | <span data-ttu-id="8e617-139">Свойство `assigneePriority` задач</span><span class="sxs-lookup"><span data-stu-id="8e617-139">`assigneePriority` property on tasks</span></span>                                            |
| <span data-ttu-id="8e617-140">Доска со столбцами для исполнителей (доска задач "Кому назначено")</span><span class="sxs-lookup"><span data-stu-id="8e617-140">Board view with columns for assignees (assigned to task board)</span></span>                            | <span data-ttu-id="8e617-141">Объект [assignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md)</span><span class="sxs-lookup"><span data-stu-id="8e617-141">[assignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md) object</span></span> |
| <span data-ttu-id="8e617-142">Доска со столбцами для хода выполнения задачи (доска задач "Ход выполнения")</span><span class="sxs-lookup"><span data-stu-id="8e617-142">Board view with columns for progress of the task towards completion (progress task board)</span></span> | <span data-ttu-id="8e617-143">Объект [progressTaskBoardTaskFormat](plannerprogresstaskboardtaskformat.md)</span><span class="sxs-lookup"><span data-stu-id="8e617-143">[progressTaskBoardTaskFormat](plannerprogresstaskboardtaskformat.md) object</span></span>     |
| <span data-ttu-id="8e617-144">Доска с настраиваемыми столбцами задач (доска задач "Сегменты"):</span><span class="sxs-lookup"><span data-stu-id="8e617-144">Board view with custom columns of tasks (bucket task board):</span></span>                              | <span data-ttu-id="8e617-145">Объект [bucketTaskBoardTaskFormat](plannerbuckettaskboardtaskformat.md)</span><span class="sxs-lookup"><span data-stu-id="8e617-145">[bucketTaskBoardTaskFormat](plannerbuckettaskboardtaskformat.md) object</span></span>         |

<span data-ttu-id="8e617-146">Настраиваемые столбцы на доске задач "Сегменты" представлены объектами [bucket](plannerbucket.md), а их порядок — свойством `orderHint` объекта.</span><span class="sxs-lookup"><span data-stu-id="8e617-146">The custom columns in the bucket task board are represented by [bucket](plannerbucket.md) objects, and their order by `orderHint` property on the object.</span></span>

<span data-ttu-id="8e617-147">Принципы упорядочивания описаны в статье [Использование указаний по упорядочиванию в Планировщике](planner-order-hint-format.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-147">All the ordering is controlled by the principles described in [Planner order hints](planner-order-hint-format.md).</span></span>

## <a name=""></a><span data-ttu-id="8e617-148"><a name="delta">Отслеживание изменений с помощью запроса изменений</a></span><span class="sxs-lookup"><span data-stu-id="8e617-148"><a name="delta">Track changes using delta query</a></span></span>

<span data-ttu-id="8e617-149">Запрос изменений Планировщика поддерживает запрос объектов, на которые подписан пользователь.</span><span class="sxs-lookup"><span data-stu-id="8e617-149">Planner's delta query supports querying objects that the user is subscribed to.</span></span>

<span data-ttu-id="8e617-150">Пользователи подписаны на указанные ниже объекты.</span><span class="sxs-lookup"><span data-stu-id="8e617-150">Users are subscribed to the following objects.</span></span>

| <span data-ttu-id="8e617-151">Тип ресурса Планировщика</span><span class="sxs-lookup"><span data-stu-id="8e617-151">Planner resource type</span></span> | <span data-ttu-id="8e617-152">Экземпляры подписки</span><span class="sxs-lookup"><span data-stu-id="8e617-152">Subscribed instances</span></span>                                                                                                                                                                                    |
| :-------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <span data-ttu-id="8e617-153">Задачи</span><span class="sxs-lookup"><span data-stu-id="8e617-153">Tasks</span></span>                 | <ul><li><span data-ttu-id="8e617-154">Созданные пользователем</span><span class="sxs-lookup"><span data-stu-id="8e617-154">Created by the user</span></span></li><li><span data-ttu-id="8e617-155">Назначенные пользователю</span><span class="sxs-lookup"><span data-stu-id="8e617-155">Assigned to the user</span></span></li><li><span data-ttu-id="8e617-156">Относящиеся к плану, принадлежащему пользователю</span><span class="sxs-lookup"><span data-stu-id="8e617-156">Belong to a plan that the user owns</span></span></li><li><span data-ttu-id="8e617-157">Содержащиеся в плане, предоставленном пользователю для совместного использования посредством коллекции **SharedWith** плана</span><span class="sxs-lookup"><span data-stu-id="8e617-157">Contained in a plan shared with the user through the plan's **SharedWith** collection</span></span></li> |
| <span data-ttu-id="8e617-158">Планы</span><span class="sxs-lookup"><span data-stu-id="8e617-158">Plans</span></span>                 | <ul><li><span data-ttu-id="8e617-159">Предоставленные пользователю для совместного использования посредством коллекции **SharedWith** плана</span><span class="sxs-lookup"><span data-stu-id="8e617-159">Shared with the user through the plan's **SharedWith** collection</span></span></li></ul>                                                                                                                     |
| <span data-ttu-id="8e617-160">Сегменты</span><span class="sxs-lookup"><span data-stu-id="8e617-160">Buckets</span></span>               | <ul><li><span data-ttu-id="8e617-161">Содержащиеся в плане, предоставленном пользователю для совместного использования посредством коллекции **SharedWith** плана</span><span class="sxs-lookup"><span data-stu-id="8e617-161">Contained in a plan shared with the user through the plan's **SharedWith** collection</span></span></li></ul>                                                                                                 |

### <a name=""></a><span data-ttu-id="8e617-162"><a name="objectcache">Заполнение кэша объекта для запросов изменений</a></span><span class="sxs-lookup"><span data-stu-id="8e617-162"><a name="objectcache">Populate the object cache for delta queries</a></span></span>

<span data-ttu-id="8e617-163">Если нужно использовать API запроса изменений Планировщика, сохраните локальный кэш объектов, которые хочет просмотреть пользователь, чтобы применить изменения из канала запроса изменений.</span><span class="sxs-lookup"><span data-stu-id="8e617-163">If you want to use the Planner delta query API, maintain a local cache of objects that the user is interested in observing in order to apply the changes from the delta response feed.</span></span>

<span data-ttu-id="8e617-164">Ниже указаны типы объектов полезных данных изменений, которые могут в настоящее время возвращаться запросом изменений Планировщика.</span><span class="sxs-lookup"><span data-stu-id="8e617-164">The delta payload objects that the Planner delta query can currently return will be of the following types:</span></span>

* <span data-ttu-id="8e617-165">[plannerTask](plannertask.md);</span><span class="sxs-lookup"><span data-stu-id="8e617-165">[plannerTask](plannertask.md)</span></span>
* <span data-ttu-id="8e617-166">[plannerTaskDetails](plannertaskdetails.md);</span><span class="sxs-lookup"><span data-stu-id="8e617-166">[plannerTaskDetails](plannertaskdetails.md)</span></span>
* [<span data-ttu-id="8e617-167">plannerPlan</span><span class="sxs-lookup"><span data-stu-id="8e617-167">plannerPlan</span></span>](plannerplan.md)
* <span data-ttu-id="8e617-168">[plannerPlanDetails](plannerplandetails.md);</span><span class="sxs-lookup"><span data-stu-id="8e617-168">[plannerPlanDetails](plannerplandetails.md)</span></span>
* <span data-ttu-id="8e617-169">[plannerBucket](plannerbucket.md);</span><span class="sxs-lookup"><span data-stu-id="8e617-169">[plannerBucket](plannerbucket.md)</span></span>
* <span data-ttu-id="8e617-170">[plannerAssignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md);</span><span class="sxs-lookup"><span data-stu-id="8e617-170">[plannerAssignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md)</span></span>
* <span data-ttu-id="8e617-171">[plannerBucketTaskBoardTaskFormat](plannerbuckettaskboardtaskformat.md);</span><span class="sxs-lookup"><span data-stu-id="8e617-171">[plannerBucketTaskBoardTaskFormat](plannerbuckettaskboardtaskformat.md)</span></span>
* <span data-ttu-id="8e617-172">[plannerAssignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-172">[plannerAssignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md)</span></span>

<span data-ttu-id="8e617-173">Чтобы получить исходное состояние объектов для заполнения локального кэша, используйте соответствующе методы `GET`.</span><span class="sxs-lookup"><span data-stu-id="8e617-173">Use the corresponding `GET` methods on the resource to obtain the initial state of objects to be populated into the local cache.</span></span>

### <a name="differentiating-between-object-creation-and-object-modification"></a><span data-ttu-id="8e617-174">Различие между созданием и изменением объекта</span><span class="sxs-lookup"><span data-stu-id="8e617-174">Differentiating between object creation and object modification</span></span>

<span data-ttu-id="8e617-175">В некоторых случаях вызывающему объекту может потребоваться отличить создание объекта от изменения объекта в канале запроса изменений Планировщика.</span><span class="sxs-lookup"><span data-stu-id="8e617-175">In certain scenarios, the caller might want to distinguish between object creation and object modification within Planner's delta query feed.</span></span>

<span data-ttu-id="8e617-176">Приведенные ниже инструкции можно использовать для определения создания объекта:</span><span class="sxs-lookup"><span data-stu-id="8e617-176">These guidelines can be used to infer object creation:</span></span>

* <span data-ttu-id="8e617-177">Свойство `createdBy` отображается только для новых объектов.</span><span class="sxs-lookup"><span data-stu-id="8e617-177">The `createdBy` property will only appear on newly created objects.</span></span>
* <span data-ttu-id="8e617-178">За новым объектом `plannerTask` будет следовать соответствующий объект `plannerTaskDetails`.</span><span class="sxs-lookup"><span data-stu-id="8e617-178">A newly created `plannerTask` object will be followed by its corresponding `plannerTaskDetails` object.</span></span>
* <span data-ttu-id="8e617-179">За новым объектом `plannerPlan` будет следовать соответствующий объект `plannerPlanDetails`.</span><span class="sxs-lookup"><span data-stu-id="8e617-179">A newly created `plannerPlan` object will be followed by its corresponding `plannerPlanDetails` object.</span></span>

### <a name="usage"></a><span data-ttu-id="8e617-180">Применение</span><span class="sxs-lookup"><span data-stu-id="8e617-180">Usage</span></span>

<span data-ttu-id="8e617-181">Ожидается, что у вызывающего объекта есть кэш, содержащий объекты подписки.</span><span class="sxs-lookup"><span data-stu-id="8e617-181">The caller is expected to have a cache containing subscribed objects.</span></span> <span data-ttu-id="8e617-182">Сведения о заполнении локального кэша объектов подписки см. в статье [Заполнение кэша объектов для запросов изменений](#populate-the-object-cache-for-delta-queries).</span><span class="sxs-lookup"><span data-stu-id="8e617-182">For details about how to fill the local cache of subscribed objects, see [Populate the object cache for delta queries](#populate-the-object-cache-for-delta-queries).</span></span>

<span data-ttu-id="8e617-183">Поток вызова запроса изменений Планировщика выглядит указанным ниже образом.</span><span class="sxs-lookup"><span data-stu-id="8e617-183">Planner's delta query call flow is as follows:</span></span>

1. <span data-ttu-id="8e617-184">Вызывающий объект запускает запрос синхронизации изменений, получая `nextLink` и пустую коллекцию изменений.</span><span class="sxs-lookup"><span data-stu-id="8e617-184">The caller initiates a delta sync query, obtaining a `nextLink` and an empty collection of changes.</span></span>
2. <span data-ttu-id="8e617-185">Вызывающий объект должен [заполнить кэш объектов для запросов изменений](#populate-the-object-cache-for-delta-queries) объектами, на которые подписан пользователь, обновив их кэш.</span><span class="sxs-lookup"><span data-stu-id="8e617-185">The caller must [populate the object cache for delta queries](#populate-the-object-cache-for-delta-queries) with objects that the user is subscribed to, updating its cache.</span></span>
3. <span data-ttu-id="8e617-186">Вызывающий объект переходит по ссылке `nextLink`, предоставленной в исходном запросе синхронизации изменений, чтобы получить новую ссылку `deltaLink` для любых изменений с предыдущего этапа.</span><span class="sxs-lookup"><span data-stu-id="8e617-186">The caller follows the `nextLink` provided in the initial delta sync query to obtain a new `deltaLink` to any changes since previous step.</span></span>
4. <span data-ttu-id="8e617-187">Вызывающий объект применяет изменения в возвращенном отклике изменений к объектам в кэше.</span><span class="sxs-lookup"><span data-stu-id="8e617-187">The caller applies the changes in the returned delta response to the objects in its cache.</span></span>
5. <span data-ttu-id="8e617-188">Вызывающий объект переходит по новой ссылке deltaLink, чтобы получить следующую ссылку deltaLink и изменения с момента создания текущей ссылки `deltaLink`.</span><span class="sxs-lookup"><span data-stu-id="8e617-188">The caller follows the new deltaLink to obtain the next deltaLink and changes since the current `deltaLink` was generated.</span></span>
6. <span data-ttu-id="8e617-189">Вызывающий объект применяет изменения (при наличии) и ожидает некоторое время, прежде чем перезапустить предыдущий и текущий шаг.</span><span class="sxs-lookup"><span data-stu-id="8e617-189">The caller applies the changes (if any) and waits a short time before rerunning the previous step and this step.</span></span>

## <a name="planner-resource-versioning"></a><span data-ttu-id="8e617-190">Версии ресурсов в Планировщике</span><span class="sxs-lookup"><span data-stu-id="8e617-190">Planner resource versioning</span></span>

<span data-ttu-id="8e617-191">Планировщик управляет версиями ресурсов с помощью тегов **etag**.</span><span class="sxs-lookup"><span data-stu-id="8e617-191">Planner versions all resources using **etags**.</span></span> <span data-ttu-id="8e617-192">Эти теги **eTag** возвращаются со свойством `@odata.etag` для каждого ресурса.</span><span class="sxs-lookup"><span data-stu-id="8e617-192">These **etags** are returned with `@odata.etag` property on each resource.</span></span> <span data-ttu-id="8e617-193">Для запросов `PATCH` и `DELETE` требуется последний тег **etag**, известный клиенту, чтобы указать его в заголовке `If-Match`.</span><span class="sxs-lookup"><span data-stu-id="8e617-193">`PATCH` and `DELETE` requests require the last **etag** known by the client to be specified with a `If-Match` header.</span></span>
<span data-ttu-id="8e617-194">Планировщик позволяет изменять старые версии ресурсов, если планируемое изменение не конфликтует с более новыми изменениями, принятыми службой Планировщика в том же ресурсе.</span><span class="sxs-lookup"><span data-stu-id="8e617-194">Planner allows changes to older versions of resources, if the intended change does not conflict with newer changes accepted by the Planner service on the same resource.</span></span> <span data-ttu-id="8e617-195">Клиенты могут определить, какой тег **etag** ресурса новее, вычислив большее значение тега **etag** при сравнении порядкового номера строки.</span><span class="sxs-lookup"><span data-stu-id="8e617-195">The clients can identify which **etag** for the same resource is newer by calculating which **etag** value is greater in ordinal string comparison.</span></span>
<span data-ttu-id="8e617-196">У каждого ресурса есть уникальный тег **etag**.</span><span class="sxs-lookup"><span data-stu-id="8e617-196">Each resource has a unique **etag**.</span></span> <span data-ttu-id="8e617-197">Невозможно сравнить значения тегов etag для разных ресурсов, в том числе с отношениями вложения.</span><span class="sxs-lookup"><span data-stu-id="8e617-197">Etag values for different resources, including those with containment relationships, cannot be compared.</span></span>
<span data-ttu-id="8e617-198">Клиентские приложения должны обрабатывать [коды ошибок](/graph/errors) **409** и **412**, связанные с версиями, считывая последнюю версию элемента и устраняя конфликтующие изменения.</span><span class="sxs-lookup"><span data-stu-id="8e617-198">The client apps are expected to handle versioning related [error codes](/graph/errors) **409** and **412** by reading the latest version of the item and resolving the conflicting changes.</span></span>

## <a name="common-planner-error-conditions"></a><span data-ttu-id="8e617-199">Основные ошибки Планировщика</span><span class="sxs-lookup"><span data-stu-id="8e617-199">Common Planner error conditions</span></span>

<span data-ttu-id="8e617-200">В дополнение к [общим ошибкам](/graph/errors) Microsoft Graph, некоторые ошибки относятся только к API Планировщика.</span><span class="sxs-lookup"><span data-stu-id="8e617-200">In addition to [general errors](/graph/errors) that apply to Microsoft Graph, some error conditions are specific to the Planner API.</span></span>

### <a name="400-bad-request"></a><span data-ttu-id="8e617-201">400 (неправильный запрос)</span><span class="sxs-lookup"><span data-stu-id="8e617-201">400 Bad request</span></span>

<span data-ttu-id="8e617-202">В некоторых типовых сценариях на запросы `POST` и `PATCH` может быть получен код состояния 400.</span><span class="sxs-lookup"><span data-stu-id="8e617-202">In some common scenarios, `POST` and `PATCH` requests can return a 400 status code.</span></span> <span data-ttu-id="8e617-203">Ниже приведено несколько распространенных причин.</span><span class="sxs-lookup"><span data-stu-id="8e617-203">The following are some of the common causes:</span></span>

* <span data-ttu-id="8e617-p112">Открытые свойства имеют неправильный тип, тип не указан, или они не содержат свойств. Например, свойства [plannerAssignments](plannerassignments.md) со сложными значениями должны объявлять свойство `@odata.type` со значением `microsoft.graph.plannerAssignment`.</span><span class="sxs-lookup"><span data-stu-id="8e617-p112">Open Type properties are not of correct types, or the type isn't specified, or they do not contain any properties. For example, [plannerAssignments](plannerassignments.md) properties with complex values need to declare `@odata.type` property with value `microsoft.graph.plannerAssignment`.</span></span>
* <span data-ttu-id="8e617-p113">Указания по упорядочиванию имеют неправильный формат. Например, в качестве указания по упорядочиванию задается значение, возвращаемое клиенту.</span><span class="sxs-lookup"><span data-stu-id="8e617-p113">Order hint values do not have the [correct format](planner-order-hint-format.md). For example, an order hint value is being set directly to the value returned to the client.</span></span>
* <span data-ttu-id="8e617-p114">Данные логически не согласованы. Например, дата начала задачи позже даты выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="8e617-p114">The data is logically inconsistent. For example, start date of task is later than due date of the task.</span></span>

### <a name="403-forbidden"></a><span data-ttu-id="8e617-210">403 (доступ запрещен)</span><span class="sxs-lookup"><span data-stu-id="8e617-210">403 Forbidden</span></span>

<span data-ttu-id="8e617-211">API Планировщика возвращает код состояния 403, если превышено ограничение, определенное в службе.</span><span class="sxs-lookup"><span data-stu-id="8e617-211">In addition to the general errors, the Planner API also returns the 403 status code when a service-defined limit has been exceeded.</span></span> <span data-ttu-id="8e617-212">Тип ограничения, превышенного в запросе, будет указан в свойстве `code` типа ресурса.</span><span class="sxs-lookup"><span data-stu-id="8e617-212">If this is the case, the `code` property on the error resource type will indicate the type of the limit exceeded by the request.</span></span>
<span data-ttu-id="8e617-213">Ниже перечислены возможные значения для типов ограничений.</span><span class="sxs-lookup"><span data-stu-id="8e617-213">The following are the possible values for the limit types.</span></span>

| <span data-ttu-id="8e617-214">Значение</span><span class="sxs-lookup"><span data-stu-id="8e617-214">Value</span></span>                         | <span data-ttu-id="8e617-215">Описание</span><span class="sxs-lookup"><span data-stu-id="8e617-215">Description</span></span>                                                                                                                                                                                              |
| :---------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="8e617-216">MaximumProjectsOwnedByUser</span><span class="sxs-lookup"><span data-stu-id="8e617-216">MaximumProjectsOwnedByUser</span></span>    | <span data-ttu-id="8e617-p116">Превышено максимальное количество планов, принадлежащих группе. Это ограничение основано на свойстве `owner` ресурса [plannerPlan](plannerplan.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-p116">The maximum number of Plans owned by a group limit has been exceeded. This limit is based on the `owner` property on the [plannerPlan](plannerplan.md) resource.</span></span>                                         |
| <span data-ttu-id="8e617-219">MaximumProjectsSharedWithUser</span><span class="sxs-lookup"><span data-stu-id="8e617-219">MaximumProjectsSharedWithUser</span></span> | <span data-ttu-id="8e617-p117">Пользователю предоставлен доступ к максимальному количеству планов.  Это ограничение основано на свойстве `sharedWith` ресурса [plannerPlanDetails](plannerplandetails.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-p117">The maximum number of Plans shared with a user limit has been exceeded.  This limit is based on the `sharedWith` property on the [plannerPlanDetails](plannerplandetails.md) resource.</span></span>                   |
| <span data-ttu-id="8e617-222">MaximumTasksCreatedByUser</span><span class="sxs-lookup"><span data-stu-id="8e617-222">MaximumTasksCreatedByUser</span></span>     | <span data-ttu-id="8e617-p118">Пользователь создал максимальное количество задач. Это ограничение основано на свойстве `createdBy` ресурса [plannerTask](plannertask.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-p118">The maximum number of Tasks created by a user limit has been exceeded. This limit is based on the `createdBy` property on the [plannerTask](plannertask.md) resource.</span></span>                                    |
| <span data-ttu-id="8e617-225">MaximumTasksAssignedToUser</span><span class="sxs-lookup"><span data-stu-id="8e617-225">MaximumTasksAssignedToUser</span></span>    | <span data-ttu-id="8e617-p119">Пользователю назначено максимальное количество задач. Это ограничение основано на свойстве `assignments` ресурса [plannerTask](plannertask.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-p119">The maximum number of Tasks assigned to a user limit has been exceeded. This limit is based on the `assignments` property on the [plannerTask](plannertask.md) resource.</span></span>                                 |
| <span data-ttu-id="8e617-228">MaximumTasksInProject</span><span class="sxs-lookup"><span data-stu-id="8e617-228">MaximumTasksInProject</span></span>         | <span data-ttu-id="8e617-p120">Превышено максимальное количество задач в плане. Это ограничение основано на свойстве `planId` ресурса [plannerTask](plannertask.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-p120">The maximum number of Tasks in a Plan limit has been exceeded. This limit is based on the `planId` property on the [plannerTask](plannertask.md) resource.</span></span>                                               |
| <span data-ttu-id="8e617-231">MaximumActiveTasksInProject</span><span class="sxs-lookup"><span data-stu-id="8e617-231">MaximumActiveTasksInProject</span></span>   | <span data-ttu-id="8e617-p121">Превышено максимальное количество невыполненных задач в плане. Это ограничение основано на свойствах `planId` и `percentComplete` ресурса [plannerTask](plannertask.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-p121">The maximum number of Tasks that aren't completed in a Plan limit has been exceeded. This limit is based on the `planId` and `percentComplete` properties on the [plannerTask](plannertask.md) resource.</span></span> |
| <span data-ttu-id="8e617-234">MaximumBucketsInProject</span><span class="sxs-lookup"><span data-stu-id="8e617-234">MaximumBucketsInProject</span></span>       | <span data-ttu-id="8e617-p122">Превышено максимальное количество сегментов в плане. Это ограничение основано на свойстве `planId` ресурса [plannerBucket](plannerbucket.md).</span><span class="sxs-lookup"><span data-stu-id="8e617-p122">The maximum number of Buckets in a Plan limit has been exceeded. This limit is based on the `planId` property on the [plannerBucket](plannerbucket.md) resource.</span></span>                                         |
| <span data-ttu-id="8e617-237">MaximumUsersSharedWithProject</span><span class="sxs-lookup"><span data-stu-id="8e617-237">MaximumUsersSharedWithProject</span></span> | <span data-ttu-id="8e617-238">Свойство `sharedWith` ресурса [plannerPlanDetails](plannerplandetails.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="8e617-238">The `sharedWith` property on the [plannerPlanDetails](plannerplandetails.md) resource contains too many values.</span></span>                                                                                          |
| <span data-ttu-id="8e617-239">MaximumReferencesOnTask</span><span class="sxs-lookup"><span data-stu-id="8e617-239">MaximumReferencesOnTask</span></span>       | <span data-ttu-id="8e617-240">Свойство `references` ресурса [plannerTaskDetails](plannertaskdetails.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="8e617-240">The `references` property on the [plannerTaskDetails](plannertaskdetails.md) resource contains too many values.</span></span>                                                                                          |
| <span data-ttu-id="8e617-241">MaximumChecklistItemsOnTask</span><span class="sxs-lookup"><span data-stu-id="8e617-241">MaximumChecklistItemsOnTask</span></span>   | <span data-ttu-id="8e617-242">Свойство `checklist` ресурса [plannerTaskDetails](plannertaskdetails.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="8e617-242">The `checklist` property on the [plannerTaskDetails](plannertaskdetails.md) resource contains too many values.</span></span>                                                                                           |
| <span data-ttu-id="8e617-243">MaximumAssigneesInTasks</span><span class="sxs-lookup"><span data-stu-id="8e617-243">MaximumAssigneesInTasks</span></span>       | <span data-ttu-id="8e617-244">Свойство `assignments` ресурса [plannerTask](plannertask.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="8e617-244">The `assignments` property on the [plannerTask](plannertask.md) resource contains too many values.</span></span>                                                                                                       |
| <span data-ttu-id="8e617-245">MaximumFavoritePlansForUser</span><span class="sxs-lookup"><span data-stu-id="8e617-245">MaximumFavoritePlansForUser</span></span>   | <span data-ttu-id="8e617-246">Свойство `favoritePlanReferences` ресурса [plannerUser](planneruser.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="8e617-246">The `favoritePlanReferences` property on the [plannerUser](planneruser.md) resource contains too many values.</span></span>                                                                                            |
| <span data-ttu-id="8e617-247">MaximumRecentPlansForUser</span><span class="sxs-lookup"><span data-stu-id="8e617-247">MaximumRecentPlansForUser</span></span>     | <span data-ttu-id="8e617-248">Свойство `recentPlanReferences` ресурса [plannerUser](planneruser.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="8e617-248">The `recentPlanReferences` property on the [plannerUser](planneruser.md) resource contains too many values.</span></span>                                                                                              |
| <span data-ttu-id="8e617-249">MaximumContextsOnPlan</span><span class="sxs-lookup"><span data-stu-id="8e617-249">MaximumContextsOnPlan</span></span>         | <span data-ttu-id="8e617-250">Свойство `contexts` ресурса [plannerPlan](plannerplan.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="8e617-250">The `contexts` property on the [plannerPlan](plannerplan.md) resource contains too many values.</span></span>                                                                                                          |
| <span data-ttu-id="8e617-251">MaximumPlannerPlans</span><span class="sxs-lookup"><span data-stu-id="8e617-251">MaximumPlannerPlans</span></span>       | <span data-ttu-id="8e617-252">Группа уже содержит план.</span><span class="sxs-lookup"><span data-stu-id="8e617-252">The group already contains a Plan.</span></span> <span data-ttu-id="8e617-253">В настоящее время группы могут содержать только один план.</span><span class="sxs-lookup"><span data-stu-id="8e617-253">Currently, groups can only contain one Plan.</span></span> <span data-ttu-id="8e617-254">**Примечание.** Некоторые приложения Майкрософт могут превышать это ограничение.</span><span class="sxs-lookup"><span data-stu-id="8e617-254">**Note:** Some Microsoft apps can exceed this limit.</span></span> <span data-ttu-id="8e617-255">В будущем эта возможность будет реализована для всех приложений.</span><span class="sxs-lookup"><span data-stu-id="8e617-255">In the future, we will extend this capability to all apps.</span></span>                                                                                                      |

### <a name="412-precondition-failed"></a><span data-ttu-id="8e617-256">412 (необходимое условие не выполнено)</span><span class="sxs-lookup"><span data-stu-id="8e617-256">412 Precondition Failed</span></span>

<span data-ttu-id="8e617-257">Во всех запросах `POST`, `PATCH` и `DELETE` API Планировщика заголовок `If-Match` необходимо указывать с последним известным значением тега etag ресурса.</span><span class="sxs-lookup"><span data-stu-id="8e617-257">All Planer API `POST`, `PATCH`, and `DELETE` requests require the `If-Match` header to be specified with the last known etag value of the resource that is subject to the request.</span></span>
<span data-ttu-id="8e617-258">Код состояния 412 также может быть возвращен, если значение тега etag, указанное в запросе, больше не соответствует версии ресурса в службе.</span><span class="sxs-lookup"><span data-stu-id="8e617-258">The 412 status code can also be returned if the etag value specified in the request no longer matches a version of the resource in the service.</span></span> <span data-ttu-id="8e617-259">В этом случае клиентам следует прочитать ресурс еще раз и получить новый тег etag.</span><span class="sxs-lookup"><span data-stu-id="8e617-259">In this case, the clients should read the resource again and get a new etag.</span></span>

## <a name="whats-new"></a><span data-ttu-id="8e617-260">Новые возможности</span><span class="sxs-lookup"><span data-stu-id="8e617-260">What's new</span></span>
<span data-ttu-id="8e617-261">Узнайте о [новых функциях и обновлениях](/graph/whats-new-overview) для этого набора API.</span><span class="sxs-lookup"><span data-stu-id="8e617-261">Find out about the [latest new features and updates](/graph/whats-new-overview) for this API set.</span></span>

