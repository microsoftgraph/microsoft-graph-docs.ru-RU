---
title: Обзор API параметров API параметров меж клиента
description: 'Параметры межзонного доступа позволит управлять как взаимодействием B2B, так и непосредственным подключением B2B для вашей организации.'
author: jkdouglas
ms.localizationpriority: medium
ms.prod: identity-and-sign-in
doc_type: resourcePageType
---

# <a name="cross-tenant-access-settings-api-overview"></a>Обзор API параметров API параметров меж клиента

Пространство имен: microsoft.graph

[!INCLUDE [beta-disclaimer](../../includes/beta-disclaimer.md)]

В традиционной совместной работе Azure AD B2B любой приглашенный пользователь из организации может использовать свои удостоверения для доступа к ресурсам во внешних организациях. Администраторы не имеют контроля над удостоверениями пользователей в клиенте, которые могут войти во внешние организации. Эти ограниченные элементы управления затруднили использование удостоверений в организации несанкционированными способами.

**Параметры межсетевого доступа** позволяет контролировать и управлять взаимодействием между пользователями в организации и других организациях. Управление может быть **на исходящие** доступы (как ваши пользователи сотрудничают с другими организациями **),** входящий доступ (как другие организации сотрудничают с вами), или оба.

Детализированный элемент управления позволяет определять пользователей, групп и приложений как в организации, так и во внешних организациях, которые могут участвовать в совместной работе Azure AD B2B и непосредственном подключении Azure AD B2B. Эти элементы управления реализуются с помощью:

+ **Параметры меж клиента по умолчанию** , которые задают базовые параметры входящего и исходяходящего доступа.
    + В совместной работе Azure AD B2B оба параметра доступа включены по умолчанию. Это означает, что все пользователи могут быть приглашены в внешние организации, а все пользователи могут приглашать внешних пользователей.
    + В Azure AD B2B прямое подключение обе параметров доступа отключены по умолчанию.
    + Параметры службы по умолчанию могут быть обновлены.
+ **Параметры доступа, определенные для** партнеров, которые позволяют настраивать настраиваемые параметры для отдельных организаций. Для настроенных организаций эта конфигурация имеет приоритет над настройками по умолчанию. Поэтому, хотя совместная работа Azure AD B2B и прямое подключение Azure AD B2B по умолчанию могут быть отключены в организации, эти функции можно включить для определенной внешней организации.

> [!IMPORTANT]
> 
> Настраивая параметры исходящие параметров прямого подключения B2B, вы соглашаетесь разрешить внешним организациям, которые включили исходящие параметры, получать доступ к ограниченным контактным данным о пользователях. Корпорация Майкрософт делится этими данными с этими организациями, чтобы помочь им отправить запрос на подключение к пользователям. Данные, собираемые внешними организациями, включая ограниченные контактные данные, подчиняются политикам конфиденциальности и практике этих организаций.

## <a name="default-cross-tenant-access-settings"></a>Параметры меж клиента по умолчанию

Параметры меж клиента по умолчанию определяют вашу позицию для входящего и исходяходящего взаимодействия со всеми другими организациями Azure AD. Любое внешнее сотрудничество с организацией, не указанным явно в параметрах межъегонных параметров доступа, наследует эти параметры по умолчанию. Параметры по умолчанию определяются с помощью [типа ресурса crossTenantAccessPolicyConfigurationDefault](../resources/crosstenantaccesspolicyconfigurationdefault.md) .

По умолчанию Azure AD назначает всем клиентам Azure AD конфигурацию по умолчанию службы для параметров межъединого доступа. Эти по умолчанию службы можно переопределять с помощью собственной конфигурации в соответствии с организацией. Вы можете подтвердить, используете ли вы параметры службы по умолчанию или изменили параметры по умолчанию, посмотрев свойство **isServiceDefault** , возвращенное при запросе конечной точки по умолчанию.

## <a name="partner-cross-tenant-access-settings"></a>Параметры меж клиента партнеров

Параметры меж клиента для партнеров определяют вашу позицию для входящего и исходящие взаимодействия с определенной организацией Azure AD. Любое сотрудничество с этой организацией наследует эти параметры, определенные для партнеров. Параметры партнеров определяются с помощью [типа ресурса crossTenantAccessPolicyConfigurationPartner](../resources/crosstenantaccesspolicyconfigurationpartner.md) .

Несмотря на то, что вы добавили партнера в параметры меж клиента, некоторые параметры по умолчанию будут по-прежнему применяться. Например, если настроить **только b2bCollaborationInbound** для партнера в параметрах меж клиента доступа, все другие параметры для этой конфигурации партнера будут унаследованы от параметров меж клиента по умолчанию. При запросе конечной `null` точки партнера любое свойство объекта-партнера означает, что для этого свойства оно наследует параметры из политики по умолчанию.

## <a name="inbound-trust-settings-in-cross-tenant-access-settings"></a>Входящие параметры доверия в параметрах меж клиента

Входящие параметры доверия позволяют доверять внешним пользователям MFA в их домашних каталогах. Это не позволяет внешним пользователям выполнять MFA как в домашних каталогах, так и в каталоге. Входящие параметры доверия позволяют обеспечить бесшовную проверку подлинности для внешних пользователей и сэкономить затраты на MFA, понесенные вашей организацией.  

Например, при настройке параметров доверия для доверия к MFA политики MFA по-прежнему применяются к внешним пользователям, но пользователям, которые уже завершили MFA в своих домашних клиентах, не придется снова заполнять MFA в клиенте.

Входящие параметры доверия также позволяют доверять совместимым устройствам или гибридным Azure AD, присоединимым к их домашним каталогам. С помощью параметров входящего доверия в параметрах меж клиента доступ теперь можно защитить доступ к приложениям и ресурсам, требуя, чтобы внешние пользователи использовали совместимые устройства или гибридные устройства Azure AD.

## <a name="interpreting-the-api-response"></a>Интерпретация ответа API

API параметров меж клиента можно использовать для настройки нескольких конфигураций для допуска или блокировки доступа к организации и из нее. В следующей таблице показаны сценарии, показан пример ответа API и интерпретация этого ответа. **b2bSetting** используется в качестве места для любой входящие B2B (**b2bCollaborationInbound** или **b2bDirectConnectInbound**) или исходящие (**b2bCollaborationOutbound** или **b2bDirectConnectOutbound**) конфигурации.

<table>
<tr>
<td> Сценарий </td> <td> Выход API </td> <td> Интерпретация </td>
</tr>
<tr>
<td> Блокировка всех пользователей и блокировка всех приложений </td>
<td>

``` json
"b2bsetting": {
    "usersAndGroups": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "AllUsers",
                "targetType": "user"
            }
        ]
    },
    "applications": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "AllApplications",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> - </td>
</tr>
<tr>
<td> Разрешить всем пользователям и разрешить все приложения </td>
<td>

``` json
"b2bsetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "AllUsers",
                "targetType": "user"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "AllApplications",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> - </td>
</tr>
<tr>
<td> Разрешить пользователям в группе "g1" получать доступ к любому приложению </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "AllApplications",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователи в группе g1 могут получить доступ к любому приложению. Все остальные пользователи, не в группе "g1", заблокированы. </td>
</tr>
<tr>
<td> Разрешить доступ только к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "AllUsers",
                "targetType": "user"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Всем пользователям разрешен доступ только к приложению "a1" </td>
</tr>
<tr>
<td> Разрешить пользователям в группе "g1" и заблокировать доступ к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Всем пользователям группы "g1" разрешен доступ к любому приложению, <b>кроме</b> приложения "a1". </td>
</tr>
<tr>
<td> Блокировка доступа пользователей в группе "g1" к любому приложению </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": " blocked",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "AllApplications",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователи в группе g1 не могут получить доступ к любому приложению. Другие пользователи, не в группе "g1", имеют доступ ко всем приложениям. </td>
</tr>
<tr>
<td> Блокировать пользователей в группе "g1" и разрешить доступ только к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователи в группе g1 не могут получить доступ к любому приложению. Любой пользователь, не в группе "g1", может получить доступ только к приложению "a1". </td>
</tr>
<tr>
<td> Разрешить пользователям в группе "g1" доступ только к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователям в группе "g1" разрешен доступ только к приложению "a1". Всем пользователям, включая пользователей в группе "g1", заблокирован доступ к любому другому приложению. </td>
</tr>
<tr>
<td> Блокировка доступа пользователей в группе "g1" к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователям в группе "g1" заблокирован доступ только к приложению "a1". Все пользователи, включая пользователей в группе g1, могут получить доступ к любому другому приложению. </td>
</tr>
</table>

## <a name="cross-tenant-access-settings-vs-tenant-restrictions"></a>Параметры перекрестного доступа к клиенту и ограничения клиента

Параметры исходящие параметров доступа между клиентами используются для контроля использования  учетных записей организации для доступа к ресурсам в других организациях Azure AD. Ограничения клиента для контроля использования сотрудниками учетных записей других организаций Azure AD в то время, когда сотрудник находится **в ваших сетях или устройствах**. Критически важно, что исходящие элементы управления работают постоянно, так как они связаны с учетными записями, а ограничения клиента требуют вводить дополнительные сигналы в запросы на проверку подлинности, поскольку ограничения клиента распространяются на сети и устройства, а не на учетные записи. Дополнительные новости об [ограничениях клиента](/azure/active-directory/manage-apps/tenant-restrictions).

## <a name="next-steps"></a>Дальнейшие действия

+ [Документация по настройкам параметров меж клиента](/azure/active-directory/external-identities/cross-tenant-access-overview)
+ [тип ресурса crossTenantAccessPolicyConfigurationDefault](../resources/crosstenantaccesspolicyconfigurationdefault.md)
+ [тип ресурса crossTenantAccessPolicyConfigurationPartner](../resources/crosstenantaccesspolicyconfigurationpartner.md)
