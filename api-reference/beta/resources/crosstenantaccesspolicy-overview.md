---
title: Обзор API параметров межтенантного доступа
description: Параметры межтенантного доступа позволяют управлять службой совместной работы B2B и прямым подключением B2B для вашей организации.
author: jkdouglas
ms.localizationpriority: medium
ms.prod: identity-and-sign-in
doc_type: resourcePageType
ms.openlocfilehash: 088e9da122680c8f975597a2f58e9ae352a5e4f3
ms.sourcegitcommit: 10b45b3e666bf6b438803885128bc2f0fa2fa994
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2022
ms.locfileid: "65653548"
---
# <a name="cross-tenant-access-settings-api-overview"></a>Обзор API параметров межтенантного доступа

Пространство имен: microsoft.graph

[!INCLUDE [beta-disclaimer](../../includes/beta-disclaimer.md)]

В традиционной Azure AD B2B любой приглашенный пользователь из организации может использовать свое удостоверение для доступа к ресурсам во внешних организациях. Администраторы не имеют контроля над удостоверениями пользователей в своем клиенте, которым разрешено входить во внешние организации. Эти ограниченные средства контроля затрудняли несанкционированное использование удостоверений в организации.

**Параметры межтенантного доступа** позволяют управлять совместной работой пользователей в организации и другими организациями и управлять ими. Этот элемент управления может быть **как исходящим** доступом (как пользователи взаимодействуют с другими **организациями), так** и входящим доступом (как другие организации взаимодействуют с вами) или и тем, и другим.

Детализированные элементы управления позволяют определить пользователей, группы и приложения как в вашей организации, так и во внешних организациях, которые могут участвовать в совместной Azure AD B2B и Azure AD B2B direct connect. Эти элементы управления реализуются с помощью:

+ **Параметры межтенантного доступа по** умолчанию, которые задают базовые параметры входящего и исходящего доступа.
    + В Azure AD B2B оба параметра доступа включены по умолчанию. Это означает, что все пользователи могут быть приглашены во внешние организации, а все пользователи могут приглашать внешних пользователей.
    + В Azure AD B2B оба параметра доступа по умолчанию отключены.
    + Параметры службы по умолчанию могут быть обновлены.
+ **Параметры доступа, относящиеся к партнерам** , которые позволяют настраивать настраиваемые параметры для отдельных организаций. Для настроенных организаций эта конфигурация имеет приоритет над параметрами по умолчанию. Таким образом, Azure AD B2B и прямое подключение B2B Azure AD по умолчанию могут быть отключены в вашей организации, вы можете включить эти функции для определенной внешней организации.

> [!IMPORTANT]
> 
> Настроив параметры прямого подключения B2B, вы соглашаетесь разрешить внешним организациям, для которых вы включили параметры исходящего трафика, доступ к ограниченным контактным данным о пользователях. Корпорация Майкрософт предоставляет эти данные этим организациям, чтобы помочь им отправить запрос на подключение к пользователям. На данные, собираемые внешними организациями, включая ограниченные контактные данные, распространяются политики конфиденциальности и методы этих организаций.

## <a name="default-cross-tenant-access-settings"></a>Параметры межтенантного доступа по умолчанию

Параметры межтенантного доступа по умолчанию определяют ваше отношение к входящей и исходящей совместной работе со Azure AD организациями. Все внешние функции совместной работы с организацией, не указанные явным образом в параметрах межтенантного доступа, наследуют эти параметры по умолчанию. Параметры по умолчанию определяются с помощью типа ресурса [crossTenantAccessPolicyConfigurationDefault](../resources/crosstenantaccesspolicyconfigurationdefault.md) .

По умолчанию Azure AD всем клиентам Azure AD конфигурацию службы по умолчанию для параметров межтенантного доступа. Вы можете переопределить эти параметры службы по умолчанию с помощью собственной конфигурации в соответствии с вашей организацией. Вы можете проверить, используете ли вы параметры службы по умолчанию или изменили параметры по умолчанию, просмотрев свойство **isServiceDefault** , возвращаемое при запросе конечной точки по умолчанию.

## <a name="partner-cross-tenant-access-settings"></a>Параметры межтенантного доступа для партнеров

Параметры межтенантного доступа для определенных партнеров определяют ваше отношение к входящей и исходящей совместной работе с определенной Azure AD организации. Любая совместная работа с этой организацией наследует эти параметры, относящиеся к партнерам. Параметры партнера определяются с помощью типа ресурса [crossTenantAccessPolicyConfigurationPartner](../resources/crosstenantaccesspolicyconfigurationpartner.md) .

Несмотря на то, что вы добавили партнера в параметры межтенантного доступа, некоторые параметры по умолчанию будут по-прежнему применяться. Например, если вы настроите только **b2bCollaborationInbound** для партнера в параметрах межтенантного доступа, все остальные параметры для этой конфигурации партнера будут наследоваться от параметров межтенантного доступа по умолчанию. При запросе конечной `null` точки партнера любое свойство объекта партнера, которое означает, что для этого свойства он наследует параметры из политики по умолчанию.

## <a name="inbound-trust-settings-in-cross-tenant-access-settings"></a>Параметры входящего доверия в параметрах межтенантного доступа

Параметры входящего доверия позволяют доверять внешним пользователям MFA, которые выполняются в домашних каталогах. Это не позволяет внешним пользователям выполнять MFA как в домашних каталогах, так и в вашем каталоге. С помощью параметров входящего доверия вы обеспечиваете бесперебойную проверку подлинности для внешних пользователей и экономите затраты на MFA, понесенные вашей организацией.  

Например, при настройке параметров доверия для доверия MFA политики MFA по-прежнему применяются к внешним пользователям, но пользователям, которые уже выполнили MFA в домашних клиентах, не придется повторно выполнять MFA в клиенте.

Параметры входящего доверия также позволяют доверять совместимым устройствам или гибридным Azure AD в домашних каталогах. С помощью параметров входящего доверия в параметрах межтенантного доступа теперь можно защитить доступ к приложениям и ресурсам, требуя, чтобы внешние пользователи могли использовать соответствующие или гибридные Azure AD присоединенные устройства.

## <a name="collaborate-with-organizations-using-azure-active-directory-in-different-microsoft-clouds"></a>Совместная работа с организациями с Azure Active Directory в разных облаках Майкрософт

Параметры межтенантного доступа используются для обеспечения совместной работы с Azure AD в отдельных облаках Майкрософт. Это `allowedCloudEndpoints` свойство позволяет указать, какие облака Майкрософт вы хотите расширить для совместной работы. Совместная работа B2B поддерживается между следующими облаками Майкрософт:

+ Microsoft Azure коммерческих и Microsoft Azure для государственных организаций
+ Microsoft Azure коммерческой и Microsoft Azure Китае

<!---Learn more about [collaborating with organizations from a different Microsoft cloud](azure/active-directory/external-identities/cross-cloud-settings).--->

## <a name="interpreting-the-api-response"></a>Интерпретация ответа API

API параметров межтенантного доступа можно использовать для настройки нескольких конфигураций для разрешения или блокировки доступа к вашей организации и из нее. В следующей таблице показаны сценарии, показан пример ответа API и интерпретация этого ответа. **b2bSetting** используется в качестве заполнителя для любой конфигурации B2B inbound (**b2bCollaborationInbound** или **b2bDirectConnectInbound**) или исходящей (**b2bCollaborationOutbound** или **b2bDirectConnectOutbound**).

<br/>

<table>
<tr>
<th> Сценарий </th> <th> Выходные данные API </th> <th> Интерпретации </th>
</tr>
<tr>
<td> Блокировка всех пользователей и блокировка всех приложений </td>
<td>

``` json
"b2bsetting": {
    "usersAndGroups": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "AllUsers",
                "targetType": "user"
            }
        ]
    },
    "applications": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "AllApplications",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> - </td>
</tr>
<tr>
<td> Разрешить всем пользователям и разрешить все приложения </td>
<td>

``` json
"b2bsetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "AllUsers",
                "targetType": "user"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "AllApplications",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> - </td>
</tr>
<tr>
<td> Разрешить пользователям в группе g1 доступ к любому приложению </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "AllApplications",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователи в группе g1 могут получить доступ к любому приложению. Все остальные пользователи, не вложенные в группу g1, блокируются. </td>
</tr>
<tr>
<td> Разрешить доступ только к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "AllUsers",
                "targetType": "user"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Всем пользователям разрешен доступ только к приложению "a1" </td>
</tr>
<tr>
<td> Разрешить пользователям в группе g1 и заблокировать доступ к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Всем пользователям в группе g1 разрешен доступ к любому приложению, <b>кроме приложения "</b> a1". </td>
</tr>
<tr>
<td> Блокировка доступа пользователей в группе g1 к любому приложению </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": " blocked",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "AllApplications",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователи в группе g1 не могут получить доступ к любому приложению. Другие пользователи, не в группе g1, имеют доступ ко всем приложениям. </td>
</tr>
<tr>
<td> Блокировка пользователей в группе g1 и разрешение доступа только к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователи в группе g1 не могут получить доступ к любому приложению. Любой пользователь, не в группе g1, может получить доступ только к приложению "a1". </td>
</tr>
<tr>
<td> Разрешить пользователям в группе "g1" доступ только к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "allowed",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователям в группе "g1" разрешен доступ только к приложению "a1". Всем пользователям, включая пользователей в группе g1, запрещается доступ к любому другому приложению. </td>
</tr>
<tr>
<td> Блокировка доступа пользователей в группе g1 к приложению "a1" </td>
<td>

``` json
"b2bSetting": {
    "usersAndGroups": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "g1",
                "targetType": "group"
            }
        ]
    },
    "applications": {
        "accessType": "blocked",
        "targets": [
            {
                "target": "a1",
                "targetType": "application"
            }
        ]
    }
}
```

</td>
<td> Пользователям в группе "g1" запрещается доступ только к приложению "a1". Все пользователи, включая пользователей в группе g1, могут получить доступ к любому другому приложению. </td>
</tr>
</table>

## <a name="cross-tenant-access-settings-vs-tenant-restrictions"></a>Параметры межтенантного доступа и ограничения клиента

Параметры межтенантного доступа для исходящих элементов управления  предназначены для управления тем, как учетные записи вашей организации используются для доступа к ресурсам в других Azure AD организациях. Ограничения клиентов предназначены для управления тем, как ваши сотрудники используют Azure AD учетных записей других организаций, пока сотрудник находится в ваших сетях **или на устройствах**. Критически важно, что элементы управления исходящим трафиком работают все время, так как они связаны с вашими учетными записями, а ограничения клиентов требуют внедрения дополнительных сигналов в запросы проверки подлинности, так как ограничения клиентов применяются к сетям и устройствам, а не к учетным записям. Дополнительные сведения об [ограничениях клиентов](/azure/active-directory/manage-apps/tenant-restrictions).

## <a name="next-steps"></a>Дальнейшие действия

+ [Документация по параметрам доступа между клиентами](/azure/active-directory/external-identities/cross-tenant-access-overview)
+ [Тип ресурса crossTenantAccessPolicyConfigurationDefault](../resources/crosstenantaccesspolicyconfigurationdefault.md)
+ [Тип ресурса crossTenantAccessPolicyConfigurationPartner](../resources/crosstenantaccesspolicyconfigurationpartner.md)
