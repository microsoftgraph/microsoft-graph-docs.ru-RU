---
title: Использование Postman с API Microsoft Graph
description: Используйте коллекцию Microsoft Graph Postman, чтобы начать работу с API Microsoft Graph в считанные минуты.
author: jthake-msft
localization_priority: Priority
ms.openlocfilehash: 04668cd76a7d8ca298e2ad16483be902c59983c5
ms.sourcegitcommit: 8ca598ac70647bf4f897361ee90d3aa31d2ecca5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/31/2021
ms.locfileid: "51469047"
---
# <a name="use-postman-with-the-microsoft-graph-api"></a>Использование Postman с API Microsoft Graph
Вы можете использовать коллекцию Microsoft Graph Postman, чтобы начать работу с API Microsoft Graph в считанные минуты.

![Изображение Postman](https://github.com/microsoftgraph/microsoftgraph-postman-collections/blob/master/images/postman.png?raw=true)

В этой статье рассказывается о том, как быстро приступить к работе с Postman и Microsoft Graph. Кроме того, вы можете просматривать API Microsoft Graph непосредственно в веб-браузере с помощью [песочницы Graph](https://developer.microsoft.com/graph/graph-explorer).

Чтобы узнать, как это сделать, выполните действия, описанные в этой статье, или посмотрите видео [Начало работы с рабочей областью Microsoft Graph Postman](https://youtu.be/3RTHY3jScmA).


## <a name="step-1---forking-the-microsoft-graph-postman-collection"></a>Шаг 1. Разветвление коллекции Microsoft Graph Postman
Чтобы воспользоваться коллекцией Postman, создайте ее вилку в своей рабочей области Postman. Выполните это в веб-браузере.

1. Откройте [Postman](https://www.postman.com/) и войдите.
2. Перейдите в коллекцию Postman с меткой [Microsoft Graph](https://www.postman.com/microsoftgraph/workspace/microsoft-graph/collection/455214-085f7047-1bec-4570-9ed0-3a7253be148c/fork).
3. Укажите метку для своей вилки. Это может быть любой текст.
4. В разделе рабочей области выберите **My Workspace** (Моя рабочая область) в раскрывающемся списке. 
5. Нажмите **Fork Collection** (Разветвление коллекции).

Вы будете перенаправлены в вилку главной коллекции Microsoft Graph Postman в своей рабочей области.

## <a name="step-2---optional---postman-web-browser-only-download-the-postman-agent"></a>Шаг 2. Скачивание агента (необязательно, только в веб-браузере Postman)
Чтобы использовать эту конкретную коллекцию Postman в своем веб-браузере, скачайте [классический агент Postman](https://www.postman.com/downloads). Без этого вы не можете использовать Postman для Интернета из-за ограничений CORS в веб-браузере. 

Вам не требуется агент, если вы используете Postman для приложения Windows. Если вы открываете Postman для Windows, вы увидите эту разветвленную коллекцию в своей рабочей области.

## <a name="step-3---create-an-azure-ad-application"></a>Шаг 3. Создание приложения Azure AD
Чтобы использовать эту коллекцию в своем клиенте разработчика, создайте приложение Azure AD и предоставьте ему соответствующие разрешения для запросов, которые нужно выполнять. Если у вас нет клиента разработчика, вы можете зарегистрироваться для получения одного из них в [программе для разработчиков Microsoft 365](https://developer.microsoft.com/ru-RU/microsoft-365/dev-program).

1. Перейдите на сайт [portal.azure.com](https://portal.azure.com/) и войдите, используя свою учетную запись администратора клиента разработчика.
2. В разделе **Службы Azure** нажмите **Azure Active Directory**.
3. В меню слева выберите **Регистрация приложений**.
4. В горизонтальном меню нажмите **Новая регистрация**.
5. В качестве **имени приложения** укажите `Postman`.
6. Присвойте параметру **URI перенаправления** значение `https://oauth.pstmn.io/v1/browser-callback`.
7. Нажмите **Зарегистрировать**.
8. В меню слева выберите **Разрешения API**.
9. В горизонтальном меню щелкните **Добавить разрешение**, выберите **Microsoft Graph** и нажмите **Делегированные разрешения**.
10. Введите `Mail.`, разверните параметры **Mail** и установите флажок **Mail.Read**.
11. Щелкните **Разрешения приложений**, введите `User.`и просмотрите **разрешения приложений**.
12. Разверните параметры **User** и установите флажок **User.Read.All**.
13. Щелкните **Добавить разрешения**.
14. В горизонтальном меню нажмите **Предоставить согласие администратора для** и нажмите **Да**.
15. В меню слева щелкните **Обзор**. Здесь можно узнать **Идентификатор приложения (клиент)** и **Идентификатор каталога (клиент)**. Они понадобятся вам на шаге 4.
16. В меню слева выберите **Сертификаты и секреты**. 
17. Щелкните **Новый секрет клиента**, введите описание и нажмите **Добавить**. Наведите курсор на **значение** нового секрета клиента и скопируйте его. Оно понадобится вам на шаге 4.

У приложения Azure AD теперь есть разрешения на выполнение запросов от имени пользователя для вызова Mail.Read и вызова User.Read.All в качестве приложения.

## <a name="step-4---configuring-authentication-in-postman"></a>Шаг 4. Настройка проверки подлинности в Postman
Перейдите в Postman и убедитесь, что вы выбрали рабочее пространство, созданное на шаге 1. Настройте несколько переменных среды, используемых для получения маркера доступа.

1. Щелкните значок с изображением глаза в правом верхнем углу рядом с раскрывающимся списком **No environment** (Нет среды).
2. В правом верхнем углу всплывающего окна нажмите **Add** (Добавить).
3. Измените **New Environment** (Новая среда) на **M365 Environment** (Среда M365).
4. Создайте новую переменную с именем `ClientID` и задайте для параметра **Current value** (Текущее значение) значение "Идентификатор приложения (клиент)" из шага 3.15.
5. Создайте новую переменную с именем `ClientSecret` и задайте для параметра **Current value** (Текущее значение) значение "Секрет клиента" из шага 3.17.
6. Создайте новую переменную с именем `TenantID` и задайте для параметра **Current value** (Текущее значение) значение "Идентификатор каталога (клиент)" из шага 3.15.
7. Нажмите **Save (Сохранить)**/**Update (Обновить)**. 
8. Закройте диалоговое окно **Manage Environments** (Управление средами). 
9. Убедитесь, что в раскрывающемся списке выбран вариант **M365 Environment** (Среда M365), а не **No environment** (Нет среды).

## <a name="step-5---get-a-delegated-access-token"></a>Шаг 5. Получение маркера делегированного доступа
Так как вы впервые выполняете запрос в виде делегированного потока проверки подлинности, вам потребуется получить маркер доступа.

1. Наведите курсор на папку **On behalf of a User** (От имени пользователя), щелкните многоточие и выберите **Edit** (Изменить).
2. Щелкните вкладку **Authorization** (Авторизация).
3. Прокрутите страницу вправо и щелкните **Get New Access Token** (Получить новый маркер доступа).
4. Войдите с помощью учетной записи администратора клиента разработчика.
5. Щелкните **Proceed** (Продолжить) и нажмите кнопку **Use Token** (Использовать маркер).
6. В правом нижнем углу диалогового окна щелкните **Update** (Обновить).

Теперь у вас есть действительный маркер доступа для использования в делегированных запросах.

## <a name="step-6---run-your-first-delegated-request"></a>Шаг 6. Выполнение первого делегированного запроса
В папке **On Behalf of a User** (От имени пользователя) расположены запросы различных рабочих нагрузок Microsoft Graph, которые вы можете вызвать.

1. Разверните папку **On Behalf of a User** (От имени пользователя), а затем — папку **Mail** (Почта).
2. Дважды щелкните **Get my messages** (Получить мои сообщения), чтобы создать запрос.
3. В правом верхнем углу нажмите **Send** (Отправить).

Вы успешно выполнили вызов Microsoft Graph с помощью делегированной проверки подлинности.

## <a name="step-7---get-an-application-access-token"></a>Действие 7. Получение маркера доступа приложения
Так как вы впервые выполняете запрос в виде потока проверки подлинности приложения, вам потребуется получить маркер доступа.

1. Наведите курсор на папку **Application** (Приложение), щелкните многоточие и выберите **Edit** (Изменить).
2. Щелкните вкладку **Authorization** (Авторизация).
3. Прокрутите страницу вправо и щелкните **Get New Access Token** (Получить новый маркер доступа).
5. Щелкните **Proceed** (Продолжить) и нажмите кнопку **Use Token** (Использовать маркер).
6. В правом нижнем углу диалогового окна щелкните **Update** (Обновить).

Теперь у вас есть действительный маркер доступа для использования в запросах приложения.

## <a name="step-8---run-your-first-application-request"></a>Шаг 8. Выполнение первого запроса приложения
В папке **Application** (Приложение) расположены запросы различных рабочих нагрузок Microsoft Graph, которые вы можете вызвать.

1. Разверните папку **Application** (Приложение), а затем — папку **User** (Пользователь).
2. Дважды щелкните **Get Users** (Получить пользователей), чтобы создать запрос.
3. В правом верхнем углу нажмите **Send** (Отправить).

Вы успешно выполнили вызов Microsoft Graph с помощью проверки подлинности приложения.

Чтобы осуществить другие запросы в Microsoft Graph, можно выполнить следующие действия. Помните, что для выполнения других запросов вам требуется добавить разрешение для приложения Azure AD. В противном случае в ваших откликах будут возникать ошибки с отказом в получении разрешений.

### <a name="contribute-to-the-collection"></a>Добавление в коллекцию
Если вы хотите добавить собственные запросы, вам потребуется лицензия Postman. Вы можете внести изменения в разветвленную коллекцию, а затем навести курсор на верхний узел коллекции и выбрать пункт **Create pull request** (Создать запрос на вытягивание).

## <a name="see-also"></a>См. также

Чтобы узнать, как это сделать, посмотрите видео [Начало работы с рабочей областью Microsoft Graph Postman](https://youtu.be/3RTHY3jScmA).


