---
title: Компонент входа в Microsoft Graph Toolkit
description: Компонент входа — это кнопка и всплывающий элемент управления, предназначенные для упрощения проверки подлинности платформы удостоверений Майкрософт.
ms.localizationpriority: medium
author: sebastienlevert
ms.openlocfilehash: fedf3a1ec1f49812b14b03d544a73a8a60baaeb3
ms.sourcegitcommit: cc9e5b3630cb84c48bbbb2d84a963b9562d1fb78
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/31/2022
ms.locfileid: "64588822"
---
# <a name="login-component-in-the-microsoft-graph-toolkit"></a>Компонент входа в Microsoft Graph Toolkit

Компонент входа — это кнопка и всплывающий элемент управления, предназначенные для упрощения проверки подлинности платформы удостоверений Майкрософт. Он обеспечивает два состояния:
* Если пользователь не вошел в систему, элемент управления является простой кнопкой для запуска входа в систему.
* Если пользователь вошел в систему, элемент управления отображает имя, изображение профиля и электронную почту вошедшего пользователя. При щелчке открывается всплывающее окно с командой для выхода.

## <a name="example"></a>Пример

В примере ниже показан компонент `mgt-login` с указанием вошедшего пользователя. 

<iframe src="https://mgt.dev/iframe.html?id=components-mgt-login--login&source=docs" height="350"></iframe>

[Открыть этот пример в mgt.dev](https://mgt.dev/?path=/story/components-mgt-login--login&source=docs)

## <a name="using-the-control-without-an-authentication-provider"></a>Использование элемента управления без поставщика проверки подлинности

По умолчанию компонент поддерживает поставщика и Microsoft Graph. Но если вы хотите указать свою логику и проверку подлинности, вы можете воспользоваться свойством `userDetails`, чтобы настроить сведения о вошедшем пользователе. 

| Атрибут | Свойство | Описание |
| --- | --- | -- |
| user-details | userDetails | Настройка объекта пользователя, который будет отображаться в элементе управления. |

В примере ниже настраиваются сведения о пользователе.

```js
let loginControl = document.getElementById('myLoginControl');
loginControl.userDetails = {
    displayName: 'Nikola Metulev',
    mail: 'nikola@contoso.com',
    personImage: 'url'
}
```

Присвоение параметру `userDetails` значения `null` обеспечивает переход к состоянию выхода.

Чтобы обрабатывать вход и выход, используйте события `loginInitiated` и `logoutInitiated`. 

## <a name="css-custom-properties"></a>Настраиваемые свойства CSS

Компонент `mgt-login` определяет следующие настраиваемые свойства CSS.

```css
mgt-login {
  --font-size: 14px;
  --font-weight: 600;
  --weith: '100%';
  --height: '100%';
  --margin: 0;
  --padding: 12px 20px;
  --button-color: #201f1e;
  --button-color--hover: var(--theme-primary-color);
  --button-background-color: transparent;
  --button-background-color--hover: #edebe9;
  --popup-background-color: white;
  --popup-command-font-size: 12px;
  --popup-color: #201f1e;
}
```

Дополнительные сведения см. в статье [Компоненты стиля](../customize-components/style.md).

## <a name="events"></a>События

Из элемента управления инициируются следующие события.

Событие | Когда он излучается | Настраиваемые данные | Отмена | Пузыри | Работает с настраиваемой шаблонной
------|-------------------|--------------|:-----------:|:---------:|:---------------------------:|
`loginInitiated` | Чтобы запустить процесс входа, пользователь нажал кнопку вход в систему. | Нет | Да | Нет | Да
`loginCompleted` | Процесс входа был успешным, и теперь пользователь входит в | Нет | Нет | Нет | Да
`loginFailed` | Пользователь отменил процесс входа или не смог войти | Нет | Нет | Нет | Да
`logoutInitiated` | Пользователь начал выходить на сайт | Нет | Да | Нет | Да
`logoutCompleted` | Пользователь вышел из | Нет | Нет | Нет | Да

Дополнительные сведения об обработке событий см. в [этой информации](../customize-components/events.md).

## <a name="templates"></a>Шаблоны

Компонент `mgt-login` поддерживает несколько [шаблонов](../customize-components/templates.md), позволяющих заменить определенные части компонента. Чтобы указать шаблон, добавьте элемент `<template>` в компонент и присвойте параметру `data-type` одно из значений, указанных в следующей таблице. 

| Тип данных | Контекст данных | Описание |
| --- | --- | --- |
| signed-in-button-content | personDetails: объект пользователя, `personImage`: строка изображения пользователя | Шаблон, используемый для отображения содержимого в кнопке, если пользователь выполнил вход. |
| signed-out-button-content | null | Шаблон, используемый для отображения содержимого в кнопке, если пользователь не выполнил вход. |
| flyout-commands | handleSignOut: функция выхода | Шаблон, используемый для отображения команд во всплывающем окне. |
| flyout-person-details | personDetails: объект пользователя, personImage: строка изображения пользователя | Шаблон, используемый для отображения сведений о пользователе во всплывающем окне. |

## <a name="microsoft-graph-permissions"></a>Разрешения Microsoft Graph

Этот компонент использует следующие API и разрешения Microsoft Graph.

| Конфигурация | Разрешение | API
| - | - | - |
| default | User.Read | [/users/me/](/graph/api/user-get) |

При использовании шаблонов `signed-in-button-content` по `flyout-person-details` умолчанию этот компонент использует компонент [Person](./person.md) для отображения пользователя и наследует все разрешения.

## <a name="authentication"></a>Проверка подлинности

В элементе управления входом используется глобальный поставщик проверки подлинности, описанный в [документации по проверке подлинности](../providers/providers.md). 

## <a name="cache"></a>Кэш

Этот компонент использует [компонент Person](./person.md) для отображения пользователя и наследует всю конфигурацию кэша из него.

## <a name="extend-for-more-control"></a>Расширение для дополнительного управления

В более сложных сценариях или настраиваемых пользовательских интерфейсах этот компонент предоставляет несколько методов `protected render*` для переопределения в расширениях компонента.

| Метод | Описание |
| - | - |
| renderButton | Отображает хром кнопки. |
| renderButtonContent | Отображает содержимое кнопки. |
| renderSignedInButtonContent | Отображение содержимого кнопки, если пользователь выполнил вход. |
| renderSignedOutButtonContent | Отображение содержимого кнопки, если пользователь не выполнил вход. |
| renderFlyout | Отображает хром всплывающего окна. |
| renderFlyoutContent | Отображает содержимое всплывающего окна. |
| renderFlyoutPersonDetails | Отображение сведений о пользователе во всплывающем окне. |
| renderFlyoutCommands | Отображение команд всплывающего окна. |

### <a name="bring-your-own-flyout"></a>Создание собственного всплывающего окна

Можно использовать собственный компонент всплывающего окна вместо встроенного, переопределив метод `renderFlyout()` и предоставив новое всплывающее окно.

В этом случае нужно убедиться, что компонент входа продолжает правильно работать, переопределяя методы отображения всплывающего окна `protected`, чтобы изменить видимость альтернативного всплывающего окна.

| Метод | Описание |
| - | - |
| hideFlyout | Закрывает всплывающее окно. |
| showFlyout | Отображает всплывающее окно. |
| toggleFlyout | Переключает состояние всплывающего окна. |
