---
title: Просмотр изменений библиотеки проверки подлинности приложений
description: Описывает, как обновить использование библиотеки проверки подлинности для переноса приложения из приложений API Azure Active Directory (Azure AD) в API Microsoft Graph API.
author: dkershaw10
ms.localizationpriority: medium
ms.prod: applications
ms.openlocfilehash: 9dfd24bb1bf956ee762c0419bce4866816fdc35e
ms.sourcegitcommit: 6c04234af08efce558e9bf926062b4686a84f1b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2021
ms.locfileid: "59135972"
---
# <a name="review-app-authentication-library-changes"></a>Просмотр изменений библиотеки проверки подлинности приложений

Эта статья является *частью шага 3: просмотрите* сведения о процессе переноса [приложений.](migrate-azure-ad-graph-planning-checklist.md)

Большинство приложений используют библиотеку проверки подлинности для приобретения и управления маркерами доступа для вызова Microsoft Graph.  Корпорация Майкрософт предлагает две библиотеки проверки подлинности:

- [Azure Active Directory проверки подлинности](/azure/active-directory/develop/active-directory-authentication-libraries) (ADAL)
- [Библиотека проверки подлинности Майкрософт](/azure/active-directory/develop/reference-v2-libraries) (MSAL)

## <a name="updating-adal"></a>Обновление ADAL

Если ваше приложение в настоящее время использует ADAL, используйте двух этапный подход к миграции:

1. Обновите приложение, чтобы получить маркеры доступа для Microsoft Graph. Продолжайте использовать ADAL для этого шага. Обновление **ресурсаURL,** в котором содержится URI, представляющий веб-API ресурса, из:

    `https://graph.windows.net`  

    Кому:  

    `https://graph.microsoft.com`

    После этого изменения вновь приобретенные маркеры имеют те же области, но аудитория маркеров доступа теперь Graph.  

    После обновления **resourceURL** и проверки функциональных возможностей выпустите промежуточное обновление, чтобы пользователи могли работать.

1.  Далее приступить к работе, перенося приложение на использование MSAL, которая является поддерживаемой библиотекой для использования перемещения вперед, теперь, когда ADAL не используется.

## <a name="migrating-to-msal"></a>Миграция в MSAL

MSAL предоставляет несколько преимуществ над ADAL, в том числе дополнительным согласием, более богатым опытом единой регистрации, поддержкой личных учетных записей Майкрософт, использованием протоколов на основе стандартов и т. д.  

При переходе приложения на MSAL необходимо внести несколько изменений, в  том числе задав параметр области в запросе на приобретение маркеров:

``` csharp
var scopes = new string[] { "https://graph.microsoft.com/.default" };
```

Вышеуказанное выражение ограничивает область разрешений для тех, кто настроен во время регистрации приложений на портале Azure, и сохраняет существующие пользователи от необходимости повторного согласия на ваше приложение.

См. в справке о переносе [ADAL](https://aka.ms/adal-net-to-msal-net) в MSAL для прямой и обширной помощи в этом процессе, включая устранение неполадок и помощь в устранении распространенных ошибок.

После миграции в MSAL можно динамически запрашивать дополнительные области, и пользователям будет предложено предоставить дополнительное согласие при следующем использовании приложения.

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте [о различиях](migrate-azure-ad-graph-client-libraries.md) клиентской библиотеки .NET между Azure Active Directory (Azure AD) Graph Microsoft Graph.
- Снова [просмотрите контрольный](migrate-azure-ad-graph-planning-checklist.md) список.
