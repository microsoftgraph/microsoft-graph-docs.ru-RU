---
title: Возможности выбора и фильтрации пользователей, поддерживаемые подключением к данным Microsoft Graph
description: Описано, как использовать подключение к данным Microsoft Graph, чтобы выбрать пользователей, для которых нужно извлечь данные, и отфильтровать возвращаемые данные.
author: fercobo-msft
localization_priority: Priority
ms.prod: data-connect
ms.openlocfilehash: c29c088ac4efc7d286e8d10b92edd5bcbac373a6
ms.sourcegitcommit: 276a13a37c3772689dfc71f7cd47586c9581f27d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2021
ms.locfileid: "52629380"
---
# <a name="user-selection-and-filtering-capabilities-in-microsoft-graph-data-connect"></a>Возможности выбора и фильтрации пользователей, поддерживаемые подключением к данным Microsoft Graph

Подключение к данным Microsoft Graph можно использовать, чтобы выбрать пользователей, для которых нужно извлечь данные, и включить фильтры для ограничения возвращаемых данных. В этой статье описаны параметры выбора пользователей, предоставляемые подключением к данным, а также поддерживаемые фильтры.

## <a name="user-selection"></a>Выбор пользователей

Вы можете запустить конвейеры для набора пользователей. Параметры выбора пользователей:

- все пользователи в организации;
- до 10 групп пользователей в организации;
- набор пользователей на основе предиката, состоящего из свойств пользователя Azure Active Directory

Укажите выбор пользователя в SourceDataSet действия копирования фабрики данных Azure. Чтобы выполнить для списка групп, добавьте новое поле **allowedGroups** в разделе **typeProperties** и укажите в нем список параметров **Object Id** не более 10 групп, разделенных запятыми. Если группы по умолчанию не указаны, данные извлекаются для всей организации.

Чтобы указать предикат для выполнения во всем клиенте, добавьте новое поле **userScopeFilterUri** в разделе **typeProperties** и присвойте ему значение предиката. Формат предиката должен совпадать с форматом запроса API Microsoft Graph. Например, если нужно ограничить выбор пользователями, работающими в финансовом отделе, можно использовать `https://graph.microsoft.com/v1.0/users?$filter=Department eq 'Finance'`. Если нужно ограничить выбор одним пользователем, можно использовать `https://graph.microsoft.com/v1.0/users?$filter=mail eq 'contosouser1@contoso.com'`.

Запрос возвращает только пользователей из организации Microsoft 365, в которой выполняется запрос. Гостевые пользователи и почтовые ящики, не относящиеся к пользователям, не возвращаются.

## <a name="filtering"></a>Фильтрация

Вы можете ограничить результаты, извлекаемые для запроса, с помощью свойств даты и времени. В зависимости от типа запрашиваемых данных может потребоваться фильтр даты и времени. Фильтр даты и времени предоставляется с помощью свойств в SourceDataSet действия копирования фабрики данных Azure. Чтобы указать фильтр даты и времени, добавьте новое поле **dateFilterColumn** в разделе **typeProperties** и присвойте ему значение одного из свойств, поддерживающих фильтрацию, из таблицы ниже. Затем добавьте **startTime** и **endTime**, представляющие значения даты и времени, по которым будет фильтроваться свойство.

Следующие наборы данных требуют предоставления фильтра в одном из соответствующих свойств даты и времени.

| Имя набора данных                                               | Свойства, поддерживающие фильтрацию                                           |
| ---------------------------------------------------------- | --------------------------------------------------------------------------- |
| BasicDataSet_v0.Event_v0<br>BasicDataSet_v0.Event_v1       | CreatedDateTime<br>LastModifiedDateTime                                     |
| BasicDataSet_v0.Message_v0<br>BasicDataSet_v0.Message_v1   | CreatedDateTime<br>LastModifiedDateTime<br>ReceivedDateTime<br>SentDateTime |
| BasicDataSet_v0.SentItem_v0<br>BasicDataSet_v0.SentItem_v1 | CreatedDateTime<br>LastModifiedDateTime<br>ReceivedDateTime<br>SentDateTime |

> [!NOTE]
> Конвейеры, запрашивающие свойство BasicDataSet_v0.CalendarView_v0, также требуют фильтр даты и времени, но в SourceDataSet не указывается поле **dateFilterColumn**. Однако свойства **startTime** и **endTime** являются обязательными, и предоставляются только события, начинающиеся после момента **startTime** и завершающиеся до момента **endTime**.

## <a name="see-also"></a>См. также

- [Интеграция с PAM](data-connect-pam.md)
- [Вопросы и ответы о подключении к данным](data-connect-faq.md)
