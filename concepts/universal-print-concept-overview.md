---
title: Обзор API облачной среды универсальной печати
description: Универсальная печать — это современное решение печати, которое можно использовать в организациях для управления инфраструктурой печати через облачные службы от Майкрософт.
author: braedenp-msft
localization_priority: Priority
ms.prod: universal-print
ms.custom: scenarios:getting-started
ms.openlocfilehash: 3d6cadb6b064fcd54432f1f598afbda9c91ae869
ms.sourcegitcommit: 1d2adc4062c8e83d23768682cf66a731bccd313c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/16/2021
ms.locfileid: "49883020"
---
# <a name="universal-print-cloud-printing-api-overview"></a><span data-ttu-id="5cab0-103">Обзор API облачной среды универсальной печати</span><span class="sxs-lookup"><span data-stu-id="5cab0-103">Universal Print cloud printing API overview</span></span>

<span data-ttu-id="5cab0-104">Универсальная печать — это современное решение печати, которое можно использовать в организациях для управления инфраструктурой печати через облачные службы от Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="5cab0-104">Universal Print is a modern print solution that organizations can use to manage their print infrastructure through cloud services from Microsoft.</span></span>

![Снимок экрана с изображением главной страницы универсальной печати на портале Azure](images/universal-print-portal-homepage.png)

## <a name="why-use-universal-print"></a><span data-ttu-id="5cab0-106">Зачем нужна универсальная печать?</span><span class="sxs-lookup"><span data-stu-id="5cab0-106">Why use Universal Print?</span></span>

<span data-ttu-id="5cab0-107">Универсальная печать — это функции печати Windows Server, перенесенные в облако Microsoft 365, благодаря которым организации теперь могут обойтись без локальных серверов печати и не устанавливать драйверы печати на устройствах.</span><span class="sxs-lookup"><span data-stu-id="5cab0-107">Universal Print moves key Windows Server print functionality to the Microsoft 365 cloud, so organizations no longer need on-premises print servers and do not need to install printer drivers on devices.</span></span> <span data-ttu-id="5cab0-108">Кроме того, в рамках универсальной печати предусмотрены дополнительные функции, например, группы безопасности для доступа к принтеру, обнаружение принтеров на основе расположения и расширенными возможностями для администраторов.</span><span class="sxs-lookup"><span data-stu-id="5cab0-108">In addition, Universal Print adds key functionality like security groups for printer access, location-based printer discovery, and a rich administrator experience.</span></span>

<span data-ttu-id="5cab0-109">По мере внедрения универсальной печати в организациях организации и независимые поставщики программного обеспечения могут использовать API универсальной печати в Microsoft Graph, чтобы создавать и расширять приложения для поддержки новых сценариев.</span><span class="sxs-lookup"><span data-stu-id="5cab0-109">As organizations adopt Universal Print, organizations and independent software vendors (ISVs) can use the Universal Print API in Microsoft Graph to build and extend applications to support new scenarios.</span></span>

### <a name="print-documents-from-web-and-mobile-applications"></a><span data-ttu-id="5cab0-110">Печать документов из веб-приложений и мобильных приложений</span><span class="sxs-lookup"><span data-stu-id="5cab0-110">Print documents from web and mobile applications</span></span>

<span data-ttu-id="5cab0-111">Благодаря перемещению инфраструктуры печати в облако печатать документы можно непосредственно из веб-приложений и мобильных приложений.</span><span class="sxs-lookup"><span data-stu-id="5cab0-111">Moving print infrastructure to the cloud enables printing documents directly from web and mobile applications.</span></span>
- <span data-ttu-id="5cab0-112">Пользователи могут отправлять задания печати в printerShare.</span><span class="sxs-lookup"><span data-stu-id="5cab0-112">Users can submit print jobs to printerShare.</span></span>
- <span data-ttu-id="5cab0-113">Кроме того, администраторы принтера могут отправлять задания печати на принтер для выполнения предварительного тестирования, прежде чем предоставить организации общий доступ к принтеру.</span><span class="sxs-lookup"><span data-stu-id="5cab0-113">Printer admins can also submit print jobs to a printer, for doing preliminary testing before sharing the printer with the organization.</span></span>

<span data-ttu-id="5cab0-114">Выполните указанные ниже действия, чтобы отправить задания печати в printerShare.</span><span class="sxs-lookup"><span data-stu-id="5cab0-114">Follow these steps to submit print jobs to printerShare:</span></span>

1. <span data-ttu-id="5cab0-115">[Создайте задание печати](/graph/api/printershare-post-jobs?view=graph-rest-beta) и сохраните идентификатор полученного документа.</span><span class="sxs-lookup"><span data-stu-id="5cab0-115">[Create a print job](/graph/api/printershare-post-jobs?view=graph-rest-beta) and store the resulting document ID.</span></span>
2. <span data-ttu-id="5cab0-116">[Создайте uploadSession](/graph/api/printdocument-createuploadsession?view=graph-rest-beta) для документа.</span><span class="sxs-lookup"><span data-stu-id="5cab0-116">[Create an uploadSession](/graph/api/printdocument-createuploadsession?view=graph-rest-beta) for the document.</span></span> 
3. <span data-ttu-id="5cab0-117">[Отправьте байты в созданный сеанс отправки](./upload-data-to-upload-session.md).</span><span class="sxs-lookup"><span data-stu-id="5cab0-117">[Upload bytes to the created upload session](./upload-data-to-upload-session.md).</span></span>
4. <span data-ttu-id="5cab0-118">[Запустите задание печати](/graph/api/printjob-start?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="5cab0-118">[Start the print job](/graph/api/printjob-start?view=graph-rest-beta).</span></span>

### <a name="manage-printers"></a><span data-ttu-id="5cab0-119">Управление принтерами</span><span class="sxs-lookup"><span data-stu-id="5cab0-119">Manage printers</span></span>

<span data-ttu-id="5cab0-120">Отследить принтеры организации, настройки принтеров и их использование — непростая задача.</span><span class="sxs-lookup"><span data-stu-id="5cab0-120">Keeping track of an organization's printers, printer configurations, and printer usage is a complex task.</span></span> <span data-ttu-id="5cab0-121">Благодаря API универсальной печати можно интегрировать эти три направления.</span><span class="sxs-lookup"><span data-stu-id="5cab0-121">The Universal Print API enables integration in all three areas.</span></span>

* <span data-ttu-id="5cab0-122">**Отслеживать состояние принтеров, их настройки и доступность** можно через [Список принтеров](/graph/api/print-list-printers?view=graph-rest-beta) и [printerStatus](/graph/api/resources/printerstatus?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="5cab0-122">**Keep an eye on printer status, configurations, and availability** by using [List printers](/graph/api/print-list-printers?view=graph-rest-beta) and [printerStatus](/graph/api/resources/printerstatus?view=graph-rest-beta).</span></span>

* <span data-ttu-id="5cab0-123">**Узнать, кто из пользователей использует принтеры и сколько страниц они печатают** можно через отчетные API:</span><span class="sxs-lookup"><span data-stu-id="5cab0-123">**See who's using your printers and how much they're printing** by using the reporting APIs:</span></span>
  * [<span data-ttu-id="5cab0-124">Список dailyPrintUsageSummariesByUser</span><span class="sxs-lookup"><span data-stu-id="5cab0-124">List dailyPrintUsageSummariesByUser</span></span>](/graph/api/reportroot-list-dailyprintusagesummariesbyuser?view=graph-rest-beta)
  * [<span data-ttu-id="5cab0-125">Список monthlyPrintUsageSummariesByUser</span><span class="sxs-lookup"><span data-stu-id="5cab0-125">List monthlyPrintUsageSummariesByUser</span></span>](/graph/api/reportroot-list-monthlyprintusagesummariesbyuser?view=graph-rest-beta)
  * [<span data-ttu-id="5cab0-126">Список dailyPrintUsageSummariesByPrinter</span><span class="sxs-lookup"><span data-stu-id="5cab0-126">List dailyPrintUsageSummariesByPrinter</span></span>](/graph/api/reportroot-list-dailyprintusagesummariesbyprinter?view=graph-rest-beta)
  * [<span data-ttu-id="5cab0-127">Список monthlyPrintUsageSummariesByPrinter</span><span class="sxs-lookup"><span data-stu-id="5cab0-127">List monthlyPrintUsageSummariesByPrinter</span></span>](/graph/api/reportroot-list-monthlyprintusagesummariesbyprinter?view=graph-rest-beta)

* <span data-ttu-id="5cab0-128">**Настройка разрешений для пользователей** через изменения в членстве пользователей и групп касательно принтеров:</span><span class="sxs-lookup"><span data-stu-id="5cab0-128">**Configure user permissions** by modifying user and group membership on printers:</span></span>
  * [<span data-ttu-id="5cab0-129">Список allowedUsers</span><span class="sxs-lookup"><span data-stu-id="5cab0-129">List allowedUsers</span></span>](/graph/api/printershare-list-allowedusers?view=graph-rest-beta)
  * [<span data-ttu-id="5cab0-130">Добавление allowedUser</span><span class="sxs-lookup"><span data-stu-id="5cab0-130">Add allowedUser</span></span>](/graph/api/printershare-post-allowedusers?view=graph-rest-beta)
  * [<span data-ttu-id="5cab0-131">Удаление allowedUser</span><span class="sxs-lookup"><span data-stu-id="5cab0-131">Remove allowedUser</span></span>](/graph/api/printershare-delete-alloweduser?view=graph-rest-beta)
  * [<span data-ttu-id="5cab0-132">Список allowedGroups</span><span class="sxs-lookup"><span data-stu-id="5cab0-132">List allowedGroups</span></span>](/graph/api/printershare-list-allowedgroups?view=graph-rest-beta)
  * [<span data-ttu-id="5cab0-133">Добавление allowedGroup</span><span class="sxs-lookup"><span data-stu-id="5cab0-133">Add allowedGroup</span></span>](/graph/api/printershare-post-allowedgroups?view=graph-rest-beta)
  * [<span data-ttu-id="5cab0-134">Удаление allowedGroup</span><span class="sxs-lookup"><span data-stu-id="5cab0-134">Remove allowedGroup</span></span>](/graph/api/printershare-delete-allowedgroup?view=graph-rest-beta)

### <a name="seamlessly-replace-or-update-printer-hardware"></a><span data-ttu-id="5cab0-135">Комфорт при замене и обновлении оборудования для печати</span><span class="sxs-lookup"><span data-stu-id="5cab0-135">Seamlessly replace or update printer hardware</span></span>

<span data-ttu-id="5cab0-136">Принтеры не видны пользователям до момента, когда они получают к ним [доступ](/graph/api/print-post-shares?view=graph-rest-beta). Это позволяет администраторам детально контролировать доступность определенного оборудования для печати в определенный момент времени.</span><span class="sxs-lookup"><span data-stu-id="5cab0-136">Printers are not visible to users until they are [shared](/graph/api/print-post-shares?view=graph-rest-beta), providing administrators fine-grained control over which printer hardware is available at a given time.</span></span>

<span data-ttu-id="5cab0-137">При общем доступе к принтеру создается ресурс [printerShare](/graph/api/resources/printershare?view=graph-rest-beta), который в любой момент можно обновить для перевода на другой принтер, что упрощает замену неисправного оборудования для печати и отправку принтеров в текущий ремонт.</span><span class="sxs-lookup"><span data-stu-id="5cab0-137">Sharing a printer creates a [printerShare](/graph/api/resources/printershare?view=graph-rest-beta) resource that can be updated at any time to point to a different printer, making it easy to replace broken printer hardware or take printers offline for maintenance.</span></span>

<span data-ttu-id="5cab0-138">Чтобы применить эту возможность в своем приложении, перейдите в [Обновление printerShare](/graph/api/printershare-update?view=graph-rest-beta) и обновите ссылку `printer` на printerShare.</span><span class="sxs-lookup"><span data-stu-id="5cab0-138">To use this in your application, use [Update printerShare](/graph/api/printershare-update?view=graph-rest-beta) to update the printerShare's `printer` reference.</span></span>

### <a name="extending-universal-print-to-support-pull-printing"></a><span data-ttu-id="5cab0-139">Расширение универсальной печати для поддержки печати по запросу</span><span class="sxs-lookup"><span data-stu-id="5cab0-139">Extending Universal Print to support pull printing</span></span>

<span data-ttu-id="5cab0-140">API универсальной печати Microsoft Graph позволяет приложению поддерживать печать по запросу.</span><span class="sxs-lookup"><span data-stu-id="5cab0-140">The Microsoft Graph Universal Print API enables your application to support pull printing.</span></span> <span data-ttu-id="5cab0-141">Чтобы настроить печать по запросу, необходимо зарегистрировать триггеры, уведомляющие приложение (через коммуникацию в рамках уведомления между службами), когда имеют место определенные события печати, такие как запуск задания печати.</span><span class="sxs-lookup"><span data-stu-id="5cab0-141">To set up pull printing, you will register triggers that notify your application (via service-to-service communication) when certain print events happen, such as a print job being started.</span></span>

<span data-ttu-id="5cab0-142">Эти триггеры позволяют приложению прерывать рабочий процесс печати для выполнения таких задач, как перенаправление заданий на различные принтеры и изменение полезных данных документа.</span><span class="sxs-lookup"><span data-stu-id="5cab0-142">These triggers enable your application to interrupt the print workflow to do things such as redirecting jobs to different printers and modifying the document payload.</span></span>

<span data-ttu-id="5cab0-143">Выполните следующие действия, чтобы включить печать по запросу:</span><span class="sxs-lookup"><span data-stu-id="5cab0-143">Follow these steps to enable pull printing:</span></span>

1. <span data-ttu-id="5cab0-144">[Создайте printTaskDefinition](/graph/api/print-post-taskdefinitions?view=graph-rest-beta) с помощью разрешений приложения.</span><span class="sxs-lookup"><span data-stu-id="5cab0-144">[Create a printTaskDefinition](/graph/api/print-post-taskdefinitions?view=graph-rest-beta) using application permissions.</span></span> <span data-ttu-id="5cab0-145">Это абстрактное определение задачи будет использоваться для создания задачи, которая будет содержать задание для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="5cab0-145">This abstract task definition will be used to create task that will hold the job for your application.</span></span> <span data-ttu-id="5cab0-146">Необходимо определить по крайней мере одно определение задачи для каждого клиента, которое можно связать с любым количеством принтеров в клиенте с помощью триггеров задач (см. Шаг 4).</span><span class="sxs-lookup"><span data-stu-id="5cab0-146">You need to define at least one task definition per tenant, which can be associated with any number of printers in the tenant using task triggers (see step 4).</span></span>

2. <span data-ttu-id="5cab0-147">[Зарегистрируйте один виртуальный принтер или более](/graph/api/printer-create?view=graph-rest-beta) с помощью администраторского маркера проверки подлинности и `null` **physicalDeviceId**.</span><span class="sxs-lookup"><span data-stu-id="5cab0-147">[Register one or more virtual printers](/graph/api/printer-create?view=graph-rest-beta) using an administrator authentication token and a `null` **physicalDeviceId**.</span></span> <span data-ttu-id="5cab0-148">"Виртуальный принтер" представляет собой объект принтера в Universal Print без прикрепленного физического устройства.</span><span class="sxs-lookup"><span data-stu-id="5cab0-148">A "virtual printer" is just a printer object in Universal Print without a physical device attached.</span></span> <span data-ttu-id="5cab0-149">Как правило, пользователи выполняют печать на виртуальных принтерах, а затем выбирают свои задания печати на физическом устройстве печати.</span><span class="sxs-lookup"><span data-stu-id="5cab0-149">Usually, users will print to virtual printers and later pick up their print jobs at a physical print device.</span></span> <span data-ttu-id="5cab0-150">См. шаг 6.</span><span class="sxs-lookup"><span data-stu-id="5cab0-150">See step 6.</span></span>

3. <span data-ttu-id="5cab0-151">[Обновляйте атрибуты вашего виртуального принтера](/graph/api/printer-update?view=graph-rest-beta) с помощью разрешений приложения и типа носителя `application/ipp` (см. примеры).</span><span class="sxs-lookup"><span data-stu-id="5cab0-151">[Update the attributes of your virtual printer](/graph/api/printer-update?view=graph-rest-beta) by using application permissions and an `application/ipp` media type (see examples).</span></span>

4. <span data-ttu-id="5cab0-152">[Создайте триггер задачи для вашего виртуального принтера](/graph/api/printer-post-tasktriggers?view=graph-rest-beta) с помощью администраторского маркера проверки подлинности, который будет использоваться для сопоставления определения задачи с виртуальным принтером.</span><span class="sxs-lookup"><span data-stu-id="5cab0-152">[Create a task trigger for your virtual printer](/graph/api/printer-post-tasktriggers?view=graph-rest-beta) using an administrator authentication token that will associate your task definition with virtual printer.</span></span>

5. <span data-ttu-id="5cab0-153">При отправке задания печати на виртуальный принтер оно будет приостановлено по причине [printTaskTrigger](/graph/api/resources/printtasktrigger?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="5cab0-153">When a print job is submitted to the virtual printer, it will be paused due to the [printTaskTrigger](/graph/api/resources/printtasktrigger?view=graph-rest-beta).</span></span> <span data-ttu-id="5cab0-154">Будут созданы [printTask](/graph/api/resources/printtask?view=graph-rest-beta) с состоянием `processing` на основе связанного [printTaskDefinition](/graph/api/resources/printtaskdefinition?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="5cab0-154">A [printTask](/graph/api/resources/printtask?view=graph-rest-beta) with `processing` state will be created based on the associated [printTaskDefinition](/graph/api/resources/printtaskdefinition?view=graph-rest-beta).</span></span>

6. <span data-ttu-id="5cab0-155">При прокрутке пользователем эмблемы на физическом принтере, принтер уведомит ваше приложение.</span><span class="sxs-lookup"><span data-stu-id="5cab0-155">When the user swipes a badge at a physical printer device, the printer will notify your application.</span></span> <span data-ttu-id="5cab0-156">В это время приложение может [получить задания связанного виртуального принтера](/graph/api/printer-list-jobs?view=graph-rest-beta) и отфильтровать список на задания, созданные текущим пользователем.</span><span class="sxs-lookup"><span data-stu-id="5cab0-156">At that time, your application can [fetch the jobs of the associated virtual printer](/graph/api/printer-list-jobs?view=graph-rest-beta) and filter the list to jobs created by the current user.</span></span>

7. <span data-ttu-id="5cab0-157">При выборе пользователем одного или нескольких заданий для печати, приложение может [перенаправить задание (-я) печати](/graph/api/printjob-redirect?view=graph-rest-beta) на физический принтер, и задание запустит печать.</span><span class="sxs-lookup"><span data-stu-id="5cab0-157">When the user selects one or more jobs to print, your application can [redirect the print job(s)](/graph/api/printjob-redirect?view=graph-rest-beta) to the physical printer and the job will start printing!</span></span> <span data-ttu-id="5cab0-158">Вызов на перенаправление будет успешным только в том случае, если присутствует [printTask](/graph/api/resources/printtask?view=graph-rest-beta) в состоянии `processing` в связанном принтере, запущенном триггером, который был создан этим приложением в Шаге 4.</span><span class="sxs-lookup"><span data-stu-id="5cab0-158">The redirect call will only succeed if there is a [printTask](/graph/api/resources/printtask?view=graph-rest-beta) in `processing` state on the associated printer started by a trigger that this app created in step 4.</span></span> <span data-ttu-id="5cab0-159">После перенаправления задания, задача автоматически будет настроена на состояние `completed`.</span><span class="sxs-lookup"><span data-stu-id="5cab0-159">The task will automatically be set to `completed` state after redirecting it.</span></span>

## <a name="api-reference"></a><span data-ttu-id="5cab0-160">Справочные материалы по API</span><span class="sxs-lookup"><span data-stu-id="5cab0-160">API reference</span></span>
<span data-ttu-id="5cab0-161">Ищете справочные материалы по API для этой службы?</span><span class="sxs-lookup"><span data-stu-id="5cab0-161">Looking for the API reference for this service?</span></span>

- [<span data-ttu-id="5cab0-162">API универсальной печати в бета-версии Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="5cab0-162">Universal Print API in Microsoft Graph beta</span></span>](/graph/api/resources/print?view=graph-rest-beta)

## <a name="provide-feedback"></a><span data-ttu-id="5cab0-163">Предоставление отзывов</span><span class="sxs-lookup"><span data-stu-id="5cab0-163">Provide feedback</span></span>

<span data-ttu-id="5cab0-164">Мы будем рады узнать ваше мнение об API универсальной печати.</span><span class="sxs-lookup"><span data-stu-id="5cab0-164">We'd love to hear your feedback about the Universal Print APIs.</span></span> <span data-ttu-id="5cab0-165">Предоставьте свои предложения на сайте [UserVoice](https://microsoftgraph.uservoice.com/forums/920506-microsoft-graph-feature-requests).</span><span class="sxs-lookup"><span data-stu-id="5cab0-165">Provide your suggestions on [UserVoice](https://microsoftgraph.uservoice.com/forums/920506-microsoft-graph-feature-requests).</span></span>

## <a name="see-also"></a><span data-ttu-id="5cab0-166">См. также</span><span class="sxs-lookup"><span data-stu-id="5cab0-166">See also</span></span>

- [<span data-ttu-id="5cab0-167">Что такое универсальная печать</span><span class="sxs-lookup"><span data-stu-id="5cab0-167">What is Universal Print</span></span>](/universal-print/fundamentals/universal-print-whatis)