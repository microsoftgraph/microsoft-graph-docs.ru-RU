---
title: Авторизация для API с целью чтения отчетов об использовании Microsoft 365
description: Отчеты об использовании Microsoft 365 защищаются как разрешениями, так и ролями Azure Active Directory (Azure AD). Узнайте, как назначить роль пользователю.
author: kszb
ms.localizationpriority: high
ms.prod: reports
ms.openlocfilehash: 3ac9df517918b68d8d59339902ee9a6e44706b20
ms.sourcegitcommit: b2b3c3ae00f9e2e0bb2dcff30e97b60ccdebf170
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/29/2022
ms.locfileid: "66437648"
---
# <a name="authorization-for-apis-to-read-microsoft-365-usage-reports"></a>Авторизация для API с целью чтения отчетов об использовании Microsoft 365

Данные отчетов, доступные через API отчетов Microsoft Graph, являются конфиденциальными. В частности, отчеты об использовании Microsoft 365 защищаются как разрешениями, так и ролями Azure Active Directory (Azure AD). Сведения этой статьи относятся к API-интерфейсу отчетов, считывающему отчеты об использовании Microsoft 365.

API для чтения отчетов об использовании Microsoft 365 поддерживают два типа авторизации:

- **Авторизация на уровне приложения**. Позволяет приложению читать все отчеты об использовании без необходимости входа пользователя. Разрешения, предоставленные приложению, определяют авторизацию.
- **Авторизация, делегированная пользователю**. Позволяет приложению читать все отчеты об использовании служб от имени вошедшего пользователя. Помимо предоставления необходимых разрешений приложению, пользователь должен быть участником с ролью ограниченного администратора Azure AD. Это может быть одна из следующих ролей: администратор компании, администратор Exchange, администратор SharePoint, администратор Lync, администратор службы Teams, администратор связи Teams, глобальный читатель, читатель сводных отчетов об использовании или читатель отчетов. Роли глобального читателя и читателя сводных отчетов о об использовании будут иметь доступ только к данным на уровне клиента без доступа к детальным метрикам.

При вызове API из песочницы Graph:

- Администратор клиента Azure AD должен явным образом предоставить согласие на требуемые разрешения для приложения песочницы Graph.
- Пользователь должен быть участником с ролью ограниченного администратора в Azure AD, указанной выше для авторизации, делегированной пользователю.

> [!NOTE]
> Песочница Graph не поддерживает авторизацию на уровне приложения.

При вызове API из приложения:

- Администратор клиента Azure AD должен явным образом предоставить разрешение для вашего приложения. Это необходимо как для авторизации на уровне приложения, так и для авторизации, делегированной пользователю.
- При использовании авторизации, делегированной пользователю, вошедший пользователь должен быть участником с ролью ограниченного администратора в Azure AD.

## <a name="assign-azure-ad-roles-to-users"></a>Назначение ролей Azure AD для пользователей

После получения приложением разрешений все обладатели доступа к приложению (т. е. участники клиента Azure AD) получат предоставленные разрешения. Чтобы обеспечить дополнительную защиту конфиденциальных данных отчетов, администраторы клиента должны назначить пользователям приложения соответствующие роли Azure AD. Подробности см. в статьях [Разрешения роли администратора в Azure Active Directory](/azure/active-directory/active-directory-assign-admin-roles-azure-portal) и [Назначение ролей администратора и других ролей пользователям с помощью Azure Active Directory](/azure/active-directory/active-directory-users-assign-role-azure-portal).

> [!NOTE]
> Вы должны быть администратором клиента, чтобы выполнить это действие.

Назначение роли пользователю:

1. Войдите на [портал Azure](https://portal.azure.com) (https://portal.azure.com).
2. Щелкните значок в левом верхнем углу, чтобы развернуть меню портала Azure. Выберите **Azure Active Directory** > **Пользователи**.
3. Щелкните имя пользователя.
4. Выберите **Назначенные роли**, затем **Добавление назначения**.
5. Выберите соответствующую роль и нажмите кнопку **Добавить**.
