---
title: Настройка ответов с помощью параметров запроса
description: В Microsoft Graph предусмотрены необязательные параметры запросов, с помощью которых можно указывать и регулировать объем возвращаемых данных.
author: mumbi-o
localization_priority: Priority
ms.custom: graphiamtop20, scenarios:getting-started
ms.openlocfilehash: a30b4576740147ab6456d55ee5e123b12ec411cc
ms.sourcegitcommit: 3873c85f53e026073addca92d31d234af244444c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/10/2021
ms.locfileid: "53366508"
---
# <a name="use-query-parameters-to-customize-responses"></a><span data-ttu-id="027aa-103">Настройка ответов с помощью параметров запроса</span><span class="sxs-lookup"><span data-stu-id="027aa-103">Use query parameters to customize responses</span></span>

<span data-ttu-id="027aa-104">В Microsoft Graph поддерживаются необязательные параметры запросов, с помощью которых можно указывать и регулировать объем возвращаемых данных.</span><span class="sxs-lookup"><span data-stu-id="027aa-104">Microsoft Graph supports optional query parameters that you can use to specify and control the amount of data returned in a response.</span></span> <span data-ttu-id="027aa-105">Поддержка определенных параметров запросов варьируется для разных операций API и в зависимости от API может отличаться в конечных точках версии 1.0 и бета-версии.</span><span class="sxs-lookup"><span data-stu-id="027aa-105">The support for the exact query parameters varies from one API operation to another, and depending on the API, can differ between the v1.0 and beta endpoints.</span></span>

> [!TIP] 
> <span data-ttu-id="027aa-106">В конечной точке бета-версии префикс `$` является необязательным.</span><span class="sxs-lookup"><span data-stu-id="027aa-106">On the beta endpoint, the `$` prefix is optional.</span></span> <span data-ttu-id="027aa-107">Например, вместо `$filter` можно использовать `filter`.</span><span class="sxs-lookup"><span data-stu-id="027aa-107">For example, instead of `$filter`, you can use `filter`.</span></span> <span data-ttu-id="027aa-108">В конечной точке версии 1 префикс `$` является необязательным только для подмножества API-интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="027aa-108">On the v1 endpoint, the `$` prefix is optional for only a subset of APIs.</span></span> <span data-ttu-id="027aa-109">Для простоты всегда включайте `$`, если используется конечная точка версии 1.</span><span class="sxs-lookup"><span data-stu-id="027aa-109">For simplicity, always include `$` if using the v1 endpoint.</span></span>

<span data-ttu-id="027aa-110">Параметрами запроса могут быть системные параметры запроса OData или другие параметры запроса.</span><span class="sxs-lookup"><span data-stu-id="027aa-110">Query parameters can be OData system query options or other query parameters.</span></span> 

> [!VIDEO https://www.youtube-nocookie.com/embed/7BuFv3yETi4]

## <a name="odata-system-query-options"></a><span data-ttu-id="027aa-111">Системные параметры запроса OData</span><span class="sxs-lookup"><span data-stu-id="027aa-111">OData system query options</span></span>
<span data-ttu-id="027aa-112">API Microsoft Graph может поддерживать один или несколько из указанных ниже системных параметров запроса OData.</span><span class="sxs-lookup"><span data-stu-id="027aa-112">A Microsoft Graph API operation might support one or more of the following OData system query options.</span></span> <span data-ttu-id="027aa-113">Эти параметры запроса совместимы с [языком запросов OData версии 4][odata-query].</span><span class="sxs-lookup"><span data-stu-id="027aa-113">These query options are compatible with the [OData V4 query language][odata-query].</span></span>

><span data-ttu-id="027aa-114">**Примечание.** OData 4.0 поддерживает системные параметры запросов только в операциях GET.</span><span class="sxs-lookup"><span data-stu-id="027aa-114">**Note:** OData 4.0 supports system query options in only GET operations.</span></span>

<span data-ttu-id="027aa-115">Щелкните примеры, чтобы попробовать поработать с ними в [песочнице Graph][graph-explorer].</span><span class="sxs-lookup"><span data-stu-id="027aa-115">Click the examples to try them in [Graph Explorer][graph-explorer].</span></span>

| <span data-ttu-id="027aa-116">Имя</span><span class="sxs-lookup"><span data-stu-id="027aa-116">Name</span></span>                     | <span data-ttu-id="027aa-117">Описание</span><span class="sxs-lookup"><span data-stu-id="027aa-117">Description</span></span> | <span data-ttu-id="027aa-118">Пример</span><span class="sxs-lookup"><span data-stu-id="027aa-118">Example</span></span>
|:-------------------------|:------------|:---------|
| [<span data-ttu-id="027aa-119">$count</span><span class="sxs-lookup"><span data-stu-id="027aa-119">$count</span></span>](#count-parameter)         | <span data-ttu-id="027aa-120">Возвращает общее количество соответствующих ресурсов.</span><span class="sxs-lookup"><span data-stu-id="027aa-120">Retrieves the total count of matching resources.</span></span> | [`/me/messages?$top=2&$count=true`][count-example]
| [<span data-ttu-id="027aa-121">$expand</span><span class="sxs-lookup"><span data-stu-id="027aa-121">$expand</span></span>](#expand-parameter)       | <span data-ttu-id="027aa-122">Получает связанные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="027aa-122">Retrieves related resources.</span></span>|<span data-ttu-id="027aa-123">[`/groups?$expand=members`][expand-example]</span><span class="sxs-lookup"><span data-stu-id="027aa-123">[`/groups?$expand=members`][expand-example]</span></span>
| [<span data-ttu-id="027aa-124">$filter</span><span class="sxs-lookup"><span data-stu-id="027aa-124">$filter</span></span>](#filter-parameter)       | <span data-ttu-id="027aa-125">Фильтрует результаты (строки).</span><span class="sxs-lookup"><span data-stu-id="027aa-125">Filters results (rows).</span></span>|<span data-ttu-id="027aa-126">[`/users?$filter=startswith(givenName,'J')`][filter-example]</span><span class="sxs-lookup"><span data-stu-id="027aa-126">[`/users?$filter=startswith(givenName,'J')`][filter-example]</span></span>
| [<span data-ttu-id="027aa-127">$format</span><span class="sxs-lookup"><span data-stu-id="027aa-127">$format</span></span>](#format-parameter)       | <span data-ttu-id="027aa-128">Возвращает результаты в указанном формате мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="027aa-128">Returns the results in the specified media format.</span></span>|<span data-ttu-id="027aa-129">[`/users?$format=json`][format-example]</span><span class="sxs-lookup"><span data-stu-id="027aa-129">[`/users?$format=json`][format-example]</span></span>
| [<span data-ttu-id="027aa-130">$orderby</span><span class="sxs-lookup"><span data-stu-id="027aa-130">$orderby</span></span>](#orderby-parameter)     | <span data-ttu-id="027aa-131">Упорядочивает результаты.</span><span class="sxs-lookup"><span data-stu-id="027aa-131">Orders results.</span></span>|<span data-ttu-id="027aa-132">[`/users?$orderby=displayName desc`][orderby-example]</span><span class="sxs-lookup"><span data-stu-id="027aa-132">[`/users?$orderby=displayName desc`][orderby-example]</span></span>
| [<span data-ttu-id="027aa-133">$search</span><span class="sxs-lookup"><span data-stu-id="027aa-133">$search</span></span>](#search-parameter)       | <span data-ttu-id="027aa-134">Возвращает результаты на основании условий поиска.</span><span class="sxs-lookup"><span data-stu-id="027aa-134">Returns results based on search criteria.</span></span> |<span data-ttu-id="027aa-135">[`/me/messages?$search=pizza`][search-example]</span><span class="sxs-lookup"><span data-stu-id="027aa-135">[`/me/messages?$search=pizza`][search-example]</span></span>
| [<span data-ttu-id="027aa-136">$select</span><span class="sxs-lookup"><span data-stu-id="027aa-136">$select</span></span>](#select-parameter)       | <span data-ttu-id="027aa-137">Фильтрует свойства (столбцы).</span><span class="sxs-lookup"><span data-stu-id="027aa-137">Filters properties (columns).</span></span>|<span data-ttu-id="027aa-138">[`/users?$select=givenName,surname`][select-example]</span><span class="sxs-lookup"><span data-stu-id="027aa-138">[`/users?$select=givenName,surname`][select-example]</span></span>
| [<span data-ttu-id="027aa-139">$skip</span><span class="sxs-lookup"><span data-stu-id="027aa-139">$skip</span></span>](#skip-parameter)           | <span data-ttu-id="027aa-p104">Применяется для индексации в результирующем наборе. Также используется некоторыми API для разбиения по страницам и может использоваться вместе с параметром `$top` для разбиения результатов по страницам вручную.</span><span class="sxs-lookup"><span data-stu-id="027aa-p104">Indexes into a result set. Also used by some APIs to implement paging and can be used together with `$top` to manually page results.</span></span> | <span data-ttu-id="027aa-142">[`/me/messages?$skip=11`][skip-example]</span><span class="sxs-lookup"><span data-stu-id="027aa-142">[`/me/messages?$skip=11`][skip-example]</span></span>
| [<span data-ttu-id="027aa-143">$top</span><span class="sxs-lookup"><span data-stu-id="027aa-143">$top</span></span>](#top-parameter)             | <span data-ttu-id="027aa-144">Задает размер страницы результатов.</span><span class="sxs-lookup"><span data-stu-id="027aa-144">Sets the page size of results.</span></span> |<span data-ttu-id="027aa-145">[`/users?$top=2`][top-example]</span><span class="sxs-lookup"><span data-stu-id="027aa-145">[`/users?$top=2`][top-example]</span></span>


## <a name="other-query-parameters"></a><span data-ttu-id="027aa-146">Другие параметры запроса</span><span class="sxs-lookup"><span data-stu-id="027aa-146">Other query parameters</span></span>

| <span data-ttu-id="027aa-147">Имя</span><span class="sxs-lookup"><span data-stu-id="027aa-147">Name</span></span>                     | <span data-ttu-id="027aa-148">Описание</span><span class="sxs-lookup"><span data-stu-id="027aa-148">Description</span></span> | <span data-ttu-id="027aa-149">Пример</span><span class="sxs-lookup"><span data-stu-id="027aa-149">Example</span></span>
|:-------------------------|:------------|:---------|
| [<span data-ttu-id="027aa-150">$skipToken</span><span class="sxs-lookup"><span data-stu-id="027aa-150">$skipToken</span></span>](#skiptoken-parameter) | <span data-ttu-id="027aa-p105">Возвращает следующую страницу результатов из результирующих наборов, занимающих несколько страниц. (Вместо этого параметра некоторые API используют `$skip`.)</span><span class="sxs-lookup"><span data-stu-id="027aa-p105">Retrieves the next page of results from result sets that span multiple pages. (Some APIs use `$skip` instead.)</span></span> | `/users?$skiptoken=X%274453707402000100000017...`|

## <a name="other-odata-url-capabilities"></a><span data-ttu-id="027aa-153">Другие возможности URL-адресов OData</span><span class="sxs-lookup"><span data-stu-id="027aa-153">Other OData URL capabilities</span></span>

<span data-ttu-id="027aa-154">Следующие возможности OData 4.0 являются сегментами URL-адресов, а не параметрами запросов.</span><span class="sxs-lookup"><span data-stu-id="027aa-154">The following OData 4.0 capabilities are URL segments, not query parameters.</span></span>

| <span data-ttu-id="027aa-155">Имя</span><span class="sxs-lookup"><span data-stu-id="027aa-155">Name</span></span>                     | <span data-ttu-id="027aa-156">Описание</span><span class="sxs-lookup"><span data-stu-id="027aa-156">Description</span></span> | <span data-ttu-id="027aa-157">Пример</span><span class="sxs-lookup"><span data-stu-id="027aa-157">Example</span></span> 
|:-------------------------|:------------|:---------|
| [<span data-ttu-id="027aa-158">$count</span><span class="sxs-lookup"><span data-stu-id="027aa-158">$count</span></span>](/graph/api/user-list#example-3-get-only-a-count-of-users)| <span data-ttu-id="027aa-159">Получает целочисленную сумму коллекции.</span><span class="sxs-lookup"><span data-stu-id="027aa-159">Retrieves the integer total of the collection.</span></span> | `GET /users/$count` <br> `GET /groups/{id}/members/$count`|
| [<span data-ttu-id="027aa-160">$ref</span><span class="sxs-lookup"><span data-stu-id="027aa-160">$ref</span></span>](/graph/api/group-post-members) | <span data-ttu-id="027aa-161">Обновляет принадлежность объектов к коллекции.</span><span class="sxs-lookup"><span data-stu-id="027aa-161">Updates entities membership to a collection.</span></span> | `POST /groups/{id}/members/$ref` |
| [<span data-ttu-id="027aa-162">$value</span><span class="sxs-lookup"><span data-stu-id="027aa-162">$value</span></span>](/graph/api/profilephoto-get) | <span data-ttu-id="027aa-163">Возвращает или обновляет двоичное значение элемента.</span><span class="sxs-lookup"><span data-stu-id="027aa-163">Retrieves or updates the binary value of an item.</span></span> | `GET /me/photo/$value` |

## <a name="encoding-query-parameters"></a><span data-ttu-id="027aa-164">Кодирование параметров запроса</span><span class="sxs-lookup"><span data-stu-id="027aa-164">Encoding query parameters</span></span>

<span data-ttu-id="027aa-165">К значениям параметров запросов нужно применить процентное кодирование.</span><span class="sxs-lookup"><span data-stu-id="027aa-165">The values of query parameters should be percent-encoded.</span></span> <span data-ttu-id="027aa-166">Многие клиенты HTTP, браузеры и инструменты (например, [песочница Graph][graph-explorer]) помогут вам в этом.</span><span class="sxs-lookup"><span data-stu-id="027aa-166">Many HTTP clients, browsers, and tools (such as the [Graph Explorer][graph-explorer]) will help you with this.</span></span> <span data-ttu-id="027aa-167">Если запрос неудачный, одна из возможных причин — не удалось должным образом закодировать значения параметров запросов.</span><span class="sxs-lookup"><span data-stu-id="027aa-167">If a query is failing, one possible cause is failure to encode the query parameter values appropriately.</span></span>

<span data-ttu-id="027aa-168">URL-адрес, который не было закодирован, выглядит так:</span><span class="sxs-lookup"><span data-stu-id="027aa-168">An unencoded URL looks like this:</span></span>

```http
GET https://graph.microsoft.com/v1.0/users?$filter=startswith(givenName, 'J')
```

<span data-ttu-id="027aa-169">Закодированный должным образом URL-адрес выглядит так:</span><span class="sxs-lookup"><span data-stu-id="027aa-169">A properly encoded URL looks like this:</span></span>

```http
GET https://graph.microsoft.com/v1.0/users?$filter=startswith(givenName%2C+'J')
```

### <a name="escaping-single-quotes"></a><span data-ttu-id="027aa-170">Пропуск одинарных кавычек</span><span class="sxs-lookup"><span data-stu-id="027aa-170">Escaping single quotes</span></span>

<span data-ttu-id="027aa-171">В запросах, использующих одинарные кавычки, если любой параметр также содержит одинарные кавычки, их нужно пропустить дважды; в противном случае запрос завершится сбоем из-за недопустимого синтаксиса.</span><span class="sxs-lookup"><span data-stu-id="027aa-171">For requests that use single quotes, if any parameter values also contain single quotes, those must be double escaped; otherwise, the request will fail due to invalid syntax.</span></span> <span data-ttu-id="027aa-172">В приведенном примере строковое значение `let''s meet for lunch?` содержит пропускаемую одинарную кавычку.</span><span class="sxs-lookup"><span data-stu-id="027aa-172">In the example, the string value `let''s meet for lunch?` has the single quote escaped.</span></span>

```http
GET https://graph.microsoft.com/v1.0/me/messages?$filter=subject eq 'let''s meet for lunch?'
```

## <a name="count-parameter"></a><span data-ttu-id="027aa-173">Параметр count</span><span class="sxs-lookup"><span data-stu-id="027aa-173">count parameter</span></span>

<span data-ttu-id="027aa-174">Параметр запроса `$count` позволяет включить общее количество элементов коллекции вместе со страницей значений, возвращенных из Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="027aa-174">Use the `$count` query parameter to include a count of the total number of items in a collection alongside the page of data values returned from Microsoft Graph.</span></span>

> [!NOTE]
> <span data-ttu-id="027aa-175">Можно также использовать `$count` в качестве [сегмента URL-адреса](#other-odata-url-capabilities) для получения целочисленной суммы коллекции.</span><span class="sxs-lookup"><span data-stu-id="027aa-175">`$count` can also be used as a [URL segment](#other-odata-url-capabilities) to retrieve the integer total of the collection.</span></span> <span data-ttu-id="027aa-176">Для ресурсов, производных от [directoryObject](/graph/api/resources/directoryobject), это возможно только в [расширенных запросах](/graph/aad-advanced-queries).</span><span class="sxs-lookup"><span data-stu-id="027aa-176">On resources that derive from [directoryObject](/graph/api/resources/directoryobject), is it only supported in an [advanced query](/graph/aad-advanced-queries).</span></span> <span data-ttu-id="027aa-177">См. [Расширенные возможности запросов для объектов каталога Azure AD](/graph/aad-advanced-queries).</span><span class="sxs-lookup"><span data-stu-id="027aa-177">See [Advanced query capabilities in Azure AD directory objects](/graph/aad-advanced-queries).</span></span>
>
> <span data-ttu-id="027aa-178">Использование `$count` не поддерживается в клиентах Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="027aa-178">Use of `$count` is not supported in Azure AD B2C tenants.</span></span>

<span data-ttu-id="027aa-179">Например, приведенный ниже запрос возвращает коллекцию **contact** текущего пользователя, а также ряд элементов коллекции **contact** в свойстве `@odata.count`.</span><span class="sxs-lookup"><span data-stu-id="027aa-179">For example, the following request returns both the **contact** collection of the current user, and the number of items in the **contact** collection in the `@odata.count` property.</span></span>

```msgraph-interactive
GET  https://graph.microsoft.com/v1.0/me/contacts?$count=true
```

<span data-ttu-id="027aa-180">Параметр запроса `$count` поддерживается для таких коллекций ресурсов и их отношений, которые являются производными от [directoryObject](/graph/api/resources/directoryobject), и только в [расширенных запросах](/graph/filter-directory-objects).</span><span class="sxs-lookup"><span data-stu-id="027aa-180">The `$count` query parameter is supported for these collections of resources and their relationships that derive from [directoryObject](/graph/api/resources/directoryobject) and only in [advanced queries](/graph/filter-directory-objects):</span></span>
- [<span data-ttu-id="027aa-181">application</span><span class="sxs-lookup"><span data-stu-id="027aa-181">application</span></span>](/graph/api/resources/application)
- [<span data-ttu-id="027aa-182">orgContact</span><span class="sxs-lookup"><span data-stu-id="027aa-182">orgContact</span></span>](/graph/api/resources/orgcontact)
- [<span data-ttu-id="027aa-183">device</span><span class="sxs-lookup"><span data-stu-id="027aa-183">device</span></span>](/graph/api/resources/device)
- [<span data-ttu-id="027aa-184">group</span><span class="sxs-lookup"><span data-stu-id="027aa-184">group</span></span>](/graph/api/resources/group)
- [<span data-ttu-id="027aa-185">servicePrincipal</span><span class="sxs-lookup"><span data-stu-id="027aa-185">servicePrincipal</span></span>](/graph/api/resources/serviceprincipal)
- [<span data-ttu-id="027aa-186">users</span><span class="sxs-lookup"><span data-stu-id="027aa-186">users</span></span>](/graph/api/resources/user)

## <a name="expand-parameter"></a><span data-ttu-id="027aa-187">Параметр expand</span><span class="sxs-lookup"><span data-stu-id="027aa-187">expand parameter</span></span>

<span data-ttu-id="027aa-188">Многие ресурсы Microsoft Graph возвращают как объявленные свойства ресурса, так и его связи с другими ресурсами.</span><span class="sxs-lookup"><span data-stu-id="027aa-188">Many Microsoft Graph resources expose both declared properties of the resource as well as its relationships with other resources.</span></span> <span data-ttu-id="027aa-189">Эти связи также называются свойствами ссылки или навигации и могут ссылаться как на один ресурс, так и на коллекцию ресурсов.</span><span class="sxs-lookup"><span data-stu-id="027aa-189">These relationships are also called reference properties or navigation properties, and they can reference either a single resource or a collection of resources.</span></span> <span data-ttu-id="027aa-190">Например, папки почты, руководитель и подчиненные пользователя выводятся как связи.</span><span class="sxs-lookup"><span data-stu-id="027aa-190">For example, the mail folders, manager, and direct reports of a user are all exposed as relationships.</span></span> 

<span data-ttu-id="027aa-191">Как правило, в одном запросе можно отдельно (но не одновременно) запросить или свойства ресурса, или одно из отношений.</span><span class="sxs-lookup"><span data-stu-id="027aa-191">Normally, you can query either the properties of a resource or one of its relationships in a single request, but not both.</span></span> <span data-ttu-id="027aa-192">С помощью строкового параметра запроса `$expand` в результаты можно включить расширенный ресурс или коллекцию, на которые ссылается одно отношение (свойство навигации).</span><span class="sxs-lookup"><span data-stu-id="027aa-192">You can use the `$expand` query string parameter to include the expanded resource or collection referenced by a single relationship (navigation property) in your results.</span></span> <span data-ttu-id="027aa-193">В одном запросе можно развернуть только одно отношение.</span><span class="sxs-lookup"><span data-stu-id="027aa-193">Only one relationship can be expanded in a single request.</span></span>

<span data-ttu-id="027aa-194">В приведенном ниже примере возвращаются сведения о корневом каталоге, а также дочерние элементы верхнего уровня на диске.</span><span class="sxs-lookup"><span data-stu-id="027aa-194">The following example gets root drive information along with the top-level child items in a drive:</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/me/drive/root?$expand=children
```


<span data-ttu-id="027aa-p111">Кроме того, некоторые коллекции ресурсов позволяют указывать свойства, которые должны быть возвращены в расширенных ресурсах, благодаря параметру `$select`. В следующем примере выполняется тот же запрос, что и в предыдущем, но используется оператор [`$select`](#select-parameter), с помощью которого для расширенных дочерних элементов возвращаются только свойства **id** и **name**.</span><span class="sxs-lookup"><span data-stu-id="027aa-p111">With some resource collections, you can also specify the properties to be returned in the expanded resources by adding a `$select` parameter. The following example performs the same query as the previous example but uses a [`$select`](#select-parameter) statement to limit the properties returned for the expanded child items to the **id** and **name** properties.</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/me/drive/root?$expand=children($select=id,name)
```

> [!NOTE]
> <span data-ttu-id="027aa-197">Не все отношения и ресурсы поддерживают параметр запроса `$expand`.</span><span class="sxs-lookup"><span data-stu-id="027aa-197">Not all relationships and resources support the `$expand` query parameter.</span></span> <span data-ttu-id="027aa-198">Например, можно развернуть отношения **directReports**, **manager**, and **memberOf** для пользователя, но невозможно развернуть отношения **events**, **messages** и **photo**.</span><span class="sxs-lookup"><span data-stu-id="027aa-198">For example, you can expand the **directReports**, **manager**, and **memberOf** relationships on a user, but you cannot expand its **events**, **messages**, or **photo** relationships.</span></span> <span data-ttu-id="027aa-199">Не все ресурсы и отношения поддерживают использование параметра `$select` для развернутых элементов.</span><span class="sxs-lookup"><span data-stu-id="027aa-199">Not all resources or relationships support using `$select` on expanded items.</span></span> 
> 
> <span data-ttu-id="027aa-200">С ресурсами Azure AD, производными от [directoryObject](/graph/api/resources/directoryobject), такими как [user](/graph/api/resources/user) и [group](/graph/api/resources/group), `$expand` обычно возвращает не более 20 элементов для расширенных отношений и не содержит [@odata.nextLink](./paging.md).</span><span class="sxs-lookup"><span data-stu-id="027aa-200">With Azure AD resources that derive from [directoryObject](/graph/api/resources/directoryobject), like [user](/graph/api/resources/user) and [group](/graph/api/resources/group), `$expand` typically returns a maximum of 20 items for the expanded relationship and has no [@odata.nextLink](./paging.md).</span></span> <span data-ttu-id="027aa-201">См. другие [известные проблемы](known-issues.md#query-parameter-limitations).</span><span class="sxs-lookup"><span data-stu-id="027aa-201">See more [known issues](known-issues.md#query-parameter-limitations).</span></span>

## <a name="filter-parameter"></a><span data-ttu-id="027aa-202">Параметр filter</span><span class="sxs-lookup"><span data-stu-id="027aa-202">filter parameter</span></span>

<span data-ttu-id="027aa-203">Параметр запроса `$filter` позволяет получить только подмножество объектов коллекции.</span><span class="sxs-lookup"><span data-stu-id="027aa-203">Use the `$filter` query parameter to retrieve just a subset of a collection.</span></span> <span data-ttu-id="027aa-204">Параметр запроса `$filter` также используется для извлечения таких отношений, как members, memberOf, transitiveMembers и transitiveMemberOf.</span><span class="sxs-lookup"><span data-stu-id="027aa-204">The `$filter` query parameter can also be used to retrieve relationships like members, memberOf, transitiveMembers, and transitiveMemberOf.</span></span> <span data-ttu-id="027aa-205">Например, получите все группы безопасности, участником которых являетесь.</span><span class="sxs-lookup"><span data-stu-id="027aa-205">For example, get all the security groups I'm a member of.</span></span>

<span data-ttu-id="027aa-206">Также чтобы найти пользователей, чье отображаемое имя начинается с буквы J, используйте `startsWith`.</span><span class="sxs-lookup"><span data-stu-id="027aa-206">The following example can be used to find users whose display name starts with the letter 'J', use `startsWith`.</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/users?$filter=startsWith(displayName,'J')
```

<span data-ttu-id="027aa-207">Поддержка операторов `$filter` зависит от того, какой API Microsoft Graph используется.</span><span class="sxs-lookup"><span data-stu-id="027aa-207">Support for `$filter` operators varies across Microsoft Graph APIs.</span></span> <span data-ttu-id="027aa-208">В большинстве случаев поддерживаются следующие операторы:</span><span class="sxs-lookup"><span data-stu-id="027aa-208">The following logical operators are generally supported:</span></span>

| <span data-ttu-id="027aa-209">Тип оператора</span><span class="sxs-lookup"><span data-stu-id="027aa-209">Operator type</span></span> | <span data-ttu-id="027aa-210">Оператор</span><span class="sxs-lookup"><span data-stu-id="027aa-210">Operator</span></span> |
| --- | --- |
| <span data-ttu-id="027aa-211">Операторы равенства</span><span class="sxs-lookup"><span data-stu-id="027aa-211">Equality operators</span></span> | <ul><li> <span data-ttu-id="027aa-212">равно `eq`</span><span class="sxs-lookup"><span data-stu-id="027aa-212">equals `eq`</span></span> </li><li> <span data-ttu-id="027aa-213">не равно `ne`</span><span class="sxs-lookup"><span data-stu-id="027aa-213">not equals `ne`</span></span></li><li> <span data-ttu-id="027aa-214">Отрицание `not`</span><span class="sxs-lookup"><span data-stu-id="027aa-214">Negation `not`</span></span></li><li> <span data-ttu-id="027aa-215">в `in`</span><span class="sxs-lookup"><span data-stu-id="027aa-215">in `in`</span></span></li></ul> |
| <span data-ttu-id="027aa-216">Операторы отношения</span><span class="sxs-lookup"><span data-stu-id="027aa-216">Relational operators</span></span> | <ul><li> <span data-ttu-id="027aa-217">меньше `lt`</span><span class="sxs-lookup"><span data-stu-id="027aa-217">less than `lt`</span></span> </li><li> <span data-ttu-id="027aa-218">больше `gt`</span><span class="sxs-lookup"><span data-stu-id="027aa-218">greater than `gt`</span></span></li><li> <span data-ttu-id="027aa-219">меньше или равно `le`</span><span class="sxs-lookup"><span data-stu-id="027aa-219">less than or equal to `le`</span></span></li><li> <span data-ttu-id="027aa-220">больше или равно `ge`</span><span class="sxs-lookup"><span data-stu-id="027aa-220">greater than or equal to `ge`</span></span></li></ul> |
| <span data-ttu-id="027aa-221">Лямбда-операторы</span><span class="sxs-lookup"><span data-stu-id="027aa-221">Lambda operators</span></span> | <ul><li> <span data-ttu-id="027aa-222">любой `any`</span><span class="sxs-lookup"><span data-stu-id="027aa-222">any `any`</span></span> </li><li> <span data-ttu-id="027aa-223">все `all`</span><span class="sxs-lookup"><span data-stu-id="027aa-223">all `all`</span></span></li></ul>|
| <span data-ttu-id="027aa-224">Условные операторы</span><span class="sxs-lookup"><span data-stu-id="027aa-224">Conditional operators</span></span> | <ul><li> <span data-ttu-id="027aa-225">и `and`</span><span class="sxs-lookup"><span data-stu-id="027aa-225">and `and`</span></span> </li><li> <span data-ttu-id="027aa-226">или `or`</span><span class="sxs-lookup"><span data-stu-id="027aa-226">or `or`</span></span></li> |
| <span data-ttu-id="027aa-227">Функции</span><span class="sxs-lookup"><span data-stu-id="027aa-227">Functions</span></span> | <ul><li> <span data-ttu-id="027aa-228">Начинается с `startsWith`</span><span class="sxs-lookup"><span data-stu-id="027aa-228">Starts with `startsWith`</span></span> </li><li> <span data-ttu-id="027aa-229">Заканчивается на `endsWith`</span><span class="sxs-lookup"><span data-stu-id="027aa-229">Ends with `endsWith`</span></span></li><li> <span data-ttu-id="027aa-230">Содержит `contains`</span><span class="sxs-lookup"><span data-stu-id="027aa-230">Contains `contains`</span></span></li></ul>|


> <span data-ttu-id="027aa-231">**Примечание.** Поддержка этих операторов различается для разных сущностей. Некоторые свойства поддерживают `$filter` только в [расширенных запросах](/graph/aad-advanced-queries).</span><span class="sxs-lookup"><span data-stu-id="027aa-231">**Note:** Support for these operators varies by entity and some properties support `$filter` only in [advanced queries](/graph/aad-advanced-queries).</span></span> <span data-ttu-id="027aa-232">Дополнительные сведения см. в документации по конкретным сущностям.</span><span class="sxs-lookup"><span data-stu-id="027aa-232">See the specific entity documentation for details.</span></span>

### <a name="filter-using-lambda-operators"></a><span data-ttu-id="027aa-233">Фильтрация с помощью лямбда-операторов</span><span class="sxs-lookup"><span data-stu-id="027aa-233">Filter using lambda operators</span></span>

<span data-ttu-id="027aa-234">OData определяет операторы `any` и `all` для проверки совпадений у свойств с несколькими значениями (т. е. либо коллекции примитивов, например типа **String**, либо коллекции сущностей).</span><span class="sxs-lookup"><span data-stu-id="027aa-234">OData defines the `any` and `all` operators to evaluate matches on multi-valued properties, that is, either collection of primitive values such as **String** types or collection of entities.</span></span>

<span data-ttu-id="027aa-235">Оператор `any` итеративно применяет логическое выражение к каждому элементу коллекции и возвращает `true`, если выражение равно `true` для *любого элемента* коллекции. В противном случае этот оператор возвращает `false`.</span><span class="sxs-lookup"><span data-stu-id="027aa-235">The `any` operator iteratively applies a Boolean expression to each member of a collection and returns `true` if the expression is `true` for *any member* of the collection, otherwise it returns `false`.</span></span> <span data-ttu-id="027aa-236">Ниже приводится синтаксис оператора `any`:</span><span class="sxs-lookup"><span data-stu-id="027aa-236">The following is the syntax of the `any` operator:</span></span>

```http
$filter=param/any(var:var/subparam eq 'value-to-match')
```

<span data-ttu-id="027aa-237">Где</span><span class="sxs-lookup"><span data-stu-id="027aa-237">Where</span></span>
+ <span data-ttu-id="027aa-238">*param* — свойство, содержащее коллекцию значений или коллекцию сущностей.</span><span class="sxs-lookup"><span data-stu-id="027aa-238">*param* is the property that contains a collection of values or a collection of entities.</span></span>
+ <span data-ttu-id="027aa-239">*var:var* — переменная диапазона, содержащая текущий элемент коллекции во время итерации.</span><span class="sxs-lookup"><span data-stu-id="027aa-239">*var:var* is a range variable that holds the current element of the collection during iteration.</span></span> <span data-ttu-id="027aa-240">Этой переменной можно назначить любое имя, например *adele:adele* или *x:x*.</span><span class="sxs-lookup"><span data-stu-id="027aa-240">This variable can be named almost anything, for example, *adele:adele* or *x:x*.</span></span>
+ <span data-ttu-id="027aa-241">*subparam* требуется, когда запрос применяется к коллекции сущностей.</span><span class="sxs-lookup"><span data-stu-id="027aa-241">*subparam* is required when the query applies to a collection of entities.</span></span> <span data-ttu-id="027aa-242">Он представляет свойство сложного типа, значение которого мы сравниваем.</span><span class="sxs-lookup"><span data-stu-id="027aa-242">It represents the property of the complex type whose value we are matching.</span></span>
+ <span data-ttu-id="027aa-243">*value-to-match* представляет элемент коллекции, с которым мы выполняем сравнение.</span><span class="sxs-lookup"><span data-stu-id="027aa-243">*value-to-match* represents the member of the collection against which we are matching.</span></span>

<span data-ttu-id="027aa-244">Например, свойство **assignedLicenses** ресурса users может содержать коллекцию объектов **assignedLicense**, сложный тип с двумя свойствами **skuId** и **disabledPlans**.</span><span class="sxs-lookup"><span data-stu-id="027aa-244">For example the **assignedLicenses** property of the users resource can contain a collection of **assignedLicense** objects, a complex type with two properties, **skuId** and **disabledPlans**.</span></span> <span data-ttu-id="027aa-245">Следующий запрос получает только пользователей с назначенной лицензией, которая идентифицируется по **skuId** `184efa21-98c3-4e5d-95ab-d07053a96e67`.</span><span class="sxs-lookup"><span data-stu-id="027aa-245">The following query retrieves only users with an assigned license identified by the **skuId** `184efa21-98c3-4e5d-95ab-d07053a96e67`.</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/beta/users?$filter=assignedLicenses/any(s:s/skuId eq 184efa21-98c3-4e5d-95ab-d07053a96e67)
```

<span data-ttu-id="027aa-246">Свойство **imAddresses** ресурса users может содержать коллекцию типа примитива **string**.</span><span class="sxs-lookup"><span data-stu-id="027aa-246">The **imAddresses** property of the users resource can contain a collection of primitive type **string**.</span></span> <span data-ttu-id="027aa-247">Следующий запрос получает только пользователей, у которых свойство imAddress имеет значение `admin@contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="027aa-247">The following query retrieves only users with an imAddress of `admin@contoso.com`.</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/beta/users?$filter=imAddresses/any(s:s eq 'admin@contoso.com')
```

<span data-ttu-id="027aa-248">Чтобы инвертировать результат выражения внутри предложения `any`, используйте оператор `NOT`, а не `ne`.</span><span class="sxs-lookup"><span data-stu-id="027aa-248">To negate the result of the expression inside the `any` clause, use the `NOT` operator, not the `ne` operator.</span></span> <span data-ttu-id="027aa-249">Например, следующий запрос получает только пользователей, у которых свойству **imAddress** не назначено значение `admin@contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="027aa-249">For example, the following query retrieves only users who are not assigned the **imAddress** of `admin@contoso.com`.</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/beta/users?$filter=NOT imAddresses/any(s:s eq 'admin@contoso.com')&$count=true
```

<span data-ttu-id="027aa-250">Оператор `all` применяет логическое выражение к каждому элементу коллекции и возвращает `true`, если выражение равно `true` для *всех элементов* коллекции. В противном случае этот оператор возвращает `false`.</span><span class="sxs-lookup"><span data-stu-id="027aa-250">The `all` operator applies a Boolean expression to each member of a collection and returns `true` if the expression is `true` for *all members* of the collection, otherwise it returns `false`.</span></span> <span data-ttu-id="027aa-251">Он не поддерживается всеми свойствами.</span><span class="sxs-lookup"><span data-stu-id="027aa-251">It is not supported by any property.</span></span>

### <a name="examples-using-the-filter-query-operator"></a><span data-ttu-id="027aa-252">Примеры использования оператора фильтрации запросов</span><span class="sxs-lookup"><span data-stu-id="027aa-252">Examples using the filter query operator</span></span>

<span data-ttu-id="027aa-253">Приведенная ниже таблица содержит несколько примеров использования параметра запроса `$filter`.</span><span class="sxs-lookup"><span data-stu-id="027aa-253">The following table shows some examples that use the `$filter` query parameter.</span></span> <span data-ttu-id="027aa-254">Дополнительные сведения о синтаксисе `$filter` см. в статье [Протокол OData][odata-filter].</span><span class="sxs-lookup"><span data-stu-id="027aa-254">For more details about `$filter` syntax, see the [OData protocol][odata-filter].</span></span>

> <span data-ttu-id="027aa-255">**Примечание.** Щелкните примеры, чтобы попробовать поработать с ними в [песочнице Graph][graph-explorer].</span><span class="sxs-lookup"><span data-stu-id="027aa-255">**Note:** Click the examples to try them in [Graph Explorer][graph-explorer].</span></span>

| <span data-ttu-id="027aa-256">Описание</span><span class="sxs-lookup"><span data-stu-id="027aa-256">Description</span></span> | <span data-ttu-id="027aa-257">Пример</span><span class="sxs-lookup"><span data-stu-id="027aa-257">Example</span></span>
|:------------|:--------|
| <span data-ttu-id="027aa-258">Получение всех пользователей с именем Маша по нескольким свойствам.</span><span class="sxs-lookup"><span data-stu-id="027aa-258">Get all users with the name Mary across multiple properties.</span></span> | <span data-ttu-id="027aa-259">[GET](https://developer.microsoft.com/graph/graph-explorer?request=users?$filter=startswith(displayName,'mary')+or+startswith(givenName,'mary')+or+startswith(surname,'mary')+or+startswith(mail,'mary')+or+startswith(userPrincipalName,'mary')&method=GET&version=v1.0) `../users?$filter=startswith(displayName,'mary') or startswith(givenName,'mary') or startswith(surname,'mary') or startswith(mail,'mary') or startswith(userPrincipalName,'mary')`</span><span class="sxs-lookup"><span data-stu-id="027aa-259">[GET](https://developer.microsoft.com/graph/graph-explorer?request=users?$filter=startswith(displayName,'mary')+or+startswith(givenName,'mary')+or+startswith(surname,'mary')+or+startswith(mail,'mary')+or+startswith(userPrincipalName,'mary')&method=GET&version=v1.0) `../users?$filter=startswith(displayName,'mary') or startswith(givenName,'mary') or startswith(surname,'mary') or startswith(mail,'mary') or startswith(userPrincipalName,'mary')`</span></span> |
| <span data-ttu-id="027aa-260">Получение всех пользователей с почтовым доменом "hotmail.com"</span><span class="sxs-lookup"><span data-stu-id="027aa-260">Get all users with mail domain equal to 'hotmail.com'</span></span> | <span data-ttu-id="027aa-261">
  [GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24count%3Dtrue%26%24filter%3DendsWith(mail%2C'%40hotmail.com')%26%24select%3Did%2CdisplayName%2Cmail&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../users?$count=true&$filter=endsWith(mail,'@hotmail.com')`.</span><span class="sxs-lookup"><span data-stu-id="027aa-261">[GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24count%3Dtrue%26%24filter%3DendsWith(mail%2C'%40hotmail.com')%26%24select%3Did%2CdisplayName%2Cmail&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../users?$count=true&$filter=endsWith(mail,'@hotmail.com')`.</span></span> <span data-ttu-id="027aa-262">Это [расширенный запрос](/graph/aad-advanced-queries).</span><span class="sxs-lookup"><span data-stu-id="027aa-262">This is an [advanced query](/graph/aad-advanced-queries).</span></span> |
| <span data-ttu-id="027aa-263">Получение всех событий для вошедшего в систему пользователя, начинающихся начинаются после 01.07.2017 г.</span><span class="sxs-lookup"><span data-stu-id="027aa-263">Get all the signed-in user's events that start after 7/1/2017.</span></span> | <span data-ttu-id="027aa-264">[GET](https://developer.microsoft.com/graph/graph-explorer?request=me/events?$filter=start/dateTime+ge+'2017-07-01T08:00'&method=GET&version=v1.0) `../me/events?$filter=start/dateTime ge '2017-07-01T08:00'`</span><span class="sxs-lookup"><span data-stu-id="027aa-264">[GET](https://developer.microsoft.com/graph/graph-explorer?request=me/events?$filter=start/dateTime+ge+'2017-07-01T08:00'&method=GET&version=v1.0) `../me/events?$filter=start/dateTime ge '2017-07-01T08:00'`</span></span> |
| <span data-ttu-id="027aa-265">Получение всех сообщений с определенного адреса, полученных вошедшим пользователем.</span><span class="sxs-lookup"><span data-stu-id="027aa-265">Get all emails from a specific address received by the signed-in user.</span></span> | <span data-ttu-id="027aa-266">[GET](https://developer.microsoft.com/graph/graph-explorer?request=me/messages?$filter=from/emailAddress/address+eq+'someuser@.com'&method=GET&version=v1.0) `../me/messages?$filter=from/emailAddress/address eq 'someuser@example.com'`</span><span class="sxs-lookup"><span data-stu-id="027aa-266">[GET](https://developer.microsoft.com/graph/graph-explorer?request=me/messages?$filter=from/emailAddress/address+eq+'someuser@.com'&method=GET&version=v1.0) `../me/messages?$filter=from/emailAddress/address eq 'someuser@example.com'`</span></span> |
| <span data-ttu-id="027aa-267">Получение всех сообщений, полученных вошедшим пользователем в апреле 2017 г.</span><span class="sxs-lookup"><span data-stu-id="027aa-267">Get all emails received by the signed-in user in April 2017.</span></span> | <span data-ttu-id="027aa-268">[GET](https://developer.microsoft.com/graph/graph-explorer?request=me/mailFolders/inbox/messages?$filter=ReceivedDateTime+ge+2017-04-01+and+receivedDateTime+lt+2017-05-01&method=GET&version=v1.0) `../me/mailFolders/inbox/messages?$filter=ReceivedDateTime ge 2017-04-01 and receivedDateTime lt 2017-05-01`</span><span class="sxs-lookup"><span data-stu-id="027aa-268">[GET](https://developer.microsoft.com/graph/graph-explorer?request=me/mailFolders/inbox/messages?$filter=ReceivedDateTime+ge+2017-04-01+and+receivedDateTime+lt+2017-05-01&method=GET&version=v1.0) `../me/mailFolders/inbox/messages?$filter=ReceivedDateTime ge 2017-04-01 and receivedDateTime lt 2017-05-01`</span></span> |
| <span data-ttu-id="027aa-269">Получение всех непрочитанных сообщений в папке "Входящие" вошедшего пользователя.</span><span class="sxs-lookup"><span data-stu-id="027aa-269">Get all unread mail in the signed-in user's Inbox.</span></span> | <span data-ttu-id="027aa-270">[GET](https://developer.microsoft.com/graph/graph-explorer?request=me/mailFolders/inbox/messages?$filter=isRead+eq+false&method=GET&version=v1.0) `../me/mailFolders/inbox/messages?$filter=isRead eq false`</span><span class="sxs-lookup"><span data-stu-id="027aa-270">[GET](https://developer.microsoft.com/graph/graph-explorer?request=me/mailFolders/inbox/messages?$filter=isRead+eq+false&method=GET&version=v1.0) `../me/mailFolders/inbox/messages?$filter=isRead eq false`</span></span> |
| <span data-ttu-id="027aa-271">Получение всех пользователей в отделах розничной торговли и продаж.</span><span class="sxs-lookup"><span data-stu-id="027aa-271">Get all users in the Retail and Sales departments.</span></span> | <span data-ttu-id="027aa-272">
  [GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24filter%3Ddepartment%20in%20('Retail'%2C%20'Sales')&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com) `../users?$filter=department in ('Retail', 'Sales')`</span><span class="sxs-lookup"><span data-stu-id="027aa-272">[GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24filter%3Ddepartment%20in%20('Retail'%2C%20'Sales')&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com) `../users?$filter=department in ('Retail', 'Sales')`</span></span>| 
| <span data-ttu-id="027aa-273">Перечисление пользователей с определенным планом обслуживания,находящимся в приостановленном состоянии.</span><span class="sxs-lookup"><span data-stu-id="027aa-273">List users with a particular service plan that is in a suspended state.</span></span> | <span data-ttu-id="027aa-274">
  [GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24filter%3DassignedPlans%2Fany(a%3Aa%2FservicePlanId%20eq%202e2ddb96-6af9-4b1d-a3f0-d6ecfd22edb2%20and%20a%2FcapabilityStatus%20eq%20'Suspended')%26%24count%3Dtrue&method=GET&version=beta&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../users?$filter=assignedPlans/any(a:a/servicePlanId eq 2e2ddb96-6af9-4b1d-a3f0-d6ecfd22edb2 and a/capabilityStatus eq 'Suspended')&$count=true`.</span><span class="sxs-lookup"><span data-stu-id="027aa-274">[GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24filter%3DassignedPlans%2Fany(a%3Aa%2FservicePlanId%20eq%202e2ddb96-6af9-4b1d-a3f0-d6ecfd22edb2%20and%20a%2FcapabilityStatus%20eq%20'Suspended')%26%24count%3Dtrue&method=GET&version=beta&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../users?$filter=assignedPlans/any(a:a/servicePlanId eq 2e2ddb96-6af9-4b1d-a3f0-d6ecfd22edb2 and a/capabilityStatus eq 'Suspended')&$count=true`.</span></span> <span data-ttu-id="027aa-275">Это [расширенный запрос](/graph/aad-advanced-queries).</span><span class="sxs-lookup"><span data-stu-id="027aa-275">This is an [advanced query](/graph/aad-advanced-queries).</span></span> |
| <span data-ttu-id="027aa-276">Перечисление всех групп, не входящих в Microsoft 365, в организации.</span><span class="sxs-lookup"><span data-stu-id="027aa-276">List all non-Microsoft 365 groups in an organization.</span></span> | <span data-ttu-id="027aa-277">
  [GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=groups%3F%24filter%3DNOT%20groupTypes%2Fany(c%3Ac%20eq%20'Unified')%26%24count%3Dtrue&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../groups?$filter=NOT groupTypes/any(c:c eq 'Unified')&$count=true`</span><span class="sxs-lookup"><span data-stu-id="027aa-277">[GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=groups%3F%24filter%3DNOT%20groupTypes%2Fany(c%3Ac%20eq%20'Unified')%26%24count%3Dtrue&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../groups?$filter=NOT groupTypes/any(c:c eq 'Unified')&$count=true`</span></span> |
| <span data-ttu-id="027aa-278">Перечисление всех пользователей, у которых название компании не определено (т. е. не является значением `null`) или равно Microsoft.</span><span class="sxs-lookup"><span data-stu-id="027aa-278">List all users whose company name is not undefined (that is, not a `null` value) or Microsoft.</span></span> | <span data-ttu-id="027aa-279">
  [GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24filter%3DcompanyName%20ne%20null%20and%20NOT(companyName%20eq%20'Microsoft')%26%24count%3Dtrue&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../users?$filter=companyName ne null and NOT(companyName eq 'Microsoft')&$count=true`.</span><span class="sxs-lookup"><span data-stu-id="027aa-279">[GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24filter%3DcompanyName%20ne%20null%20and%20NOT(companyName%20eq%20'Microsoft')%26%24count%3Dtrue&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../users?$filter=companyName ne null and NOT(companyName eq 'Microsoft')&$count=true`.</span></span> <span data-ttu-id="027aa-280">Это [расширенный запрос](/graph/aad-advanced-queries).</span><span class="sxs-lookup"><span data-stu-id="027aa-280">This is an [advanced query](/graph/aad-advanced-queries).</span></span> |
| <span data-ttu-id="027aa-281">Перечисление всех пользователей, у которых название компании не определено или равно Microsoft.</span><span class="sxs-lookup"><span data-stu-id="027aa-281">List all users whose company name is either undefined or Microsoft.</span></span> | <span data-ttu-id="027aa-282">
  [GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24filter%3DcompanyName%20in%20(null%2C%20'Microsoft')%26%24count%3Dtrue&method=GET&version=beta&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../users?$filter=companyName in (null, 'Microsoft')&$count=true`.</span><span class="sxs-lookup"><span data-stu-id="027aa-282">[GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=users%3F%24filter%3DcompanyName%20in%20(null%2C%20'Microsoft')%26%24count%3Dtrue&method=GET&version=beta&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../users?$filter=companyName in (null, 'Microsoft')&$count=true`.</span></span> <span data-ttu-id="027aa-283">Это [расширенный запрос](/graph/aad-advanced-queries).</span><span class="sxs-lookup"><span data-stu-id="027aa-283">This is an [advanced query](/graph/aad-advanced-queries).</span></span> |
| <span data-ttu-id="027aa-284">Используйте преобразование OData, чтобы получить транзитивное членство в группах с отображаемым именем, которое начинается с "а", включая количество возвращаемых объектов.</span><span class="sxs-lookup"><span data-stu-id="027aa-284">Use OData cast to get transitive membership in groups with a display name that starts with 'a' including a count of returned objects.</span></span> | <span data-ttu-id="027aa-285">
  [GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=me%2FtransitiveMemberOf%2Fmicrosoft.graph.group%3F%24count%3Dtrue&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../me/transitiveMemberOf/microsoft.graph.group?$count=true&$filter=startswith(displayName, 'a')`.</span><span class="sxs-lookup"><span data-stu-id="027aa-285">[GET](https://developer.microsoft.com/en-us/graph/graph-explorer?request=me%2FtransitiveMemberOf%2Fmicrosoft.graph.group%3F%24count%3Dtrue&method=GET&version=v1.0&GraphUrl=https://graph.microsoft.com&headers=W3sibmFtZSI6IkNvbnNpc3RlbmN5TGV2ZWwiLCJ2YWx1ZSI6ImV2ZW50dWFsIn1d) `../me/transitiveMemberOf/microsoft.graph.group?$count=true&$filter=startswith(displayName, 'a')`.</span></span> <span data-ttu-id="027aa-286">Это [расширенный запрос](/graph/aad-advanced-queries).</span><span class="sxs-lookup"><span data-stu-id="027aa-286">This is an [advanced query](/graph/aad-advanced-queries).</span></span> |

## <a name="format-parameter"></a><span data-ttu-id="027aa-287">Параметр format</span><span class="sxs-lookup"><span data-stu-id="027aa-287">format parameter</span></span>

<span data-ttu-id="027aa-288">Параметр запроса `$format` позволяет указать формат мультимедиа для элементов, возвращаемых из Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="027aa-288">Use the `$format` query parameter to specify the media format of the items returned from Microsoft Graph.</span></span>

<span data-ttu-id="027aa-289">Например, указанный ниже запрос возвращает список пользователей организации в формате JSON.</span><span class="sxs-lookup"><span data-stu-id="027aa-289">For example, the following request returns the users in the organization in the json format:</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/users?$format=json
```


> <span data-ttu-id="027aa-290">**Примечание.** Параметр запросов `$format` поддерживает ряд форматов (например, Atom, XML и JSON), но результаты могут не возвращаться во всех форматах.</span><span class="sxs-lookup"><span data-stu-id="027aa-290">**Note:** The `$format` query parameter supports a number of formats (for example, atom, xml, and json) but results may not be returned in all formats.</span></span>

## <a name="orderby-parameter"></a><span data-ttu-id="027aa-291">Параметр orderby</span><span class="sxs-lookup"><span data-stu-id="027aa-291">orderby parameter</span></span>

<span data-ttu-id="027aa-292">Параметр запроса `$orderby` позволяет указать порядок сортировки элементов, возвращаемых из Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="027aa-292">Use the `$orderby` query parameter to specify the sort order of the items returned from Microsoft Graph.</span></span> <span data-ttu-id="027aa-293">По умолчанию используется сортировка по возрастанию.</span><span class="sxs-lookup"><span data-stu-id="027aa-293">The default order is ascending order.</span></span>

<span data-ttu-id="027aa-294">Например, следующий запрос возвращает список пользователей в организации, упорядоченный по отображаемому имени:</span><span class="sxs-lookup"><span data-stu-id="027aa-294">For example, the following request returns the users in the organization ordered by their display name:</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/users?$orderby=displayName
```

<span data-ttu-id="027aa-p131">Вы также можете сортировать данные по объектам сложного типа. Приведенный ниже запрос позволяет получить сообщения и отсортировать их по полю **address** свойства **from**, принадлежащего к сложному типу **emailAddress**.</span><span class="sxs-lookup"><span data-stu-id="027aa-p131">You can also sort by complex type entities. The following request gets messages and sorts them by the **address** field of the **from** property, which is of the complex type **emailAddress**:</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/me/messages?$orderby=from/emailAddress/address
```

<span data-ttu-id="027aa-297">Чтобы отсортировать результаты по возрастанию или убыванию, добавьте `asc` или `desc` к имени поля, используя пробел для разделения, например: `?$orderby=name%20desc`.</span><span class="sxs-lookup"><span data-stu-id="027aa-297">To sort the results in ascending or descending order, append either `asc` or `desc` to the field name, separated by a space; for example, `?$orderby=name%20desc`.</span></span> <span data-ttu-id="027aa-298">Если порядок сортировки не указан, используется порядок сортировки по умолчанию (по возрастанию).</span><span class="sxs-lookup"><span data-stu-id="027aa-298">If the sort order is not specified, the default (ascending order) is inferred.</span></span>

<span data-ttu-id="027aa-p133">Некоторые API дают возможность упорядочивать результаты по нескольким свойствам. Например, следующий запрос позволяет упорядочить сообщения в папке "Входящие" пользователя сначала по имени отправителя по убыванию (от Я до А), а затем — по теме по возрастанию (по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="027aa-p133">With some APIs, you can order results on multiple properties. For example, the following request orders the messages in the user's Inbox, first by the name of the person who sent it in descending order (Z to A), and then by subject in ascending order (default).</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/me/mailFolders/Inbox/messages?$orderby=from/emailAddress/name desc,subject
```

> <span data-ttu-id="027aa-301">**Примечание.** Если указать `$filter`, сервер определит порядок сортировки результатов.</span><span class="sxs-lookup"><span data-stu-id="027aa-301">**Note:** When you specify `$filter` the server will infer a sort order for the results.</span></span> <span data-ttu-id="027aa-302">Если вы одновременно используете `$orderby` и `$filter` для получения сообщений, так как сервер всегда определяет порядок сортировки результатов `$filter`, [необходимо задать свойства определенным образом](/graph/api/user-list-messages#using-filter-and-orderby-in-the-same-query).</span><span class="sxs-lookup"><span data-stu-id="027aa-302">If you use both `$orderby` and `$filter` to get messages, because the server always infers a sort order for the results of a `$filter`, you must [specify properties in certain ways](/graph/api/user-list-messages#using-filter-and-orderby-in-the-same-query).</span></span>


<span data-ttu-id="027aa-303">В приведенном ниже примере показан запрос, отфильтрованный по свойствам **subject** и **importance**, а затем отсортированный по свойствам **subject**, **importance** и **receivedDateTime** в порядке убывания.</span><span class="sxs-lookup"><span data-stu-id="027aa-303">The following example shows a query filtered by the **subject** and **importance** properties, and then sorted by the **subject**, **importance**, and **receivedDateTime** properties in descending order.</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/me/messages?$filter=Subject eq 'welcome' and importance eq 'normal'&$orderby=subject,importance,receivedDateTime desc
```


> [!NOTE] 
> <span data-ttu-id="027aa-304">Для объектов каталога поддерживаются параметры запросов `$orderby` и `$filter`.</span><span class="sxs-lookup"><span data-stu-id="027aa-304">Combining `$orderby` and `$filter` query parameters is supported for directory objects.</span></span> <span data-ttu-id="027aa-305">См. [Расширенные возможности запросов для объектов каталога Azure AD](/graph/aad-advanced-queries).</span><span class="sxs-lookup"><span data-stu-id="027aa-305">See [Advanced query capabilities in Azure AD directory objects](/graph/aad-advanced-queries).</span></span>

## <a name="search-parameter"></a><span data-ttu-id="027aa-306">Параметр search</span><span class="sxs-lookup"><span data-stu-id="027aa-306">search parameter</span></span>

<span data-ttu-id="027aa-307">Параметр запроса `$search` позволяет ограничить результаты запроса с помощью условия поиска.</span><span class="sxs-lookup"><span data-stu-id="027aa-307">Use the `$search` query parameter to restrict the results of a request to match a search criterion.</span></span> <span data-ttu-id="027aa-308">Синтаксис и поведение различаются для разных операций API.</span><span class="sxs-lookup"><span data-stu-id="027aa-308">It's syntax and behavior varies from one API operation to another.</span></span> <span data-ttu-id="027aa-309">Сведения о синтаксисе `$search` для разных ресурсов см. в статье [Использование параметра запроса $search для сопоставления с условием поиска](/graph/search-query-parameter).</span><span class="sxs-lookup"><span data-stu-id="027aa-309">To see the syntax for `$search` across different resources, see [Use the $search query parameter to match a search criterion](/graph/search-query-parameter).</span></span>

## <a name="select-parameter"></a><span data-ttu-id="027aa-310">Параметр select</span><span class="sxs-lookup"><span data-stu-id="027aa-310">select parameter</span></span>

<span data-ttu-id="027aa-311">Параметр запроса `$select` позволяет возвратить набор свойств, отличный от набора по умолчанию, для отдельного ресурса или коллекции ресурсов.</span><span class="sxs-lookup"><span data-stu-id="027aa-311">Use the `$select` query parameter to return a set of properties that are different than the default set for an individual resource or a collection of resources.</span></span> <span data-ttu-id="027aa-312">С помощью `$select` можно указать подмножество или надмножество свойств по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="027aa-312">With `$select`, you can specify a subset or a superset of the default properties.</span></span>

<span data-ttu-id="027aa-313">Например, при получении сообщений вошедшего пользователя можно указать, что необходимо вернуть только свойства **from** и **subject**:</span><span class="sxs-lookup"><span data-stu-id="027aa-313">For example, when retrieving the messages of the signed-in user, you can specify that only the **from** and **subject** properties be returned:</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/me/messages?$select=from,subject
```


> <span data-ttu-id="027aa-314">**Важно!** Как правило, параметр `$select` рекомендуется использовать, чтобы запрос возвращал только те свойства, которые необходимы вашему приложению.</span><span class="sxs-lookup"><span data-stu-id="027aa-314">**Important:** In general, we recommend that you use `$select` to limit the properties returned by a query to those needed by your app.</span></span> <span data-ttu-id="027aa-315">Это особенно касается запросов, которые могут возвращать большой результирующий набор.</span><span class="sxs-lookup"><span data-stu-id="027aa-315">This is especially true of queries that might potentially return a large result set.</span></span> <span data-ttu-id="027aa-316">Ограничение набора свойств, возвращаемых в каждой строке, позволяет уменьшить сетевую нагрузку и повысить производительность вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="027aa-316">Limiting the properties returned in each row will reduce network load and help improve your app's performance.</span></span>
>
> <span data-ttu-id="027aa-p139">В `v1.0` некоторые ресурсы Azure AD, производные от [directoryObject](/graph/api/resources/directoryobject), такие как [user](/graph/api/resources/user) и [group](/graph/api/resources/group), возвращают при чтении ограниченное подмножество свойств по умолчанию. С этими ресурсами параметр `$select` необходимо использовать для возврата свойств, не входящих в набор по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="027aa-p139">In `v1.0`, some Azure AD resources that derive from [directoryObject](/graph/api/resources/directoryobject), like [user](/graph/api/resources/user) and [group](/graph/api/resources/group), return a limited, default subset of properties on reads. For these resources, you must use `$select` to return properties outside of the default set.</span></span>  

## <a name="skip-parameter"></a><span data-ttu-id="027aa-319">Параметр skip</span><span class="sxs-lookup"><span data-stu-id="027aa-319">skip parameter</span></span>

<span data-ttu-id="027aa-p140">Параметр запроса `$skip` позволяет задать количество элементов, которое необходимо пропустить в начале коллекции. Например, следующий запрос возвращает события пользователя, отсортированные по дате создания, начиная с 21-го события в коллекции:</span><span class="sxs-lookup"><span data-stu-id="027aa-p140">Use the `$skip` query parameter to set the number of items to skip at the start of a collection. For example, the following request returns events for the user sorted by date created, starting with the 21st event in the collection:</span></span>

```msgraph-interactive
GET  https://graph.microsoft.com/v1.0/me/events?$orderby=createdDateTime&$skip=20
```


> <span data-ttu-id="027aa-322">**Примечание.** Некоторые API Microsoft Graph, например для почты и календарей Outlook (**message**, **event** и **calendar**), используют `$skip` для разбиения по страницам.</span><span class="sxs-lookup"><span data-stu-id="027aa-322">**Note:** Some Microsoft Graph APIs, like Outlook Mail and Calendars (**message**, **event**, and **calendar**), use `$skip` to implement paging.</span></span> <span data-ttu-id="027aa-323">Если результаты запроса занимают несколько страниц, эти API возвращают свойство `@odata:nextLink` с URL-адресом, содержащим параметр `$skip`.</span><span class="sxs-lookup"><span data-stu-id="027aa-323">When results of a query span multiple pages, these APIs will return an `@odata:nextLink` property with a URL that contains a `$skip` parameter.</span></span> <span data-ttu-id="027aa-324">Этот URL-адрес можно использовать для возврата следующей страницы результатов.</span><span class="sxs-lookup"><span data-stu-id="027aa-324">You can use this URL to return the next page of results.</span></span> <span data-ttu-id="027aa-325">[Подробнее…](./paging.md)</span><span class="sxs-lookup"><span data-stu-id="027aa-325">To learn more, see [Paging](./paging.md).</span></span>
>
> <span data-ttu-id="027aa-326">Заголовок **ConsistencyLevel** требуется для расширенных запросов объектов каталога. Этот заголовок по умолчанию не включен в запросы последующих страниц.</span><span class="sxs-lookup"><span data-stu-id="027aa-326">The **ConsistencyLevel** header required for advanced queries against directory objects is not included by default in subsequent page requests.</span></span> <span data-ttu-id="027aa-327">Его необходимо явным образом задавать на последующих страницах.</span><span class="sxs-lookup"><span data-stu-id="027aa-327">It must be set explicitly in subsequent pages.</span></span>

## <a name="skiptoken-parameter"></a><span data-ttu-id="027aa-328">Параметр skipToken</span><span class="sxs-lookup"><span data-stu-id="027aa-328">skipToken parameter</span></span>

<span data-ttu-id="027aa-329">Некоторые запросы возвращают несколько страниц данных. Это происходит из-за разбиения по страницам на стороне сервера или из-за использования параметра [`$top`](#top-parameter) для ограничения размера возвращаемых страниц.</span><span class="sxs-lookup"><span data-stu-id="027aa-329">Some requests return multiple pages of data, either due to server-side paging or due to the use of the [`$top`](#top-parameter) parameter to limit the page size of the response.</span></span> <span data-ttu-id="027aa-330">Многие API Microsoft Graph используют параметр запроса `skipToken` для ссылки на следующие страницы результатов.</span><span class="sxs-lookup"><span data-stu-id="027aa-330">Many Microsoft Graph APIs use the `skipToken` query parameter to reference subsequent pages of the result.</span></span>  
<span data-ttu-id="027aa-331">Параметр `$skiptoken` содержит непрозрачный маркер, который ссылается на следующую страницу результатов и возвращается в URL-адресе, указанном в свойстве `@odata.nextLink` отклика.</span><span class="sxs-lookup"><span data-stu-id="027aa-331">The `$skiptoken` parameter contains an opaque token that references the next page of results and is returned in the URL provided in the `@odata.nextLink` property in the response.</span></span> <span data-ttu-id="027aa-332">Дополнительные сведения см. в статье о [разбиении по страницам](./paging.md).</span><span class="sxs-lookup"><span data-stu-id="027aa-332">To learn more, see [Paging](./paging.md).</span></span>
> <span data-ttu-id="027aa-333">**Примечание.** Если вы используете счетчик OData (добавляя `$count=true` в строку запроса), то свойство `@odata.count` будет только на первой странице.</span><span class="sxs-lookup"><span data-stu-id="027aa-333">**Note:** If you're using OData Count (adding `$count=true` in the query string) for queries against directory objects, the `@odata.count` property is present only in the first page.</span></span>
>
> <span data-ttu-id="027aa-334">Заголовок **ConsistencyLevel** требуется для расширенных запросов объектов каталога. Этот заголовок по умолчанию не включен в запросы последующих страниц.</span><span class="sxs-lookup"><span data-stu-id="027aa-334">The **ConsistencyLevel** header required for advanced queries against directory objects is not included by default in subsequent page requests.</span></span> <span data-ttu-id="027aa-335">Его необходимо явным образом задавать на последующих страницах.</span><span class="sxs-lookup"><span data-stu-id="027aa-335">It must be set explicitly in subsequent pages.</span></span>

## <a name="top-parameter"></a><span data-ttu-id="027aa-336">Параметр top</span><span class="sxs-lookup"><span data-stu-id="027aa-336">top parameter</span></span>

<span data-ttu-id="027aa-337">Параметр запроса `$top` позволяет задать размер страницы в результирующем наборе.</span><span class="sxs-lookup"><span data-stu-id="027aa-337">Use the `$top` query parameter to specify the page size of the result set.</span></span> 

<span data-ttu-id="027aa-338">Если результирующий набор будет содержать больше одной страницы элементов, тело отклика будет содержать параметр `@odata.nextLink`.</span><span class="sxs-lookup"><span data-stu-id="027aa-338">If more items remain in the result set, the response body will contain an `@odata.nextLink` parameter.</span></span> <span data-ttu-id="027aa-339">Этот параметр содержит URL-адрес, с помощью которого можно получить следующую страницу результатов.</span><span class="sxs-lookup"><span data-stu-id="027aa-339">This parameter contains a URL that you can use to get the next page of results.</span></span> <span data-ttu-id="027aa-340">Дополнительные сведения см. в статье о [разбиении по страницам](./paging.md).</span><span class="sxs-lookup"><span data-stu-id="027aa-340">To learn more, see [Paging](./paging.md).</span></span> 

<span data-ttu-id="027aa-341">Минимальное значение $top является 1, а максимальное зависит от соответствующего API.</span><span class="sxs-lookup"><span data-stu-id="027aa-341">The minimum value of $top is 1 and the maximum depends on the corresponding API.</span></span>  

<span data-ttu-id="027aa-342">Например, следующий запрос [сообщений списка](/graph/api/user-list-messages) возвращает первые пять сообщений в почтовом ящике пользователя:</span><span class="sxs-lookup"><span data-stu-id="027aa-342">For example, the following [list messages](/graph/api/user-list-messages) request returns the first five messages in the user's mailbox:</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/me/messages?$top=5
```


> <span data-ttu-id="027aa-343">Заголовок **ConsistencyLevel** требуется для расширенных запросов объектов каталога. Этот заголовок по умолчанию не включен в запросы последующих страниц.</span><span class="sxs-lookup"><span data-stu-id="027aa-343">The **ConsistencyLevel** header required for advanced queries against directory objects is not included by default in subsequent page requests.</span></span> <span data-ttu-id="027aa-344">Его необходимо явным образом задавать на последующих страницах.</span><span class="sxs-lookup"><span data-stu-id="027aa-344">It must be set explicitly in subsequent pages.</span></span>

## <a name="error-handling-for-query-parameters"></a><span data-ttu-id="027aa-345">Обработка ошибок параметров запроса</span><span class="sxs-lookup"><span data-stu-id="027aa-345">Error handling for query parameters</span></span>

<span data-ttu-id="027aa-p148">Некоторые запросы возвращают сообщение об ошибке, если указанный параметр запроса не поддерживается. Например, невозможно использовать `$expand` для связи `user/photo`.</span><span class="sxs-lookup"><span data-stu-id="027aa-p148">Some requests will return an error message if a specified query parameter is not supported. For example, you cannot use `$expand` on the `user/photo` relationship.</span></span> 

```http
https://graph.microsoft.com/beta/me?$expand=photo
```

```json
{
    "error":{
        "code":"ExpandNotSupported",
        "message":"Expand is not allowed for property 'Photo' according to the entity schema.",
        "innerError":{
            "request-id":"1653fefd-bc31-484b-bb10-8dc33cb853ec",
            "date":"2017-07-31T20:55:01"
        }
    }
}
```

<span data-ttu-id="027aa-348">При этом необходимо отметить, что указанные в запросе параметры могут просто не сработать.</span><span class="sxs-lookup"><span data-stu-id="027aa-348">However, it is important to note that query parameters specified in a request might fail silently.</span></span> <span data-ttu-id="027aa-349">Это может произойти, если не поддерживаются либо сами параметры, либо их сочетание.</span><span class="sxs-lookup"><span data-stu-id="027aa-349">This can be true for unsupported query parameters as well as for unsupported combinations of query parameters.</span></span> <span data-ttu-id="027aa-350">В таких случаях необходимо проверить возвращенные запросом данные и определить, дали ли указанные параметры запроса желаемый результат.</span><span class="sxs-lookup"><span data-stu-id="027aa-350">In these cases, you should examine the data returned by the request to determine whether the query parameters you specified had the desired effect.</span></span> 

[graph-explorer]: https://developer.microsoft.com/graph/graph-explorer
[odata-filter]: https://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part2-url-conventions/odata-v4.0-errata03-os-part2-url-conventions-complete.html#_Toc453752358
[odata-query]: https://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part2-url-conventions/odata-v4.0-errata03-os-part2-url-conventions-complete.html#_Toc453752356
[count-example]: https://developer.microsoft.com/graph/graph-explorer?request=me/messages?$top=2%26$count=true&method=GET&version=v1.0

## <a name="see-also"></a><span data-ttu-id="027aa-351">См. также</span><span class="sxs-lookup"><span data-stu-id="027aa-351">See also</span></span>

- [<span data-ttu-id="027aa-352">Расширенные возможности запросов для объектов каталога Azure AD</span><span class="sxs-lookup"><span data-stu-id="027aa-352">Advanced query capabilities on Azure AD directory objects</span></span>](/graph/aad-advanced-queries)
- [<span data-ttu-id="027aa-353">Использование параметра запроса $search для сопоставления с условием поиска</span><span class="sxs-lookup"><span data-stu-id="027aa-353">Use the $search query parameter to match a search criterion</span></span>](/graph/search-query-parameter)
- [<span data-ttu-id="027aa-354">Ограничения параметров запроса</span><span class="sxs-lookup"><span data-stu-id="027aa-354">Query parameter limitations</span></span>](known-issues.md#query-parameter-limitations)