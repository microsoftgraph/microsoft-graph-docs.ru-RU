---
title: Схема регистрации для связей Microsoft Graph
description: Узнайте, как с помощью Microsoft Graph зарегистрировать схему для связей Microsoft Graph
ms.localizationpriority: high
author: mecampos
doc_type: conceptualPageType
ms.prod: search
ms.openlocfilehash: 2511ebd1b5c37910316464f5b27a1a795478000a
ms.sourcegitcommit: 6c04234af08efce558e9bf926062b4686a84f1b2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2021
ms.locfileid: "59139256"
---
<!---<author of this doc: rsamai>--->

# <a name="register-schema-for-the-microsoft-graph-connection"></a>Схема регистрации для связей Microsoft Graph

[Схема](/graph/api/resources/schema?view=graph-rest-beta&preserve-view=true) связей определяет, как ваше содержимое будет использоваться в различных интерфейсах Microsoft Graph. Схема — это плоский список всех свойств, которые вы планируете добавить в связь, а также их атрибуты, метки и псевдонимы. Перед добавлением элементов в связь вы должны зарегистрировать схему.

## <a name="example-schema"></a>Пример схемы

В таблице ниже приведен пример возможной схемы для соединителя системы рабочих запросов.

| Свойство       | Тип             | Возможность поиска         | Возможность запроса          | Возможность извлечения        | Возможность уточнения          | Метки               | Псевдонимы    |
|----------------|------------------|--------------------|--------------------|--------------------|--------------------|----------------------|------------|
| ticketId       | String           |                    |                    |                    |                    |                      | Идентификатор         |
| title          | String           | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |                    | title                |            |
| createdBy      | String           | :heavy_check_mark: | :heavy_check_mark: |                    |                    | createdBy            | creator    |
| assignedTo     | String           | :heavy_check_mark: | :heavy_check_mark: |                    |                    |                      |            |
| lastEditedDate | DateTime         |                    | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | lastModifiedDateTime | editedDate |
| lastEditedBy   | String           | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |                    | lastModifiedBy       | edited     |
| workItemType   | String           |                    | :heavy_check_mark: | :heavy_check_mark: |                    |                      | ticketType |
| priority       | Int64            | :heavy_check_mark: |                    |                    |                    |                      |            |
| tags           | StringCollection |                    | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |                      |            |
| status         | String           |                    | :heavy_check_mark: | :heavy_check_mark: |                    |                      |            |
| url            | String           |                    |                    |                    |                    | url                  |            |
| resolved       | Boolean          |                    | :heavy_check_mark: | :heavy_check_mark: |                    |                      |            |

## <a name="property-attributes"></a>Атрибуты свойства

### <a name="searchable"></a>Возможность поиска

Если свойство доступно для поиска, его значение добавляется в полнотекстовый индекс. Когда пользователь выполняет поиск, результаты возвращаются в том случае, если поисковый запрос совпадает с одним из полей, доступных для поиска, или его [контентом](connecting-external-content-manage-items.md#content).

<!-- markdownlint-disable MD036 -->
![Поиск по запросу "design" с отображением результатов, совпадающих со свойствами и контентом](./images/connectors-images/connecting-external-content-manage-items-schema-1.svg)

*Поиск по запросу "design" с отображением результатов, совпадающих со свойствами (`title`, `tags`) и контентом*

### <a name="queryable"></a>Возможность запроса

Если свойство поддерживает запросы, вы можете запрашивать его с помощью языка KQL. KQL содержит один или несколько ключевых слов в свободной текстовой форме (слова или фразы) или ограничения свойств. Имя свойства должно быть включено в запрос, будучи либо указанным в самом запросе, либо включаемым в запрос программно. Вы можете использовать сопоставление префиксов с помощью оператора подстановочного знака(*).

> [!NOTE]
> Сопоставление суффиксов не поддерживается.

![Поиск по запросу "search ba*" с отображением результатов, соответствующих этому префиксу](./images/connectors-images/connecting-external-content-manage-items-schema-2.svg)

*Поиск по запросу "search ba*" с отображением результатов, соответствующих этому префиксу*

![Поиск по запросу "tags:design" с областью результатов, соответствующих элементам с "design" в свойстве тегов](./images/connectors-images/connecting-external-content-manage-items-schema-3.svg)

*Поиск по запросу "tags:design" с областью результатов, соответствующих элементам с "design" в свойстве тегов*

### <a name="retrievable"></a>Возможность извлечения

Если свойство можно извлечь, его значение может возвращаться в результатах поиска. Любое свойство, которое вы хотите добавить в шаблон отображения или вернуть из запроса и показывать в результатах поиска, должно быть извлекаемым. Пометка больших свойств, например `editHistory`, или слишком большого количества свойств в качестве извлекаемых увеличит задержку поиска. Будьте внимательны и выбирайте нужные свойства.

![Набор свойств, доступных для извлечения, отображаемый в качестве результата](./images/connectors-images/connecting-external-content-manage-schema-4.svg)

*Набор свойств, доступных для извлечения (`title`, `lastEditedBy`и т. д.), отображаемый в качестве результата*

### <a name="refinable"></a>Возможность уточнения

Если свойство поддерживает уточнение, администратор может настроить его в качестве пользовательского фильтра на странице результатов Поиска (Майкрософт).

![Уточнение результатов по тегам, свойство с возможностью уточнения](./images/connectors-images/connecting-external-content-manage-schema-5.svg)

*Уточнение результатов по `tags`, свойство с возможностью уточнения*

## <a name="labels"></a>Метки

Метка — это известный тег, опубликованный корпорацией Майкрософт, который вы можете добавить для свойства в схему. Добавление меток позволяет различным продуктам Майкрософт понимать свойство и обеспечивать более удобный интерфейс.

| Метка                 | Описание                                                                          |
|---------------------- |------------------------------------------------------------------------------------- |
| title                 | Название элемента, который должен отображаться в поиске и других интерфейсах              |
| url                   | Целевой URL-адрес элемента в источнике данных                                        |
| createdBy             | Имя пользователя, создавшего элемент в источнике данных                           |
| lastModifiedBy        | Имя пользователя, который последним изменил элемент в источнике данных              |
| authors               | Имена всех пользователей, которые участвовали и взаимодействовали в работе над элементом в источнике данных  |
| createdDateTime       | Время и дата создания элемента в источнике данных                             |
| lastModifiedDateTime  | Время и дата последнего изменения элемента в источнике данных                            |
| fileName              | В случае с файлом — имя файла в источнике данных                           |
| fileExtension         | В случае с файлом — расширение файла в источнике данных                      |

Например, свойство связи *lastEditedBy* имеет то же значение, что и метка Майкрософт *lastModifiedBy*.

Добавьте столько меток, сколько сможете, но убедитесь, что они точно соответствуют свойствам. Не добавляйте метку к свойству, если она не имеет смысла. Неправильные сопоставления ухудшат взаимодействие.

> [!IMPORTANT]
> Все свойства, сопоставленные с метками, должны быть доступны для извлечения.

### <a name="relevance"></a>Релевантность

Применяя как можно более точные сопоставленные метки, вы также можете улучшить обнаружение контента при поиске. Настоятельно рекомендуем определить как можно больше меток ниже, перечисленных по потенциальному влиянию на обнаружение в убывающем порядке:

- title
- lastModifiedDateTime
- lastModifiedBy
- url
- filename
- fileExtension

Для обнаружения, т. е. сценариев поиска, обратите внимание на следующее:

- Используйте точные сопоставления.
- Когда вы используете свойство в качестве метки, содержащей много контента, вы можете увеличить задержку поиска, и вам придется ждать дольше, чтобы получить результаты.
- В частности, в сценарии с настройкой пользовательской вертикали, позволяющей искать несколько связей, результаты поиска значительно выигрывают от назначения максимально большого количества меток.

### <a name="default-result-types"></a>Типы результатов по умолчанию

Метки также влияют на то, как создаются типы результатов, используемые по умолчанию. Добавление меток заголовка и контента как минимум обеспечит создание типа результатов для вашей связи.

![Тип результатов, используемый по умолчанию, с заголовком и фрагментом результата](./images/connectors-images/connecting-external-content-manage-schema-6.svg)

*Тип результатов, используемый по умолчанию, с `title` и фрагментом результата*

Тип результатов, используемый по умолчанию, обеспечивает более эффективное взаимодействие, если вы определите (если применимо) следующие метки, перечисленные по возрастанию:

- title
- url
- lastModifiedBy
- lastModifiedDateTime
- fileName
- fileExtension

Наконец, назначая метки, убедитесь в следующем:

- Свойства, выбранные в качестве меток, должны быть помечены как доступные для извлечения.
- Свойства и назначенные им метки должны иметь одинаковый тип данных.
- Можно сопоставить только одну метку с одним свойством.

## <a name="aliases"></a>Псевдонимы

Псевдонимы — это понятные имена свойств, которые вы назначаете. Они будут использоваться в запросах и при выборе фильтров уточняемых свойств.

## <a name="next-steps"></a>Дальнейшие действия

- [Добавление элементов в связь](./connecting-external-content-manage-items.md)
- [Обзор справочника API соединителей Microsoft Graph](/graph/api/resources/indexing-api-overview?view=graph-rest-beta&preserve-view=true)
- [Поиск объектов настраиваемого типа (externalItem)](search-concept-custom-types.md)
- Скачайте [образец соединителя поиска](https://github.com/microsoftgraph/msgraph-search-connector-sample) с сайта GitHub.
