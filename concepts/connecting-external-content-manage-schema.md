---
title: Регистрация и обновление схемы для связей Microsoft Graph
description: Перед добавлением элементов в подключение вы должны зарегистрировать схему. Указывается описание примера схемы, атрибутов свойств, семантических меток и возможностей обновления схемы.
ms.localizationpriority: high
author: mecampos
doc_type: conceptualPageType
ms.prod: search
ms.openlocfilehash: 961b8729bea3a835bcb1d6d49c9f1953a7267004
ms.sourcegitcommit: 6bb3c5c043d35476e41ef2790bcf4813fae0769d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2022
ms.locfileid: "66092683"
---
<!---<author of this doc: rsamai>--->

# <a name="register-and-update-schema-for-the-microsoft-graph-connection"></a>Регистрация и обновление схемы для связей Microsoft Graph

[Схема](/graph/api/resources/externalconnectors-schema) подключения определяет, как содержимое используется в различных интерфейсах Microsoft Graph. Схема представляет собой простой список всех свойств, которые вы планируете добавить в соединение, вместе с их атрибутами, метками и псевдонимами. Перед добавлением элементов в соединение вы должны зарегистрировать схему.

## <a name="example-schema"></a>Пример схемы

В таблице ниже приведен пример возможной схемы для соединителя системы рабочих запросов.

| Свойство       | Тип             | Возможность поиска         | Возможность запроса          | Возможность извлечения        | Возможность уточнения          | Метки               | Псевдонимы    |
|----------------|------------------|--------------------|--------------------|--------------------|--------------------|----------------------|------------|
| ticketId       | String           |                    |                    |                    |                    |                      | Идентификатор         |
| title          | String           | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |                    | title                |            |
| createdBy      | String           | :heavy_check_mark: | :heavy_check_mark: |                    |                    | createdBy            | creator    |
| assignedTo     | String           | :heavy_check_mark: | :heavy_check_mark: |                    |                    |                      |            |
| lastEditedDate | DateTime         |                    | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: | lastModifiedDateTime | editedDate |
| lastEditedBy   | String           | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |                    | lastModifiedBy       | edited     |
| workItemType   | String           |                    | :heavy_check_mark: | :heavy_check_mark: |                    |                      | ticketType |
| priority       | Int64            | :heavy_check_mark: |                    |                    |                    |                      |            |
| tags           | StringCollection |                    | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |                      |            |
| status         | String           |                    | :heavy_check_mark: | :heavy_check_mark: |                    |                      |            |
| url            | String           |                    |                    |                    |                    | url                  |            |
| resolved       | Boolean          |                    | :heavy_check_mark: | :heavy_check_mark: |                    |                      |            |

## <a name="property-attributes"></a>Атрибуты свойства

### <a name="searchable"></a>Возможность поиска

Если свойство доступно для поиска, его значение добавляется в полнотекстовый индекс. Когда пользователь выполняет поиск, результаты возвращаются в том случае, если поисковый запрос совпадает с одним из полей, доступных для поиска, или его [контентом](connecting-external-content-manage-items.md#content).

<!-- markdownlint-disable MD036 -->
![Поиск по запросу "design", отображающий результаты совпадений с заголовком свойства и содержимым.](./images/connectors-images/connecting-external-content-manage-items-schema-1.png)

*Поиск по запросу "design" с отображением результатов соответствия по свойству (`title`) и контенту.*

### <a name="queryable"></a>Возможность запроса

Если свойство поддерживает запросы, вы можете запрашивать его с помощью языка KQL. KQL состоит из одного или нескольких ключевых слов произвольного текста (слов или фраз) или ограничений свойств. Имя свойства должно быть включено в запрос, будучи либо указанным в самом запросе, либо включаемым в запрос программно. Вы можете использовать сопоставление префиксов с помощью оператора подстановочного знака(*).

> [!NOTE]
> Сопоставление суффиксов не поддерживается.

![Поиск по запросу "search ba*" с отображением результатов, соответствующих этому префиксу.](./images/connectors-images/connecting-external-content-manage-items-schema-2.svg)

*Поиск по запросу "search ba\*" с отображением результатов, соответствующих этому префиксу.*

![Поиск по запросу "tags:design" с областью результатов, соответствующих элементам с "design" в свойстве тегов.](./images/connectors-images/connecting-external-content-manage-items-schema-3.svg)

*Поиск по запросу "tags:design" приводит к элементам со словом "дизайн" в свойстве `tags`.*

### <a name="retrievable"></a>Возможность извлечения

Если свойство можно извлечь, его значение может возвращаться в результатах поиска. Любое свойство, которое вы хотите добавить в шаблон отображения или вернуть из запроса и показывать в результатах поиска, должно быть извлекаемым. Пометка больших или слишком большого количества свойств как извлекаемых увеличивает задержку поиска. Будьте внимательны и выбирайте нужные свойства.

![Набор извлекаемых свойств, отображенный в результате.](./images/connectors-images/connecting-external-content-manage-schema-4.svg)

*Набор свойств, доступных для извлечения (`title` и `lastEditedBy`), отображаемый в качестве результата.*

### <a name="refinable"></a>Возможность уточнения

Если свойство поддерживает уточнение, администратор может настроить его в качестве пользовательского фильтра на странице результатов Поиска (Майкрософт). Свойство `refinable` не может иметь значение `searchable`.

![Уточнение результатов по тегам, свойство с возможностью уточнения](./images/connectors-images/connecting-external-content-manage-schema-5.svg)

*Уточнение результатов по `tags`, свойство с возможностью уточнения.*


## <a name="semantic-labels"></a>Семантические метки

Семантическая метка — это известный тег, опубликованный корпорацией Майкрософт, который можно добавить для свойства в схему. Добавление семантических меток позволяет различным продуктам Майкрософт понимать свойство и обеспечивать более удобное взаимодействие.

Семантические метки предоставляют независимый от домена подход к назначению свойств из различных доменов контента набору известных классов. Они находят применение во множестве различных материалов и обеспечивают автоматическую поддержку таких задач, как:

* Интеграция данных в разнородных интерфейсах
* Создание общеизвестных графиков (например, Viva Тем)
* Шаблоны по умолчанию для пользовательских интерфейсов

Семантические метки можно назначить исходным свойствам на странице **Назначение меток свойств**. Метки обеспечивают семантическое значение и позволяют интегрировать данные соединителя в возможности Microsoft 365.  

| Метка                 | Описание                                                                               |
|---------------------- |------------------------------------------------------------------------------------------ |
| title                 | Название элемента, которое вы хотите отображать в поиске и других интерфейсах.                |
| url                   | Целевой URL-адрес элемента в источнике данных.                                            |
| createdBy             | Имя человека, создавшего элемент в источнике данных.                           |
| lastModifiedBy        | Имя человека, который последним изменил элемент в источнике данных.              |
| authors               | Имена всех пользователей, которые совместно работали над элементом в источнике данных. |
| createdDateTime       | Дата и время создания элемента в источнике данных.                           |
| lastModifiedDateTime  | Дата и время последнего изменения элемента в источнике данных.                     |
| fileName              | В случае с файлом — имя файла в источнике данных.                               |
| fileExtension         | В случае с файлом — расширение файла в источнике данных.                          |
| iconUrl               | URL-адрес значка.                                                                       |
| containerName         | Имя контейнера.                                                                |
| containerUrl          | URL-адрес контейнера.                                                                 |

Например, свойство связи **lastEditedBy** имеет то же значение, что и метка Майкрософт *lastModifiedBy*.

Добавьте столько меток, сколько сможете, но убедитесь, что они точно соответствуют свойствам. Не добавляйте метку к свойству, если она не имеет смысла. Неправильные сопоставления ухудшают взаимодействие.

> [!IMPORTANT]
> Все свойства, сопоставленные с метками, должны быть доступны для извлечения.

Метка **title** является самой важной меткой. Обязательно назначьте свойство этой метке, чтобы разрешить своей связи участвовать во взаимодействии с кластером результатов. Неправильное сопоставление меток ухудшает качество поиска. Для некоторых меток нормально отсутствие назначенного свойства.

### <a name="relevance"></a>Релевантность

Применяя как можно более точные сопоставленные метки, вы также можете улучшить обнаружение контента при поиске. Мы настоятельно рекомендуем определить как можно больше следующих меток, перечисленных в порядке снижения потенциального влияния на обнаружение:

- title
- lastModifiedDateTime
- lastModifiedBy
- url
- fileName
- fileExtension

При обнаружении (сценариев поиска) обратите внимание на следующее:

- Используйте точные сопоставления.
- Когда вы используете свойство в качестве метки, содержащей объемное содержимое, вы можете увеличить задержку поиска, и вам придется дольше ждать, пока он вернет результаты.
- В частности, в сценарии с настройкой пользовательской вертикали, позволяющей искать несколько связей, результаты поиска значительно выигрывают от назначения максимально большого количества меток.

### <a name="default-result-types"></a>Типы результатов по умолчанию

Метки также влияют на то, как создаются типы результатов по умолчанию. Добавление тегов заголовка и содержимого как минимум гарантирует, что тип результата будет создан для вашего соединения.

![Тип результата по умолчанию с заголовком и фрагментом результата.](./images/connectors-images/connecting-external-content-manage-schema-6.svg)

*Тип результата по умолчанию с `title` и фрагментом результата.*

Ваш тип результата по умолчанию обеспечивает лучший взаимодействие, если вы определяете эти метки, когда это применимо, перечисленные в порядке возрастания:

- title
- url
- lastModifiedBy
- lastModifiedDateTime
- fileName
- fileExtension

Наконец, назначая метки, убедитесь в следующем:

- Свойства, выбранные в качестве меток, должны быть помечены как доступные для извлечения.
- Свойства и назначенные им метки должны иметь одинаковый тип данных.
- Можно сопоставить только одну метку с одним свойством.

## <a name="aliases"></a>Псевдонимы

Псевдонимы — это понятные имена свойств, которые вы назначаете. Они используются в запросах и выборках в фильтрах с уточняемыми свойствами.

## <a name="schema-update-capabilities"></a>Возможности обновления схемы

В этом разделе содержатся сведения о возможностях обновления API [схемы](/graph/api/resources/externalconnectors-schema).

> [!NOTE]
> Рекомендуется повторно загрузить элементы после обновления, чтобы они соответствовали последней схеме. Без повторного приема поведение элементов будет несогласованным.

### <a name="add-a-property"></a>Добавить свойство

Вы можете добавить свойство в свою схему; это не требует повторного приема, но мы рекомендуем это.

При добавлении свойства можно включить все необходимые атрибуты поиска.

### <a name="addremove-a-search-capability"></a>Добавление и удаление возможности поиска

Вы можете добавить в свойство определенные атрибуты поиска, но помните, что атрибут уточнения поиска нельзя добавить в качестве изменения схемы. Кроме того, уточняемые атрибуты невозможно использовать в качестве возможностей, поддерживающих поиск.

Добавление возможности поиска требует повторного приема.

### <a name="addremove-an-alias"></a>Добавление и удаление псевдонима

Вы можете добавлять или удалять псевдонимы, а также использовать их для поисковых запросов.

Учтите, что вы не можете удалить исходный псевдоним уточняемого свойства, который был автоматически создан системой.

### <a name="addremove-a-semantic-label"></a>Добавление и удаление семантической метки

Добавление семантической метки может повлиять на такие функции, как релевантность и Viva Темы.

## <a name="next-steps"></a>Дальнейшие действия

- [Добавление элементов в связь](connecting-external-content-manage-items.md)
- [Обзор справочника API соединителей Microsoft Graph](/graph/api/resources/indexing-api-overview)
- [Поиск объектов настраиваемого типа (externalItem)](search-concept-custom-types.md)
- [Сборка вашего первого пользовательского соединителя Microsoft Graph](/graph/connecting-external-content-build-quickstart)

